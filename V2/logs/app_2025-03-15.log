2025-03-15 01:07:00,503 - kademia - INFO - Application started
2025-03-15 01:07:01,882 - kademia - INFO - Request started | 04eea095-9e47-4006-a76a-703d2786b70b | GET /
2025-03-15 01:07:01,887 - kademia - INFO - Request completed | 04eea095-9e47-4006-a76a-703d2786b70b | Status: 200 | Time: 0.002s
2025-03-15 01:07:02,198 - kademia - INFO - Request started | 3c078ab6-fae4-4d33-8da7-bc312914a772 | GET /favicon.ico
2025-03-15 01:07:02,200 - kademia - INFO - Request completed | 3c078ab6-fae4-4d33-8da7-bc312914a772 | Status: 404 | Time: 0.001s
2025-03-15 01:07:04,207 - kademia - INFO - Request started | 9e99fc10-e5c5-44c2-bf99-4862e4bcccb3 | GET /docs
2025-03-15 01:07:04,278 - kademia - INFO - Request completed | 9e99fc10-e5c5-44c2-bf99-4862e4bcccb3 | Status: 200 | Time: 0.001s
2025-03-15 01:07:05,141 - kademia - INFO - Request started | 82e0c181-f2e1-46a7-ac44-7144f6d623dc | GET /openapi.json
2025-03-15 01:07:05,445 - kademia - INFO - Request completed | 82e0c181-f2e1-46a7-ac44-7144f6d623dc | Status: 200 | Time: 0.303s
2025-03-15 01:07:37,765 - kademia - INFO - Request started | 978d33b9-c377-4b10-a780-3b8f21360309 | POST /api/v1/staff/qualifications/
2025-03-15 01:07:38,179 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-15 01:07:38,180 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:07:38,183 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-15 01:07:38,183 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:07:38,185 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-15 01:07:38,186 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:07:38,187 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:07:38,193 - sqlalchemy.engine.Engine - INFO - INSERT INTO educator_qualifications (id, educator_id, name, description, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(educator_id)s::UUID, %(name)s, %(description)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING educator_qualifications.created_at, educator_qualifications.last_modified_at
2025-03-15 01:07:38,194 - sqlalchemy.engine.Engine - INFO - [generated in 0.00131s] {'id': UUID('2f269d83-69d4-43ca-8a2b-d3c8ed438c57'), 'educator_id': UUID('00000000-0000-0000-0000-000000000000'), 'name': 'Master Of Science In Mathematics', 'description': 'Advanced Degree In Pure Mathematics', 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-15 01:07:38,222 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:07:38,225 - kademia - ERROR - Unhandled exception | 978d33b9-c377-4b10-a780-3b8f21360309 | Qualification not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\staff_organization\qualifications.py", line 22, in create_qualification
    return qualifications_crud.create_qualification(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\staff_organization\educator_qualifications.py", line 30, in create_qualification
    qualification = self.factory.create_qualification(data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\staff_organization\qualifications\factory.py", line 45, in create_qualification
    raise QualificationNotFoundError(id=new_qualification.educator_id)#needs to be user(educator) not found
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app.services.errors.staff_organisation_errors.QualificationNotFoundError: Qualification not found!
2025-03-15 01:07:38,247 - kademia - WARNING - EntityNotFoundError | 978d33b9-c377-4b10-a780-3b8f21360309 | Qualification with id:00000000-0000-0000-0000-000000000001 not found
2025-03-15 01:10:17,810 - kademia - INFO - Request started | d8e00cb6-38e8-4bca-baca-d1fa604b1d30 | GET /api/v1/staff/qualifications/
2025-03-15 01:10:17,812 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:10:17,821 - sqlalchemy.engine.Engine - INFO - SELECT educator_qualifications.id AS educator_qualifications_id, educator_qualifications.educator_id AS educator_qualifications_educator_id, educator_qualifications.name AS educator_qualifications_name, educator_qualifications.description AS educator_qualifications_description, educator_qualifications.created_by AS educator_qualifications_created_by, educator_qualifications.last_modified_by AS educator_qualifications_last_modified_by, educator_qualifications.created_at AS educator_qualifications_created_at, educator_qualifications.last_modified_at AS educator_qualifications_last_modified_at, educator_qualifications.is_archived AS educator_qualifications_is_archived, educator_qualifications.archived_at AS educator_qualifications_archived_at, educator_qualifications.archive_reason AS educator_qualifications_archive_reason, educator_qualifications.archived_by AS educator_qualifications_archived_by 
FROM educator_qualifications 
WHERE educator_qualifications.is_archived = false ORDER BY educator_qualifications.name DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-15 01:10:17,821 - sqlalchemy.engine.Engine - INFO - [generated in 0.00107s] {'param_1': 50, 'param_2': 0}
2025-03-15 01:10:17,827 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:10:17,829 - kademia - INFO - Request completed | d8e00cb6-38e8-4bca-baca-d1fa604b1d30 | Status: 200 | Time: 0.019s
2025-03-15 01:10:43,629 - kademia - INFO - Request started | 48b382c7-2ec4-4748-b4ff-6597bf12177c | GET /api/v1/staff/qualifications/00000000-0000-0000-0000-000000000001
2025-03-15 01:10:43,631 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:10:43,633 - sqlalchemy.engine.Engine - INFO - SELECT educator_qualifications.id AS educator_qualifications_id, educator_qualifications.educator_id AS educator_qualifications_educator_id, educator_qualifications.name AS educator_qualifications_name, educator_qualifications.description AS educator_qualifications_description, educator_qualifications.created_by AS educator_qualifications_created_by, educator_qualifications.last_modified_by AS educator_qualifications_last_modified_by, educator_qualifications.created_at AS educator_qualifications_created_at, educator_qualifications.last_modified_at AS educator_qualifications_last_modified_at, educator_qualifications.is_archived AS educator_qualifications_is_archived, educator_qualifications.archived_at AS educator_qualifications_archived_at, educator_qualifications.archive_reason AS educator_qualifications_archive_reason, educator_qualifications.archived_by AS educator_qualifications_archived_by 
FROM educator_qualifications 
WHERE educator_qualifications.is_archived = false AND educator_qualifications.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:10:43,634 - sqlalchemy.engine.Engine - INFO - [generated in 0.00124s] {'id_1': UUID('00000000-0000-0000-0000-000000000001'), 'param_1': 1}
2025-03-15 01:10:43,640 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:10:43,642 - kademia - ERROR - Unhandled exception | 48b382c7-2ec4-4748-b4ff-6597bf12177c | Qualification not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\staff_organization\qualifications.py", line 35, in get_qualification
    return qualifications_crud.get_qualification(qualification_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\staff_organization\educator_qualifications.py", line 40, in get_qualification
    qualification = self.factory.get_qualification(qualification_id)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\staff_organization\qualifications\factory.py", line 72, in get_qualification
    raise QualificationNotFoundError(id=qualification_id)
app.services.errors.staff_organisation_errors.QualificationNotFoundError: Qualification not found!
2025-03-15 01:10:43,648 - kademia - WARNING - EntityNotFoundError | 48b382c7-2ec4-4748-b4ff-6597bf12177c | Qualification with id:00000000-0000-0000-0000-000000000001 not found
2025-03-15 01:11:02,341 - kademia - INFO - Request started | b8f64b53-166c-4e2a-8ea5-5327506110a3 | GET /api/v1/archive/staff/qualifications/
2025-03-15 01:11:02,343 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:11:02,344 - sqlalchemy.engine.Engine - INFO - SELECT educator_qualifications.id AS educator_qualifications_id, educator_qualifications.educator_id AS educator_qualifications_educator_id, educator_qualifications.name AS educator_qualifications_name, educator_qualifications.description AS educator_qualifications_description, educator_qualifications.created_by AS educator_qualifications_created_by, educator_qualifications.last_modified_by AS educator_qualifications_last_modified_by, educator_qualifications.created_at AS educator_qualifications_created_at, educator_qualifications.last_modified_at AS educator_qualifications_last_modified_at, educator_qualifications.is_archived AS educator_qualifications_is_archived, educator_qualifications.archived_at AS educator_qualifications_archived_at, educator_qualifications.archive_reason AS educator_qualifications_archive_reason, educator_qualifications.archived_by AS educator_qualifications_archived_by 
FROM educator_qualifications 
WHERE educator_qualifications.is_archived = true ORDER BY educator_qualifications.name DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-15 01:11:02,345 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] {'param_1': 50, 'param_2': 0}
2025-03-15 01:11:02,347 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:11:02,349 - kademia - INFO - Request completed | b8f64b53-166c-4e2a-8ea5-5327506110a3 | Status: 200 | Time: 0.008s
2025-03-15 01:11:28,328 - kademia - INFO - Request started | e74cd655-6d1f-4c26-b531-d4eeadff736d | POST /api/v1/staff/departments/
2025-03-15 01:11:28,332 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:11:28,338 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff_departments (id, name, description, manager_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(manager_id)s::UUID, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff_departments.created_at, staff_departments.last_modified_at
2025-03-15 01:11:28,339 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] {'id': UUID('d198c471-90b0-4f9f-a63a-c4b7a38fbce4'), 'name': 'Academic Affairs', 'description': 'Manages Academic Programs And Curriculum', 'manager_id': UUID('00000000-0000-0000-0000-000000000000'), 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-15 01:11:28,355 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:11:28,358 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:11:28,362 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id, staff_departments.name, staff_departments.description, staff_departments.manager_id, staff_departments.created_by, staff_departments.last_modified_by, staff_departments.created_at, staff_departments.last_modified_at, staff_departments.is_archived, staff_departments.archived_at, staff_departments.archive_reason, staff_departments.archived_by 
FROM staff_departments 
WHERE staff_departments.id = %(pk_1)s::UUID
2025-03-15 01:11:28,364 - sqlalchemy.engine.Engine - INFO - [generated in 0.00229s] {'pk_1': UUID('d198c471-90b0-4f9f-a63a-c4b7a38fbce4')}
2025-03-15 01:11:28,367 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:11:28,368 - kademia - INFO - Request completed | e74cd655-6d1f-4c26-b531-d4eeadff736d | Status: 201 | Time: 0.039s
2025-03-15 01:12:37,322 - kademia - INFO - Request started | 4e2da623-c276-4f6e-8625-fe1b457d408f | GET /api/v1/staff/departments/d198c471-90b0-4f9f-a63a-c4b7a38fbce4
2025-03-15 01:12:37,325 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:12:37,327 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = false AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:12:37,327 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] {'id_1': UUID('d198c471-90b0-4f9f-a63a-c4b7a38fbce4'), 'param_1': 1}
2025-03-15 01:12:37,330 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:12:37,331 - kademia - INFO - Request completed | 4e2da623-c276-4f6e-8625-fe1b457d408f | Status: 200 | Time: 0.007s
2025-03-15 01:12:44,832 - kademia - INFO - Request started | 6ec29e5a-c25f-4ca4-a96d-9379742185a3 | GET /api/v1/staff/departments/d198c471-90b0-4f9f-a63a-c4b7a38fbce1
2025-03-15 01:12:44,834 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:12:44,835 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = false AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:12:44,836 - sqlalchemy.engine.Engine - INFO - [cached since 7.51s ago] {'id_1': UUID('d198c471-90b0-4f9f-a63a-c4b7a38fbce1'), 'param_1': 1}
2025-03-15 01:12:44,838 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:12:44,840 - kademia - ERROR - Unhandled exception | 6ec29e5a-c25f-4ca4-a96d-9379742185a3 | Department not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\staff_organization\staff_departments.py", line 36, in get_staff_department
    return staff_departments_crud.get_department(department_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\staff_organization\staff_departments.py", line 41, in get_department
    department = self.factory.get_staff_department(department_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\staff_organization\departments\factory.py", line 53, in get_staff_department
    raise DepartmentNotFoundError(id=department_id)
app.services.errors.staff_organisation_errors.DepartmentNotFoundError: Department not found!
2025-03-15 01:12:44,851 - kademia - WARNING - EntityNotFoundError | 6ec29e5a-c25f-4ca4-a96d-9379742185a3 | Department with id:d198c471-90b0-4f9f-a63a-c4b7a38fbce1 not found
2025-03-15 01:13:50,163 - kademia - INFO - Request started | 09866f23-f043-4ebe-a7aa-780b619fb574 | POST /api/v1/students/academic_levels/
2025-03-15 01:13:50,166 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:13:50,168 - sqlalchemy.engine.Engine - INFO - INSERT INTO academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING academic_levels.created_at, academic_levels.last_modified_at
2025-03-15 01:13:50,169 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] {'id': UUID('e6f2906d-9597-4971-9a5e-cfcedc8af2d3'), 'name': 'Jss1', 'description': 'First Level In The Secondary School System', 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-15 01:13:50,178 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:13:50,181 - kademia - ERROR - Unhandled exception | 09866f23-f043-4ebe-a7aa-780b619fb574 | Duplicate level creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_name_key"
detail:  key (name)=(jss1) already exists.

[sql: insert into academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning academic_levels.created_at, academic_levels.last_modified_at]
[parameters: {'id': uuid('e6f2906d-9597-4971-9a5e-cfcedc8af2d3'), 'name': 'jss1', 'description': 'first level in the secondary school system', 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\academic_levels.py", line 21, in create_academic_level
    return academic_level_crud.create_level(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 31, in create_level
    level = self.factory.create_academic_level(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\student_organization\academic_levels\factory.py", line 41, in create_academic_level
    raise DuplicateLevelError(
app.services.errors.student_organisation_errors.DuplicateLevelError: Duplicate level creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_name_key"
detail:  key (name)=(jss1) already exists.

[sql: insert into academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning academic_levels.created_at, academic_levels.last_modified_at]
[parameters: {'id': uuid('e6f2906d-9597-4971-9a5e-cfcedc8af2d3'), 'name': 'jss1', 'description': 'first level in the secondary school system', 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-15 01:13:50,196 - kademia - WARNING - DuplicateLevelError | 09866f23-f043-4ebe-a7aa-780b619fb574 | Duplicate level creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_name_key"
detail:  key (name)=(jss1) already exists.

[sql: insert into academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning academic_levels.created_at, academic_levels.last_modified_at]
[parameters: {'id': uuid('e6f2906d-9597-4971-9a5e-cfcedc8af2d3'), 'name': 'jss1', 'description': 'first level in the secondary school system', 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-15 01:13:56,276 - kademia - INFO - Request started | 0911dd40-5da4-40b6-91da-e560723d742d | POST /api/v1/students/academic_levels/
2025-03-15 01:13:56,278 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:13:56,279 - sqlalchemy.engine.Engine - INFO - INSERT INTO academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING academic_levels.created_at, academic_levels.last_modified_at
2025-03-15 01:13:56,280 - sqlalchemy.engine.Engine - INFO - [cached since 6.111s ago] {'id': UUID('fdcba7ea-f8aa-4dc9-80c9-6e596ed946f8'), 'name': 'Jssf', 'description': 'First Level In The Secondary School System', 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-15 01:13:56,281 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:13:56,283 - kademia - ERROR - Unhandled exception | 0911dd40-5da4-40b6-91da-e560723d742d | Duplicate level creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_order_key"
detail:  key ("order")=(1) already exists.

[sql: insert into academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning academic_levels.created_at, academic_levels.last_modified_at]
[parameters: {'id': uuid('fdcba7ea-f8aa-4dc9-80c9-6e596ed946f8'), 'name': 'jssf', 'description': 'first level in the secondary school system', 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\academic_levels.py", line 21, in create_academic_level
    return academic_level_crud.create_level(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 31, in create_level
    level = self.factory.create_academic_level(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\student_organization\academic_levels\factory.py", line 44, in create_academic_level
    raise DuplicateLevelError(
app.services.errors.student_organisation_errors.DuplicateLevelError: Duplicate level creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_order_key"
detail:  key ("order")=(1) already exists.

[sql: insert into academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning academic_levels.created_at, academic_levels.last_modified_at]
[parameters: {'id': uuid('fdcba7ea-f8aa-4dc9-80c9-6e596ed946f8'), 'name': 'jssf', 'description': 'first level in the secondary school system', 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-15 01:13:56,291 - kademia - WARNING - DuplicateLevelError | 0911dd40-5da4-40b6-91da-e560723d742d | Duplicate level creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_order_key"
detail:  key ("order")=(1) already exists.

[sql: insert into academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning academic_levels.created_at, academic_levels.last_modified_at]
[parameters: {'id': uuid('fdcba7ea-f8aa-4dc9-80c9-6e596ed946f8'), 'name': 'jssf', 'description': 'first level in the secondary school system', 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-15 01:14:06,200 - kademia - INFO - Request started | 7e5fb6a1-4687-4218-9ee2-8efba6c7c448 | POST /api/v1/students/academic_levels/
2025-03-15 01:14:06,202 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:14:06,203 - sqlalchemy.engine.Engine - INFO - INSERT INTO academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING academic_levels.created_at, academic_levels.last_modified_at
2025-03-15 01:14:06,204 - sqlalchemy.engine.Engine - INFO - [cached since 16.04s ago] {'id': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'name': 'Jssf', 'description': 'First Level In The Secondary School System', 'order': 2, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-15 01:14:06,219 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:14:06,224 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:14:06,227 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-15 01:14:06,229 - sqlalchemy.engine.Engine - INFO - [generated in 0.00101s] {'pk_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:14:06,240 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:14:06,243 - kademia - INFO - Request completed | 7e5fb6a1-4687-4218-9ee2-8efba6c7c448 | Status: 201 | Time: 0.043s
2025-03-15 01:14:46,198 - kademia - INFO - Request started | c37c9470-5fab-43c4-a6f8-6e297a180bd2 | GET /api/v1/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:14:46,201 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:14:46,203 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:14:46,203 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:14:46,206 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:14:46,207 - kademia - INFO - Request completed | c37c9470-5fab-43c4-a6f8-6e297a180bd2 | Status: 200 | Time: 0.008s
2025-03-15 01:25:14,610 - kademia - INFO - Request started | 6d1c22ff-ac97-404f-b8d7-6d02ffdd7c94 | GET /api/v1/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c2
2025-03-15 01:25:14,613 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:25:14,614 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:25:14,615 - sqlalchemy.engine.Engine - INFO - [cached since 628.4s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c2'), 'param_1': 1}
2025-03-15 01:25:14,617 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:25:14,619 - kademia - ERROR - Unhandled exception | 6d1c22ff-ac97-404f-b8d7-6d02ffdd7c94 | Academic level not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\academic_levels.py", line 34, in get_academic_level
    return academic_level_crud.get_level(level_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 42, in get_level
    level = self.factory.get_academic_level(level_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\student_organization\academic_levels\factory.py", line 61, in get_academic_level
    raise LevelNotFoundError(id=academic_level_id)
app.services.errors.student_organisation_errors.LevelNotFoundError: Academic level not found!
2025-03-15 01:25:14,630 - kademia - WARNING - EntityNotFoundError | 6d1c22ff-ac97-404f-b8d7-6d02ffdd7c94 | Academic level with id:4a49bb2c-7dc3-4ca8-a513-809588bd65c2 not found
2025-03-15 01:25:19,993 - kademia - INFO - Request started | 7e9c9f51-a9bf-4d73-b291-e71a313b2bfc | GET /api/v1/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:25:19,995 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:25:19,997 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:25:19,997 - sqlalchemy.engine.Engine - INFO - [cached since 633.8s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:25:19,999 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:25:20,000 - kademia - INFO - Request completed | 7e9c9f51-a9bf-4d73-b291-e71a313b2bfc | Status: 200 | Time: 0.006s
2025-03-15 01:25:41,810 - kademia - INFO - Request started | 76985846-23c3-40b8-966c-8cda21632b6e | PUT /api/v1/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:25:41,814 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:25:41,815 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:25:41,816 - sqlalchemy.engine.Engine - INFO - [cached since 655.6s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:25:41,819 - sqlalchemy.engine.Engine - INFO - UPDATE academic_levels SET name=%(name)s, last_modified_at=now() WHERE academic_levels.id = %(academic_levels_id)s::UUID
2025-03-15 01:25:41,820 - sqlalchemy.engine.Engine - INFO - [generated in 0.00138s] {'name': 'Jss1', 'academic_levels_id': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:25:41,826 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:25:41,829 - kademia - ERROR - Unhandled exception | 76985846-23c3-40b8-966c-8cda21632b6e | Duplicate level creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_name_key"
detail:  key (name)=(jss1) already exists.

[sql: update academic_levels set name=%(name)s, last_modified_at=now() where academic_levels.id = %(academic_levels_id)s::uuid]
[parameters: {'name': 'jss1', 'academic_levels_id': uuid('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\academic_levels.py", line 41, in update_academic_level
    return academic_level_crud.update_level(level_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 64, in update_level
    updated_level = self.factory.update_academic_level(level_id, data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\student_organization\academic_levels\factory.py", line 94, in update_academic_level
    raise DuplicateLevelError(
app.services.errors.student_organisation_errors.DuplicateLevelError: Duplicate level creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_name_key"
detail:  key (name)=(jss1) already exists.

[sql: update academic_levels set name=%(name)s, last_modified_at=now() where academic_levels.id = %(academic_levels_id)s::uuid]
[parameters: {'name': 'jss1', 'academic_levels_id': uuid('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-15 01:25:41,839 - kademia - WARNING - DuplicateLevelError | 76985846-23c3-40b8-966c-8cda21632b6e | Duplicate level creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_name_key"
detail:  key (name)=(jss1) already exists.

[sql: update academic_levels set name=%(name)s, last_modified_at=now() where academic_levels.id = %(academic_levels_id)s::uuid]
[parameters: {'name': 'jss1', 'academic_levels_id': uuid('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-15 01:25:50,393 - kademia - INFO - Request started | 84d5f9d6-f123-41f6-98d7-b321987d02a4 | PUT /api/v1/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:25:50,396 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:25:50,397 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:25:50,398 - sqlalchemy.engine.Engine - INFO - [cached since 664.2s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:25:50,400 - sqlalchemy.engine.Engine - INFO - UPDATE academic_levels SET name=%(name)s, last_modified_at=now() WHERE academic_levels.id = %(academic_levels_id)s::UUID
2025-03-15 01:25:50,401 - sqlalchemy.engine.Engine - INFO - [cached since 8.582s ago] {'name': 'Jssft', 'academic_levels_id': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:25:50,404 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:25:50,405 - sqlalchemy.engine.Engine - INFO - [cached since 664.2s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:25:50,409 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:25:50,410 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:25:50,411 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-15 01:25:50,413 - sqlalchemy.engine.Engine - INFO - [cached since 704.2s ago] {'pk_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:25:50,417 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:25:50,418 - kademia - INFO - Request completed | 84d5f9d6-f123-41f6-98d7-b321987d02a4 | Status: 200 | Time: 0.025s
2025-03-15 01:26:10,524 - kademia - INFO - Request started | cbff6539-63e6-4c4c-ac06-fba5b48cf21e | PUT /api/v1/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:26:10,526 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:26:10,526 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:26:10,527 - sqlalchemy.engine.Engine - INFO - [cached since 684.3s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:26:10,530 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:26:10,530 - sqlalchemy.engine.Engine - INFO - [cached since 684.3s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:26:10,532 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:26:10,533 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:26:10,534 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-15 01:26:10,534 - sqlalchemy.engine.Engine - INFO - [cached since 724.3s ago] {'pk_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:26:10,537 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:26:10,545 - kademia - INFO - Request completed | cbff6539-63e6-4c4c-ac06-fba5b48cf21e | Status: 200 | Time: 0.021s
2025-03-15 01:27:11,926 - kademia - INFO - Request started | ec4ba343-4ba5-440e-b567-8c5d8b75505d | PUT /api/v1/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:27:11,928 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:27:11,929 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:27:11,929 - sqlalchemy.engine.Engine - INFO - [cached since 745.7s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:27:11,932 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:27:11,932 - sqlalchemy.engine.Engine - INFO - [cached since 745.7s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:27:11,934 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:27:11,935 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:27:11,936 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-15 01:27:11,936 - sqlalchemy.engine.Engine - INFO - [cached since 785.7s ago] {'pk_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:27:11,941 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:27:11,944 - kademia - INFO - Request completed | ec4ba343-4ba5-440e-b567-8c5d8b75505d | Status: 200 | Time: 0.017s
2025-03-15 01:27:20,497 - kademia - INFO - Request started | e2783b2c-50df-4c9b-ac43-8bd2b88abd1c | PUT /api/v1/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:27:20,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:27:20,501 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:27:20,503 - sqlalchemy.engine.Engine - INFO - [cached since 754.3s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:27:20,508 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:27:20,509 - sqlalchemy.engine.Engine - INFO - [cached since 754.3s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:27:20,510 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:27:20,512 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:27:20,513 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-15 01:27:20,513 - sqlalchemy.engine.Engine - INFO - [cached since 794.3s ago] {'pk_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:27:20,516 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:27:20,518 - kademia - INFO - Request completed | e2783b2c-50df-4c9b-ac43-8bd2b88abd1c | Status: 200 | Time: 0.021s
2025-03-15 01:28:47,307 - kademia - INFO - Application started
2025-03-15 01:28:54,100 - kademia - INFO - Request started | 794fabd0-898f-4837-9c7e-6d6b5ed30c23 | GET /docs
2025-03-15 01:28:54,101 - kademia - INFO - Request completed | 794fabd0-898f-4837-9c7e-6d6b5ed30c23 | Status: 200 | Time: 0.001s
2025-03-15 01:28:54,248 - kademia - INFO - Request started | 9fa8ee46-d84e-4d72-817e-4ae52a68fe0c | GET /openapi.json
2025-03-15 01:28:54,383 - kademia - INFO - Request completed | 9fa8ee46-d84e-4d72-817e-4ae52a68fe0c | Status: 200 | Time: 0.133s
2025-03-15 01:29:08,172 - kademia - INFO - Request started | 25c29cf6-9772-4df6-a6fd-229d0e450d8f | PUT /api/v1/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:29:08,493 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-15 01:29:08,494 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:29:08,497 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-15 01:29:08,497 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:29:08,499 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-15 01:29:08,499 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:29:08,501 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:29:08,509 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:29:08,511 - sqlalchemy.engine.Engine - INFO - [generated in 0.00135s] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:29:08,524 - sqlalchemy.engine.Engine - INFO - UPDATE academic_levels SET name=%(name)s, "order"=%(order)s, last_modified_at=now() WHERE academic_levels.id = %(academic_levels_id)s::UUID
2025-03-15 01:29:08,525 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] {'name': 'Jss1', 'order': 1, 'academic_levels_id': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:29:08,527 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:29:08,530 - kademia - ERROR - Unhandled exception | 25c29cf6-9772-4df6-a6fd-229d0e450d8f | Duplicate level creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_name_key"
detail:  key (name)=(jss1) already exists.

[sql: update academic_levels set name=%(name)s, "order"=%(order)s, last_modified_at=now() where academic_levels.id = %(academic_levels_id)s::uuid]
[parameters: {'name': 'jss1', 'order': 1, 'academic_levels_id': uuid('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\academic_levels.py", line 41, in update_academic_level
    return academic_level_crud.update_level(level_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 64, in update_level
    updated_level = self.factory.update_academic_level(level_id, data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\student_organization\academic_levels\factory.py", line 97, in update_academic_level
    raise DuplicateLevelError(
app.services.errors.student_organisation_errors.DuplicateLevelError: Duplicate level creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_name_key"
detail:  key (name)=(jss1) already exists.

[sql: update academic_levels set name=%(name)s, "order"=%(order)s, last_modified_at=now() where academic_levels.id = %(academic_levels_id)s::uuid]
[parameters: {'name': 'jss1', 'order': 1, 'academic_levels_id': uuid('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-15 01:29:08,557 - kademia - WARNING - DuplicateLevelError | 25c29cf6-9772-4df6-a6fd-229d0e450d8f | Duplicate level creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_name_key"
detail:  key (name)=(jss1) already exists.

[sql: update academic_levels set name=%(name)s, "order"=%(order)s, last_modified_at=now() where academic_levels.id = %(academic_levels_id)s::uuid]
[parameters: {'name': 'jss1', 'order': 1, 'academic_levels_id': uuid('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-15 01:29:17,448 - kademia - INFO - Request started | 9e8d2507-27da-4d35-864c-ae77b31d56c9 | PUT /api/v1/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:29:17,452 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:29:17,453 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:29:17,454 - sqlalchemy.engine.Engine - INFO - [cached since 8.945s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:29:17,456 - sqlalchemy.engine.Engine - INFO - UPDATE academic_levels SET name=%(name)s, "order"=%(order)s, last_modified_at=now() WHERE academic_levels.id = %(academic_levels_id)s::UUID
2025-03-15 01:29:17,457 - sqlalchemy.engine.Engine - INFO - [cached since 8.933s ago] {'name': 'Jssdf54', 'order': 1, 'academic_levels_id': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:29:17,458 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:29:17,460 - kademia - ERROR - Unhandled exception | 9e8d2507-27da-4d35-864c-ae77b31d56c9 | Duplicate level creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_order_key"
detail:  key ("order")=(1) already exists.

[sql: update academic_levels set name=%(name)s, "order"=%(order)s, last_modified_at=now() where academic_levels.id = %(academic_levels_id)s::uuid]
[parameters: {'name': 'jssdf54', 'order': 1, 'academic_levels_id': uuid('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\academic_levels.py", line 41, in update_academic_level
    return academic_level_crud.update_level(level_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 64, in update_level
    updated_level = self.factory.update_academic_level(level_id, data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\student_organization\academic_levels\factory.py", line 100, in update_academic_level
    raise DuplicateLevelError(
app.services.errors.student_organisation_errors.DuplicateLevelError: Duplicate level creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_order_key"
detail:  key ("order")=(1) already exists.

[sql: update academic_levels set name=%(name)s, "order"=%(order)s, last_modified_at=now() where academic_levels.id = %(academic_levels_id)s::uuid]
[parameters: {'name': 'jssdf54', 'order': 1, 'academic_levels_id': uuid('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-15 01:29:17,469 - kademia - WARNING - DuplicateLevelError | 9e8d2507-27da-4d35-864c-ae77b31d56c9 | Duplicate level creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_order_key"
detail:  key ("order")=(1) already exists.

[sql: update academic_levels set name=%(name)s, "order"=%(order)s, last_modified_at=now() where academic_levels.id = %(academic_levels_id)s::uuid]
[parameters: {'name': 'jssdf54', 'order': 1, 'academic_levels_id': uuid('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-15 01:29:29,617 - kademia - INFO - Request started | 059ea8a2-2cc9-4b7f-af1a-357d064c8b1e | PUT /api/v1/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:29:29,620 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:29:29,621 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:29:29,621 - sqlalchemy.engine.Engine - INFO - [cached since 21.11s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:29:29,628 - sqlalchemy.engine.Engine - INFO - UPDATE academic_levels SET name=%(name)s, "order"=%(order)s, last_modified_at=now() WHERE academic_levels.id = %(academic_levels_id)s::UUID
2025-03-15 01:29:29,629 - sqlalchemy.engine.Engine - INFO - [cached since 21.11s ago] {'name': 'Jssdf54', 'order': 100, 'academic_levels_id': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:29:29,631 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:29:29,632 - sqlalchemy.engine.Engine - INFO - [cached since 21.12s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:29:29,635 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:29:29,647 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:29:29,649 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-15 01:29:29,650 - sqlalchemy.engine.Engine - INFO - [generated in 0.00121s] {'pk_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:29:29,653 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:29:29,655 - kademia - INFO - Request completed | 059ea8a2-2cc9-4b7f-af1a-357d064c8b1e | Status: 200 | Time: 0.038s
2025-03-15 01:29:47,975 - kademia - INFO - Request started | a8aff0d9-bf80-4019-a738-80d6ba4d2849 | PATCH /api/v1/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:29:47,979 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:29:47,980 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:29:47,980 - sqlalchemy.engine.Engine - INFO - [cached since 39.47s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:29:47,983 - sqlalchemy.engine.Engine - INFO - UPDATE academic_levels SET last_modified_at=now(), is_archived=%(is_archived)s, archived_at=%(archived_at)s, archive_reason=%(archive_reason)s, archived_by=%(archived_by)s::UUID WHERE academic_levels.id = %(academic_levels_id)s::UUID
2025-03-15 01:29:47,983 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] {'is_archived': True, 'archived_at': datetime.datetime(2025, 3, 15, 1, 29, 47, 982363, tzinfo=datetime.timezone.utc), 'archive_reason': 'ERROR', 'archived_by': UUID('00000000-0000-0000-0000-000000000000'), 'academic_levels_id': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:29:48,001 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:29:48,003 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:29:48,005 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-15 01:29:48,007 - sqlalchemy.engine.Engine - INFO - [cached since 18.36s ago] {'pk_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:29:48,013 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:29:48,015 - kademia - INFO - Request completed | a8aff0d9-bf80-4019-a738-80d6ba4d2849 | Status: 204 | Time: 0.040s
2025-03-15 01:30:03,524 - kademia - INFO - Request started | 68efceb2-06ee-45cf-b549-bb7d07f77ed8 | GET /api/v1/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:30:03,525 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:30:03,526 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:30:03,527 - sqlalchemy.engine.Engine - INFO - [cached since 55.02s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:30:03,528 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:30:03,530 - kademia - ERROR - Unhandled exception | 68efceb2-06ee-45cf-b549-bb7d07f77ed8 | Academic level not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\academic_levels.py", line 34, in get_academic_level
    return academic_level_crud.get_level(level_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 42, in get_level
    level = self.factory.get_academic_level(level_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\student_organization\academic_levels\factory.py", line 61, in get_academic_level
    raise LevelNotFoundError(id=academic_level_id)
app.services.errors.student_organisation_errors.LevelNotFoundError: Academic level not found!
2025-03-15 01:30:03,549 - kademia - WARNING - EntityNotFoundError | 68efceb2-06ee-45cf-b549-bb7d07f77ed8 | Academic level with id:4a49bb2c-7dc3-4ca8-a513-809588bd65c4 not found
2025-03-15 01:30:14,743 - kademia - INFO - Request started | 822c262d-30f9-474c-bd7a-e5efcd8e714f | GET /api/v1/archive/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:30:14,747 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:30:14,747 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:30:14,748 - sqlalchemy.engine.Engine - INFO - [cached since 66.24s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:30:14,750 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:30:14,752 - kademia - ERROR - Unhandled exception | 822c262d-30f9-474c-bd7a-e5efcd8e714f | Academic level not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\archived_academic_levels.py", line 27, in get_archived_level
    return academic_levels_crud.get_level(level_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 42, in get_level
    level = self.factory.get_academic_level(level_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\student_organization\academic_levels\factory.py", line 61, in get_academic_level
    raise LevelNotFoundError(id=academic_level_id)
app.services.errors.student_organisation_errors.LevelNotFoundError: Academic level not found!
2025-03-15 01:30:14,766 - kademia - WARNING - EntityNotFoundError | 822c262d-30f9-474c-bd7a-e5efcd8e714f | Academic level with id:4a49bb2c-7dc3-4ca8-a513-809588bd65c4 not found
2025-03-15 01:30:32,737 - kademia - INFO - Request started | 03b46055-aa82-46cc-94b9-1139c03b40f5 | GET /api/v1/archive/students/academic_levels/
2025-03-15 01:30:32,741 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:30:32,742 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = true ORDER BY academic_levels."order" DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-15 01:30:32,743 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] {'param_1': 50, 'param_2': 0}
2025-03-15 01:30:32,746 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:30:32,749 - kademia - INFO - Request completed | 03b46055-aa82-46cc-94b9-1139c03b40f5 | Status: 200 | Time: 0.010s
2025-03-15 01:30:57,747 - kademia - INFO - Request started | a813fe68-6c54-4620-b7c1-b7c23fe97362 | GET /api/v1/archive/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:30:57,749 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:30:57,750 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:30:57,751 - sqlalchemy.engine.Engine - INFO - [cached since 109.2s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:30:57,753 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:30:57,754 - kademia - ERROR - Unhandled exception | a813fe68-6c54-4620-b7c1-b7c23fe97362 | Academic level not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\archived_academic_levels.py", line 27, in get_archived_level
    return academic_levels_crud.get_level(level_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 42, in get_level
    level = self.factory.get_academic_level(level_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\student_organization\academic_levels\factory.py", line 61, in get_academic_level
    raise LevelNotFoundError(id=academic_level_id)
app.services.errors.student_organisation_errors.LevelNotFoundError: Academic level not found!
2025-03-15 01:30:57,770 - kademia - WARNING - EntityNotFoundError | a813fe68-6c54-4620-b7c1-b7c23fe97362 | Academic level with id:4a49bb2c-7dc3-4ca8-a513-809588bd65c4 not found
2025-03-15 01:34:17,699 - kademia - INFO - Request started | 897a53b0-cf6a-479a-bfa4-9f63abceae70 | GET /api/v1/archive/students/academic_levels/
2025-03-15 01:34:17,702 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:34:17,703 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = true ORDER BY academic_levels."order" DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-15 01:34:17,704 - sqlalchemy.engine.Engine - INFO - [cached since 225s ago] {'param_1': 50, 'param_2': 0}
2025-03-15 01:34:17,706 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:34:17,707 - kademia - INFO - Request completed | 897a53b0-cf6a-479a-bfa4-9f63abceae70 | Status: 200 | Time: 0.009s
2025-03-15 01:35:27,512 - kademia - INFO - Application started
2025-03-15 01:35:28,607 - kademia - INFO - Request started | 122ff63a-c525-4f83-819e-11f7d67e1dc4 | GET /docs
2025-03-15 01:35:28,608 - kademia - INFO - Request completed | 122ff63a-c525-4f83-819e-11f7d67e1dc4 | Status: 200 | Time: 0.001s
2025-03-15 01:35:28,744 - kademia - INFO - Request started | 957df6e7-895f-4f88-b495-bfb6b7ec7422 | GET /openapi.json
2025-03-15 01:35:28,814 - kademia - INFO - Request completed | 957df6e7-895f-4f88-b495-bfb6b7ec7422 | Status: 200 | Time: 0.069s
2025-03-15 01:37:55,164 - kademia - INFO - Request started | df598664-18cc-4ad5-accf-07d255c678ee | GET /api/v1/archive/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:37:55,404 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-15 01:37:55,405 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:37:55,406 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-15 01:37:55,407 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:37:55,408 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-15 01:37:55,408 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:37:55,409 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:37:55,413 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:37:55,413 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:37:55,420 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:37:55,420 - kademia - ERROR - Unhandled exception | df598664-18cc-4ad5-accf-07d255c678ee | Academic level not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\archived_academic_levels.py", line 27, in get_archived_level
    return academic_levels_crud.get_level(level_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 42, in get_level
    level = self.factory.get_academic_level(level_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\student_organization\academic_levels\factory.py", line 61, in get_academic_level
    raise LevelNotFoundError(id=academic_level_id)
app.services.errors.student_organisation_errors.LevelNotFoundError: Academic level not found!
2025-03-15 01:37:55,429 - kademia - WARNING - EntityNotFoundError | df598664-18cc-4ad5-accf-07d255c678ee | Academic level with id:4a49bb2c-7dc3-4ca8-a513-809588bd65c4 not found
2025-03-15 01:38:27,829 - kademia - INFO - Application started
2025-03-15 01:38:29,238 - kademia - INFO - Request started | 1cebde90-a860-4c16-b69c-56a88dc8c92e | GET /
2025-03-15 01:38:29,242 - kademia - INFO - Request completed | 1cebde90-a860-4c16-b69c-56a88dc8c92e | Status: 200 | Time: 0.004s
2025-03-15 01:38:29,421 - kademia - INFO - Request started | 671f5968-cd94-445c-8622-cd6ab9e69d5b | GET /favicon.ico
2025-03-15 01:38:29,425 - kademia - INFO - Request completed | 671f5968-cd94-445c-8622-cd6ab9e69d5b | Status: 404 | Time: 0.002s
2025-03-15 01:38:33,606 - kademia - INFO - Request started | 7a0c42e2-a648-44b6-bce9-d4de82144302 | GET /docs
2025-03-15 01:38:33,607 - kademia - INFO - Request completed | 7a0c42e2-a648-44b6-bce9-d4de82144302 | Status: 200 | Time: 0.001s
2025-03-15 01:38:33,757 - kademia - INFO - Request started | e90c9b66-88fa-413b-a64d-be9602a812ac | GET /openapi.json
2025-03-15 01:38:33,835 - kademia - INFO - Request completed | e90c9b66-88fa-413b-a64d-be9602a812ac | Status: 200 | Time: 0.078s
2025-03-15 01:39:47,883 - kademia - INFO - Request started | dca0086e-8042-4ec5-aa06-02f5bfdb4a5b | GET /api/v1/archive/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:39:48,109 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-15 01:39:48,109 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:39:48,110 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-15 01:39:48,110 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:39:48,111 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-15 01:39:48,112 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:39:48,113 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:39:48,117 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:39:48,117 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:39:48,122 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:39:48,124 - kademia - ERROR - Unhandled exception | dca0086e-8042-4ec5-aa06-02f5bfdb4a5b | Academic level not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\archived_academic_levels.py", line 27, in get_archived_level
    return academic_levels_crud.get_level(level_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 42, in get_level
    level = self.factory.get_academic_level(level_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\student_organization\academic_levels\factory.py", line 61, in get_academic_level
    raise LevelNotFoundError(id=academic_level_id)
app.services.errors.student_organisation_errors.LevelNotFoundError: Academic level not found!
2025-03-15 01:39:48,132 - kademia - WARNING - EntityNotFoundError | dca0086e-8042-4ec5-aa06-02f5bfdb4a5b | Academic level with id:4a49bb2c-7dc3-4ca8-a513-809588bd65c4 not found
2025-03-15 01:40:16,989 - kademia - INFO - Request started | 23622e9c-cf7b-4b1f-b007-329809fa0fc3 | GET /api/v1/archive/students/academic_levels/43140506-5aa6-4e94-9de1-ff5117dddc25
2025-03-15 01:40:16,991 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:40:16,993 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:40:16,993 - sqlalchemy.engine.Engine - INFO - [cached since 28.88s ago] {'id_1': UUID('43140506-5aa6-4e94-9de1-ff5117dddc25'), 'param_1': 1}
2025-03-15 01:40:16,996 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:40:16,998 - kademia - INFO - Request completed | 23622e9c-cf7b-4b1f-b007-329809fa0fc3 | Status: 200 | Time: 0.009s
2025-03-15 01:40:43,599 - kademia - INFO - Application started
2025-03-15 01:40:43,645 - kademia - INFO - Application started
2025-03-15 01:41:02,705 - kademia - INFO - Request started | 24690680-6df4-47bf-b6ea-466e0e377279 | GET /api/v1/archive/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:41:03,013 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-15 01:41:03,014 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:41:03,016 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-15 01:41:03,016 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:41:03,017 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-15 01:41:03,017 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:41:03,018 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:41:03,022 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = true AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:41:03,024 - sqlalchemy.engine.Engine - INFO - [generated in 0.00134s] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:41:03,031 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:41:03,032 - kademia - INFO - Request completed | 24690680-6df4-47bf-b6ea-466e0e377279 | Status: 200 | Time: 0.327s
2025-03-15 01:42:35,183 - kademia - INFO - Request started | 53e20d12-33dc-4a93-996a-2daf8f234b23 | PATCH /api/v1/archive/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:42:35,184 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:42:35,185 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = true AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:42:35,185 - sqlalchemy.engine.Engine - INFO - [cached since 92.16s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:42:35,188 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = true AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:42:35,190 - sqlalchemy.engine.Engine - INFO - [cached since 92.17s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:42:35,200 - sqlalchemy.engine.Engine - INFO - UPDATE academic_levels SET last_modified_at=now(), is_archived=%(is_archived)s WHERE academic_levels.id = %(academic_levels_id)s::UUID
2025-03-15 01:42:35,201 - sqlalchemy.engine.Engine - INFO - [generated in 0.00091s] {'is_archived': False, 'academic_levels_id': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:42:35,203 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:42:35,210 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:42:35,212 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-15 01:42:35,213 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] {'pk_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:42:35,215 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:42:35,216 - kademia - INFO - Request completed | 53e20d12-33dc-4a93-996a-2daf8f234b23 | Status: 200 | Time: 0.034s
2025-03-15 01:42:40,798 - kademia - INFO - Request started | 20c35110-a7d0-4d7c-9113-b0421708acc6 | GET /api/v1/archive/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:42:40,800 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:42:40,801 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = true AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:42:40,801 - sqlalchemy.engine.Engine - INFO - [cached since 97.78s ago] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:42:40,804 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:42:40,805 - kademia - ERROR - Unhandled exception | 20c35110-a7d0-4d7c-9113-b0421708acc6 | Academic level not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\archived_academic_levels.py", line 27, in get_archived_level
    return academic_levels_crud.get_archived_level(level_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 94, in get_archived_level
    level = self.factory.get_archived_academic_level(level_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\student_organization\academic_levels\factory.py", line 151, in get_archived_academic_level
    raise LevelNotFoundError(id=academic_level_id)
app.services.errors.student_organisation_errors.LevelNotFoundError: Academic level not found!
2025-03-15 01:42:40,820 - kademia - WARNING - EntityNotFoundError | 20c35110-a7d0-4d7c-9113-b0421708acc6 | Academic level with id:4a49bb2c-7dc3-4ca8-a513-809588bd65c4 not found
2025-03-15 01:42:54,973 - kademia - INFO - Request started | 38947ad2-5485-4e3f-8f73-2585d7d68ebf | DELETE /api/v1/students/academic_levels/4a49bb2c-7dc3-4ca8-a513-809588bd65c4
2025-03-15 01:42:54,975 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:42:54,976 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:42:54,977 - sqlalchemy.engine.Engine - INFO - [generated in 0.00074s] {'id_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4'), 'param_1': 1}
2025-03-15 01:42:54,982 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.mentor_id AS classes_mentor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE %(param_1)s::UUID = classes.level_id
2025-03-15 01:42:54,984 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] {'param_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:42:55,002 - sqlalchemy.engine.Engine - INFO - SELECT academic_level_subjects.id AS academic_level_subjects_id, academic_level_subjects.level_id AS academic_level_subjects_level_id, academic_level_subjects.subject_id AS academic_level_subjects_subject_id, academic_level_subjects.educator_id AS academic_level_subjects_educator_id, academic_level_subjects.is_elective AS academic_level_subjects_is_elective, academic_level_subjects.academic_year AS academic_level_subjects_academic_year, academic_level_subjects.curriculum_url AS academic_level_subjects_curriculum_url, academic_level_subjects.created_by AS academic_level_subjects_created_by, academic_level_subjects.last_modified_by AS academic_level_subjects_last_modified_by, academic_level_subjects.created_at AS academic_level_subjects_created_at, academic_level_subjects.last_modified_at AS academic_level_subjects_last_modified_at, academic_level_subjects.is_archived AS academic_level_subjects_is_archived, academic_level_subjects.archived_at AS academic_level_subjects_archived_at, academic_level_subjects.archive_reason AS academic_level_subjects_archive_reason, academic_level_subjects.archived_by AS academic_level_subjects_archived_by 
FROM academic_level_subjects 
WHERE %(param_1)s::UUID = academic_level_subjects.level_id
2025-03-15 01:42:55,002 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] {'param_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:42:55,015 - sqlalchemy.engine.Engine - INFO - SELECT students.student_id AS students_student_id, students.user_type AS students_user_type, students.access_level AS students_access_level, students.status AS students_status, students.date_of_birth AS students_date_of_birth, students.image_url AS students_image_url, students.class_id AS students_class_id, students.level_id AS students_level_id, students.department_id AS students_department_id, students.parent_id AS students_parent_id, students.is_repeating AS students_is_repeating, students.admission_date AS students_admission_date, students.date_left AS students_date_left, students.graduation_date AS students_graduation_date, students.id AS students_id, students.password_hash AS students_password_hash, students.first_name AS students_first_name, students.last_name AS students_last_name, students.gender AS students_gender, students.last_login AS students_last_login, students.deletion_eligible AS students_deletion_eligible, students.created_by AS students_created_by, students.last_modified_by AS students_last_modified_by, students.created_at AS students_created_at, students.last_modified_at AS students_last_modified_at, students.is_archived AS students_is_archived, students.archived_at AS students_archived_at, students.archive_reason AS students_archive_reason, students.archived_by AS students_archived_by 
FROM students 
WHERE %(param_1)s::UUID = students.level_id
2025-03-15 01:42:55,016 - sqlalchemy.engine.Engine - INFO - [generated in 0.00089s] {'param_1': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:42:55,029 - sqlalchemy.engine.Engine - INFO - DELETE FROM academic_levels WHERE academic_levels.id = %(id)s::UUID
2025-03-15 01:42:55,030 - sqlalchemy.engine.Engine - INFO - [generated in 0.00055s] {'id': UUID('4a49bb2c-7dc3-4ca8-a513-809588bd65c4')}
2025-03-15 01:42:55,050 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:42:55,052 - kademia - INFO - Request completed | 38947ad2-5485-4e3f-8f73-2585d7d68ebf | Status: 204 | Time: 0.079s
2025-03-15 01:43:34,357 - kademia - INFO - Request started | 635f47e9-1029-40ef-84d8-f0f6a7be03de | DELETE /api/v1/archive/students/academic_levels/{level_id}
2025-03-15 01:43:34,359 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:43:34,360 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:43:34,360 - sqlalchemy.engine.Engine - INFO - [cached since 39.38s ago] {'id_1': UUID('43140506-5aa6-4e94-9de1-ff5117dddc25'), 'param_1': 1}
2025-03-15 01:43:34,363 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.mentor_id AS classes_mentor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE %(param_1)s::UUID = classes.level_id
2025-03-15 01:43:34,364 - sqlalchemy.engine.Engine - INFO - [cached since 39.38s ago] {'param_1': UUID('43140506-5aa6-4e94-9de1-ff5117dddc25')}
2025-03-15 01:43:34,366 - sqlalchemy.engine.Engine - INFO - SELECT academic_level_subjects.id AS academic_level_subjects_id, academic_level_subjects.level_id AS academic_level_subjects_level_id, academic_level_subjects.subject_id AS academic_level_subjects_subject_id, academic_level_subjects.educator_id AS academic_level_subjects_educator_id, academic_level_subjects.is_elective AS academic_level_subjects_is_elective, academic_level_subjects.academic_year AS academic_level_subjects_academic_year, academic_level_subjects.curriculum_url AS academic_level_subjects_curriculum_url, academic_level_subjects.created_by AS academic_level_subjects_created_by, academic_level_subjects.last_modified_by AS academic_level_subjects_last_modified_by, academic_level_subjects.created_at AS academic_level_subjects_created_at, academic_level_subjects.last_modified_at AS academic_level_subjects_last_modified_at, academic_level_subjects.is_archived AS academic_level_subjects_is_archived, academic_level_subjects.archived_at AS academic_level_subjects_archived_at, academic_level_subjects.archive_reason AS academic_level_subjects_archive_reason, academic_level_subjects.archived_by AS academic_level_subjects_archived_by 
FROM academic_level_subjects 
WHERE %(param_1)s::UUID = academic_level_subjects.level_id
2025-03-15 01:43:34,367 - sqlalchemy.engine.Engine - INFO - [cached since 39.37s ago] {'param_1': UUID('43140506-5aa6-4e94-9de1-ff5117dddc25')}
2025-03-15 01:43:34,371 - sqlalchemy.engine.Engine - INFO - SELECT students.student_id AS students_student_id, students.user_type AS students_user_type, students.access_level AS students_access_level, students.status AS students_status, students.date_of_birth AS students_date_of_birth, students.image_url AS students_image_url, students.class_id AS students_class_id, students.level_id AS students_level_id, students.department_id AS students_department_id, students.parent_id AS students_parent_id, students.is_repeating AS students_is_repeating, students.admission_date AS students_admission_date, students.date_left AS students_date_left, students.graduation_date AS students_graduation_date, students.id AS students_id, students.password_hash AS students_password_hash, students.first_name AS students_first_name, students.last_name AS students_last_name, students.gender AS students_gender, students.last_login AS students_last_login, students.deletion_eligible AS students_deletion_eligible, students.created_by AS students_created_by, students.last_modified_by AS students_last_modified_by, students.created_at AS students_created_at, students.last_modified_at AS students_last_modified_at, students.is_archived AS students_is_archived, students.archived_at AS students_archived_at, students.archive_reason AS students_archive_reason, students.archived_by AS students_archived_by 
FROM students 
WHERE %(param_1)s::UUID = students.level_id
2025-03-15 01:43:34,371 - sqlalchemy.engine.Engine - INFO - [cached since 39.36s ago] {'param_1': UUID('43140506-5aa6-4e94-9de1-ff5117dddc25')}
2025-03-15 01:43:34,381 - sqlalchemy.engine.Engine - INFO - DELETE FROM academic_levels WHERE academic_levels.id = %(id)s::UUID
2025-03-15 01:43:34,382 - sqlalchemy.engine.Engine - INFO - [cached since 39.35s ago] {'id': UUID('43140506-5aa6-4e94-9de1-ff5117dddc25')}
2025-03-15 01:43:34,384 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:43:34,388 - kademia - INFO - Request completed | 635f47e9-1029-40ef-84d8-f0f6a7be03de | Status: 204 | Time: 0.031s
2025-03-15 01:43:57,016 - kademia - INFO - Request started | 9c70d4d0-3edc-491d-8c14-67f2bbf6e4ad | POST /api/v1/students/academic_levels/
2025-03-15 01:43:57,021 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:43:57,024 - sqlalchemy.engine.Engine - INFO - INSERT INTO academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING academic_levels.created_at, academic_levels.last_modified_at
2025-03-15 01:43:57,024 - sqlalchemy.engine.Engine - INFO - [generated in 0.00070s] {'id': UUID('fa60549c-fc6d-4f99-b6e6-ab79a6d6ae6f'), 'name': 'Jss1', 'description': 'First Level In The Secondary School System', 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-15 01:43:57,035 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:43:57,041 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:43:57,045 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-15 01:43:57,045 - sqlalchemy.engine.Engine - INFO - [generated in 0.00074s] {'pk_1': UUID('fa60549c-fc6d-4f99-b6e6-ab79a6d6ae6f')}
2025-03-15 01:43:57,048 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:43:57,048 - kademia - INFO - Request completed | 9c70d4d0-3edc-491d-8c14-67f2bbf6e4ad | Status: 201 | Time: 0.031s
2025-03-15 01:44:12,735 - kademia - INFO - Request started | 41b67dc0-16e0-40c9-aa46-7109d963ca3c | DELETE /api/v1/archive/students/academic_levels/{level_id}
2025-03-15 01:44:12,736 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:44:12,737 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:44:12,738 - sqlalchemy.engine.Engine - INFO - [cached since 77.76s ago] {'id_1': UUID('fa60549c-fc6d-4f99-b6e6-ab79a6d6ae6f'), 'param_1': 1}
2025-03-15 01:44:12,739 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.mentor_id AS classes_mentor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE %(param_1)s::UUID = classes.level_id
2025-03-15 01:44:12,740 - sqlalchemy.engine.Engine - INFO - [cached since 77.76s ago] {'param_1': UUID('fa60549c-fc6d-4f99-b6e6-ab79a6d6ae6f')}
2025-03-15 01:44:12,742 - sqlalchemy.engine.Engine - INFO - SELECT academic_level_subjects.id AS academic_level_subjects_id, academic_level_subjects.level_id AS academic_level_subjects_level_id, academic_level_subjects.subject_id AS academic_level_subjects_subject_id, academic_level_subjects.educator_id AS academic_level_subjects_educator_id, academic_level_subjects.is_elective AS academic_level_subjects_is_elective, academic_level_subjects.academic_year AS academic_level_subjects_academic_year, academic_level_subjects.curriculum_url AS academic_level_subjects_curriculum_url, academic_level_subjects.created_by AS academic_level_subjects_created_by, academic_level_subjects.last_modified_by AS academic_level_subjects_last_modified_by, academic_level_subjects.created_at AS academic_level_subjects_created_at, academic_level_subjects.last_modified_at AS academic_level_subjects_last_modified_at, academic_level_subjects.is_archived AS academic_level_subjects_is_archived, academic_level_subjects.archived_at AS academic_level_subjects_archived_at, academic_level_subjects.archive_reason AS academic_level_subjects_archive_reason, academic_level_subjects.archived_by AS academic_level_subjects_archived_by 
FROM academic_level_subjects 
WHERE %(param_1)s::UUID = academic_level_subjects.level_id
2025-03-15 01:44:12,742 - sqlalchemy.engine.Engine - INFO - [cached since 77.74s ago] {'param_1': UUID('fa60549c-fc6d-4f99-b6e6-ab79a6d6ae6f')}
2025-03-15 01:44:12,745 - sqlalchemy.engine.Engine - INFO - SELECT students.student_id AS students_student_id, students.user_type AS students_user_type, students.access_level AS students_access_level, students.status AS students_status, students.date_of_birth AS students_date_of_birth, students.image_url AS students_image_url, students.class_id AS students_class_id, students.level_id AS students_level_id, students.department_id AS students_department_id, students.parent_id AS students_parent_id, students.is_repeating AS students_is_repeating, students.admission_date AS students_admission_date, students.date_left AS students_date_left, students.graduation_date AS students_graduation_date, students.id AS students_id, students.password_hash AS students_password_hash, students.first_name AS students_first_name, students.last_name AS students_last_name, students.gender AS students_gender, students.last_login AS students_last_login, students.deletion_eligible AS students_deletion_eligible, students.created_by AS students_created_by, students.last_modified_by AS students_last_modified_by, students.created_at AS students_created_at, students.last_modified_at AS students_last_modified_at, students.is_archived AS students_is_archived, students.archived_at AS students_archived_at, students.archive_reason AS students_archive_reason, students.archived_by AS students_archived_by 
FROM students 
WHERE %(param_1)s::UUID = students.level_id
2025-03-15 01:44:12,746 - sqlalchemy.engine.Engine - INFO - [cached since 77.73s ago] {'param_1': UUID('fa60549c-fc6d-4f99-b6e6-ab79a6d6ae6f')}
2025-03-15 01:44:12,748 - sqlalchemy.engine.Engine - INFO - DELETE FROM academic_levels WHERE academic_levels.id = %(id)s::UUID
2025-03-15 01:44:12,749 - sqlalchemy.engine.Engine - INFO - [cached since 77.72s ago] {'id': UUID('fa60549c-fc6d-4f99-b6e6-ab79a6d6ae6f')}
2025-03-15 01:44:12,751 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:44:12,756 - kademia - INFO - Request completed | 41b67dc0-16e0-40c9-aa46-7109d963ca3c | Status: 204 | Time: 0.021s
2025-03-15 01:44:34,167 - kademia - INFO - Application started
2025-03-15 01:44:34,168 - kademia - INFO - Application started
2025-03-15 01:44:43,292 - kademia - INFO - Request started | 02383f1a-2c2b-4d58-a862-142fcfc900f2 | POST /api/v1/students/academic_levels/
2025-03-15 01:44:43,513 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-15 01:44:43,513 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:44:43,515 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-15 01:44:43,516 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:44:43,517 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-15 01:44:43,517 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-15 01:44:43,518 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:44:43,521 - sqlalchemy.engine.Engine - INFO - INSERT INTO academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING academic_levels.created_at, academic_levels.last_modified_at
2025-03-15 01:44:43,522 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] {'id': UUID('2e15b4b9-0c90-4819-8ec9-675cdfb2a467'), 'name': 'Jss1', 'description': 'First Level In The Secondary School System', 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-15 01:44:43,529 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:44:43,535 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:44:43,538 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-15 01:44:43,539 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] {'pk_1': UUID('2e15b4b9-0c90-4819-8ec9-675cdfb2a467')}
2025-03-15 01:44:43,545 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:44:43,546 - kademia - INFO - Request completed | 02383f1a-2c2b-4d58-a862-142fcfc900f2 | Status: 201 | Time: 0.254s
2025-03-15 01:45:01,460 - kademia - INFO - Request started | b29bf067-75a3-499a-8955-184fd7176aab | DELETE /api/v1/archive/students/academic_levels/{level_id}
2025-03-15 01:45:01,462 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:45:01,464 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = true AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:45:01,465 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] {'id_1': UUID('2e15b4b9-0c90-4819-8ec9-675cdfb2a467'), 'param_1': 1}
2025-03-15 01:45:01,467 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:45:01,468 - kademia - ERROR - Unhandled exception | b29bf067-75a3-499a-8955-184fd7176aab | Academic level not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\archived_academic_levels.py", line 39, in delete_archived_department
    return academic_levels_crud.delete_archived_level(department_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 124, in delete_archived_level
    self.factory.delete_archived_academic_level(level_id)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\student_organization\academic_levels\factory.py", line 176, in delete_archived_academic_level
    raise LevelNotFoundError(id=academic_level_id)
app.services.errors.student_organisation_errors.LevelNotFoundError: Academic level not found!
2025-03-15 01:45:01,483 - kademia - WARNING - EntityNotFoundError | b29bf067-75a3-499a-8955-184fd7176aab | Academic level with id:2e15b4b9-0c90-4819-8ec9-675cdfb2a467 not found
2025-03-15 01:45:11,733 - kademia - INFO - Request started | ec34ef50-ee69-4a3d-a995-9250c6a5c759 | DELETE /api/v1/students/academic_levels/2e15b4b9-0c90-4819-8ec9-675cdfb2a467
2025-03-15 01:45:11,735 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:45:11,737 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-15 01:45:11,737 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] {'id_1': UUID('2e15b4b9-0c90-4819-8ec9-675cdfb2a467'), 'param_1': 1}
2025-03-15 01:45:11,743 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.mentor_id AS classes_mentor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE %(param_1)s::UUID = classes.level_id
2025-03-15 01:45:11,744 - sqlalchemy.engine.Engine - INFO - [generated in 0.00123s] {'param_1': UUID('2e15b4b9-0c90-4819-8ec9-675cdfb2a467')}
2025-03-15 01:45:11,766 - sqlalchemy.engine.Engine - INFO - SELECT academic_level_subjects.id AS academic_level_subjects_id, academic_level_subjects.level_id AS academic_level_subjects_level_id, academic_level_subjects.subject_id AS academic_level_subjects_subject_id, academic_level_subjects.educator_id AS academic_level_subjects_educator_id, academic_level_subjects.is_elective AS academic_level_subjects_is_elective, academic_level_subjects.academic_year AS academic_level_subjects_academic_year, academic_level_subjects.curriculum_url AS academic_level_subjects_curriculum_url, academic_level_subjects.created_by AS academic_level_subjects_created_by, academic_level_subjects.last_modified_by AS academic_level_subjects_last_modified_by, academic_level_subjects.created_at AS academic_level_subjects_created_at, academic_level_subjects.last_modified_at AS academic_level_subjects_last_modified_at, academic_level_subjects.is_archived AS academic_level_subjects_is_archived, academic_level_subjects.archived_at AS academic_level_subjects_archived_at, academic_level_subjects.archive_reason AS academic_level_subjects_archive_reason, academic_level_subjects.archived_by AS academic_level_subjects_archived_by 
FROM academic_level_subjects 
WHERE %(param_1)s::UUID = academic_level_subjects.level_id
2025-03-15 01:45:11,766 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] {'param_1': UUID('2e15b4b9-0c90-4819-8ec9-675cdfb2a467')}
2025-03-15 01:45:11,773 - sqlalchemy.engine.Engine - INFO - SELECT students.student_id AS students_student_id, students.user_type AS students_user_type, students.access_level AS students_access_level, students.status AS students_status, students.date_of_birth AS students_date_of_birth, students.image_url AS students_image_url, students.class_id AS students_class_id, students.level_id AS students_level_id, students.department_id AS students_department_id, students.parent_id AS students_parent_id, students.is_repeating AS students_is_repeating, students.admission_date AS students_admission_date, students.date_left AS students_date_left, students.graduation_date AS students_graduation_date, students.id AS students_id, students.password_hash AS students_password_hash, students.first_name AS students_first_name, students.last_name AS students_last_name, students.gender AS students_gender, students.last_login AS students_last_login, students.deletion_eligible AS students_deletion_eligible, students.created_by AS students_created_by, students.last_modified_by AS students_last_modified_by, students.created_at AS students_created_at, students.last_modified_at AS students_last_modified_at, students.is_archived AS students_is_archived, students.archived_at AS students_archived_at, students.archive_reason AS students_archive_reason, students.archived_by AS students_archived_by 
FROM students 
WHERE %(param_1)s::UUID = students.level_id
2025-03-15 01:45:11,773 - sqlalchemy.engine.Engine - INFO - [generated in 0.00128s] {'param_1': UUID('2e15b4b9-0c90-4819-8ec9-675cdfb2a467')}
2025-03-15 01:45:11,783 - sqlalchemy.engine.Engine - INFO - DELETE FROM academic_levels WHERE academic_levels.id = %(id)s::UUID
2025-03-15 01:45:11,784 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] {'id': UUID('2e15b4b9-0c90-4819-8ec9-675cdfb2a467')}
2025-03-15 01:45:11,793 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:45:11,798 - kademia - INFO - Request completed | ec34ef50-ee69-4a3d-a995-9250c6a5c759 | Status: 204 | Time: 0.065s
2025-03-15 01:45:23,870 - kademia - INFO - Request started | 412123cd-3741-49f3-97dc-ca844129bdee | POST /api/v1/students/academic_levels/
2025-03-15 01:45:23,873 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:45:23,874 - sqlalchemy.engine.Engine - INFO - INSERT INTO academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING academic_levels.created_at, academic_levels.last_modified_at
2025-03-15 01:45:23,875 - sqlalchemy.engine.Engine - INFO - [cached since 40.35s ago] {'id': UUID('10a2a500-d8c0-434c-b5f0-d11e99018e21'), 'name': 'Jss1', 'description': 'First Level In The Secondary School System', 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-15 01:45:23,876 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:45:23,881 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:45:23,882 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-15 01:45:23,883 - sqlalchemy.engine.Engine - INFO - [cached since 40.35s ago] {'pk_1': UUID('10a2a500-d8c0-434c-b5f0-d11e99018e21')}
2025-03-15 01:45:23,886 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:45:23,888 - kademia - INFO - Request completed | 412123cd-3741-49f3-97dc-ca844129bdee | Status: 201 | Time: 0.018s
2025-03-15 01:45:48,455 - kademia - INFO - Request started | 10329691-5bfb-4569-a834-d88308e6e0b8 | POST /api/v1/students/classes/
2025-03-15 01:45:48,462 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:45:48,465 - sqlalchemy.engine.Engine - INFO - INSERT INTO classes (id, level_id, code, mentor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at
2025-03-15 01:45:48,466 - sqlalchemy.engine.Engine - INFO - [generated in 0.00117s] {'id': UUID('b6035f68-0443-4cca-b19c-4d2c0d9f142e'), 'level_id': UUID('10a2a500-d8c0-434c-b5f0-d11e99018e21'), 'code': 'A', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-15 01:45:48,502 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-15 01:45:48,503 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:45:48,505 - sqlalchemy.engine.Engine - INFO - SELECT classes.id, classes.level_id, classes.code, classes.mentor_id, classes.student_rep_id, classes.assistant_rep_id, classes."order", classes.created_by, classes.last_modified_by, classes.created_at, classes.last_modified_at, classes.is_archived, classes.archived_at, classes.archive_reason, classes.archived_by 
FROM classes 
WHERE classes.id = %(pk_1)s::UUID
2025-03-15 01:45:48,505 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] {'pk_1': UUID('b6035f68-0443-4cca-b19c-4d2c0d9f142e')}
2025-03-15 01:45:48,510 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:45:48,512 - kademia - INFO - Request completed | 10329691-5bfb-4569-a834-d88308e6e0b8 | Status: 201 | Time: 0.057s
2025-03-15 01:46:07,635 - kademia - INFO - Request started | a511e7a6-bdb9-492e-97b7-c3a27a229bf5 | POST /api/v1/students/classes/
2025-03-15 01:46:07,638 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:46:07,639 - sqlalchemy.engine.Engine - INFO - INSERT INTO classes (id, level_id, code, mentor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at
2025-03-15 01:46:07,640 - sqlalchemy.engine.Engine - INFO - [cached since 19.18s ago] {'id': UUID('60f023c7-f00c-4e58-acda-1d7d73fb2194'), 'level_id': UUID('10a2a500-d8c0-434c-b5f0-d11e99018e23'), 'code': 'A', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-15 01:46:07,642 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:46:07,643 - kademia - ERROR - Unhandled exception | a511e7a6-bdb9-492e-97b7-c3a27a229bf5 | Duplicate class creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "classes_order_key"
detail:  key ("order")=(1) already exists.

[sql: insert into classes (id, level_id, code, mentor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(level_id)s::uuid, %(code)s, %(mentor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning classes.created_at, classes.last_modified_at]
[parameters: {'id': uuid('60f023c7-f00c-4e58-acda-1d7d73fb2194'), 'level_id': uuid('10a2a500-d8c0-434c-b5f0-d11e99018e23'), 'code': 'a', 'mentor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\classes.py", line 19, in create_class
    return class_crud.create_class(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\classes.py", line 30, in create_class
    new_class = self.factory.create_class(data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\student_organization\classes\factory.py", line 52, in create_class
    raise DuplicateClassError(
app.services.errors.student_organisation_errors.DuplicateClassError: Duplicate class creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "classes_order_key"
detail:  key ("order")=(1) already exists.

[sql: insert into classes (id, level_id, code, mentor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(level_id)s::uuid, %(code)s, %(mentor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning classes.created_at, classes.last_modified_at]
[parameters: {'id': uuid('60f023c7-f00c-4e58-acda-1d7d73fb2194'), 'level_id': uuid('10a2a500-d8c0-434c-b5f0-d11e99018e23'), 'code': 'a', 'mentor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-15 01:46:07,656 - kademia - WARNING - DuplicateClassError | a511e7a6-bdb9-492e-97b7-c3a27a229bf5 | Duplicate class creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "classes_order_key"
detail:  key ("order")=(1) already exists.

[sql: insert into classes (id, level_id, code, mentor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(level_id)s::uuid, %(code)s, %(mentor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning classes.created_at, classes.last_modified_at]
[parameters: {'id': uuid('60f023c7-f00c-4e58-acda-1d7d73fb2194'), 'level_id': uuid('10a2a500-d8c0-434c-b5f0-d11e99018e23'), 'code': 'a', 'mentor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-15 01:46:59,182 - kademia - INFO - Request started | e5afa21a-9702-443a-b65f-4a612fefa55e | POST /api/v1/students/classes/
2025-03-15 01:46:59,185 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-15 01:46:59,186 - sqlalchemy.engine.Engine - INFO - INSERT INTO classes (id, level_id, code, mentor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at
2025-03-15 01:46:59,186 - sqlalchemy.engine.Engine - INFO - [cached since 70.72s ago] {'id': UUID('a91487af-b3a9-408e-8a58-843ab1a27079'), 'level_id': UUID('10a2a500-d8c0-434c-b5f0-d11e99018e23'), 'code': 'A', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 34, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-15 01:46:59,189 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-15 01:46:59,190 - kademia - ERROR - Unhandled exception | e5afa21a-9702-443a-b65f-4a612fefa55e | Academic level not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 41, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\classes.py", line 19, in create_class
    return class_crud.create_class(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\classes.py", line 30, in create_class
    new_class = self.factory.create_class(data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\services\student_organization\classes\factory.py", line 58, in create_class
    raise LevelNotFoundError(id = new_class.level_id) #Edge case: the possibility of another relationship error, not related to level_id
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app.services.errors.student_organisation_errors.LevelNotFoundError: Academic level not found!
2025-03-15 01:46:59,196 - kademia - WARNING - EntityNotFoundError | e5afa21a-9702-443a-b65f-4a612fefa55e | Academic level with id:10a2a500-d8c0-434c-b5f0-d11e99018e23 not found
2025-03-15 07:15:51,248 - kademia - INFO - Application started
2025-03-15 07:15:51,248 - kademia - INFO - Application started
2025-03-15 07:16:22,784 - kademia - INFO - Application started
2025-03-15 07:16:22,814 - kademia - INFO - Application started
2025-03-15 07:18:39,493 - kademia - INFO - Application started
2025-03-15 07:18:39,519 - kademia - INFO - Application started
2025-03-15 07:19:06,413 - kademia - INFO - Application started
2025-03-15 07:19:06,416 - kademia - INFO - Application started
2025-03-15 07:22:12,877 - kademia - INFO - Application started
2025-03-15 07:22:12,881 - kademia - INFO - Application started
2025-03-15 07:30:43,366 - kademia - INFO - Application started
2025-03-15 07:30:43,380 - kademia - INFO - Application started
2025-03-15 07:35:03,237 - kademia - INFO - Application started
2025-03-15 07:35:03,238 - kademia - INFO - Application started
2025-03-15 07:35:18,706 - kademia - INFO - Application started
2025-03-15 07:35:18,708 - kademia - INFO - Application started
2025-03-15 07:35:36,794 - kademia - INFO - Application started
2025-03-15 07:35:36,815 - kademia - INFO - Application started
2025-03-15 18:25:53,895 - kademia - INFO - Application started
2025-03-15 18:25:53,897 - kademia - INFO - Application started
