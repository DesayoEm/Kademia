2025-03-19 00:46:14,567 - kademia - INFO - Application started
2025-03-19 00:46:45,839 - kademia - INFO - Request started | a77b5e5c-72cc-4942-aa88-9e15b62b791a | GET /
2025-03-19 00:46:45,841 - kademia - INFO - Request completed | a77b5e5c-72cc-4942-aa88-9e15b62b791a | Status: 200 | Time: 0.001s
2025-03-19 00:46:49,031 - kademia - INFO - Request started | 81102679-5720-42eb-9b55-f03564260e48 | GET /docs
2025-03-19 00:46:49,037 - kademia - INFO - Request completed | 81102679-5720-42eb-9b55-f03564260e48 | Status: 200 | Time: 0.002s
2025-03-19 00:46:49,385 - kademia - INFO - Request started | 6d47e0c6-86ae-4cef-a58a-eb4902f9743e | GET /openapi.json
2025-03-19 00:46:49,555 - kademia - INFO - Request completed | 6d47e0c6-86ae-4cef-a58a-eb4902f9743e | Status: 200 | Time: 0.169s
2025-03-19 00:47:46,176 - kademia - INFO - Application started
2025-03-19 00:47:57,219 - kademia - INFO - Application started
2025-03-19 00:48:02,521 - kademia - INFO - Request started | f67db7b3-3c3a-4602-82a2-9acba2c3ef19 | GET /doc
2025-03-19 00:48:02,523 - kademia - INFO - Request completed | f67db7b3-3c3a-4602-82a2-9acba2c3ef19 | Status: 404 | Time: 0.001s
2025-03-19 00:48:02,657 - kademia - INFO - Request started | 473c1544-b6f3-45a6-916f-42333e1c5045 | GET /favicon.ico
2025-03-19 00:48:02,659 - kademia - INFO - Request completed | 473c1544-b6f3-45a6-916f-42333e1c5045 | Status: 404 | Time: 0.001s
2025-03-19 00:48:05,989 - kademia - INFO - Request started | 40642e5b-e24e-4ca3-b0b6-66aab96cd9b6 | GET /docs
2025-03-19 00:48:05,990 - kademia - INFO - Request completed | 40642e5b-e24e-4ca3-b0b6-66aab96cd9b6 | Status: 200 | Time: 0.001s
2025-03-19 00:48:06,153 - kademia - INFO - Request started | 2e9ea3ae-7285-4f67-8e5e-15923ee3f1dd | GET /openapi.json
2025-03-19 00:48:06,334 - kademia - INFO - Request completed | 2e9ea3ae-7285-4f67-8e5e-15923ee3f1dd | Status: 200 | Time: 0.182s
2025-03-19 00:48:06,878 - kademia - INFO - Request started | 92190cfd-e757-4a4e-8ee8-e2612502fb59 | GET /docs
2025-03-19 00:48:06,896 - kademia - INFO - Request completed | 92190cfd-e757-4a4e-8ee8-e2612502fb59 | Status: 200 | Time: 0.001s
2025-03-19 00:48:07,069 - kademia - INFO - Request started | cacc2dae-1018-49fb-81fa-8a0648649885 | GET /openapi.json
2025-03-19 00:48:07,072 - kademia - INFO - Request completed | cacc2dae-1018-49fb-81fa-8a0648649885 | Status: 200 | Time: 0.002s
2025-03-19 00:49:15,473 - kademia - INFO - Request started | 403aa6f2-9507-43f7-9fc7-3a4abf6a8474 | POST /api/v1/students/departments/
2025-03-19 00:49:15,475 - kademia - INFO - Request completed | 403aa6f2-9507-43f7-9fc7-3a4abf6a8474 | Status: 422 | Time: 0.001s
2025-03-19 00:49:49,778 - kademia - INFO - Request started | c8d6098d-0483-472c-abff-68a478ff5d56 | POST /api/v1/students/departments/
2025-03-19 00:49:49,781 - kademia - INFO - Request completed | c8d6098d-0483-472c-abff-68a478ff5d56 | Status: 422 | Time: 0.002s
2025-03-19 00:50:02,718 - kademia - INFO - Request started | 2cd0b0f6-9c35-47db-99be-bff0d373dfd7 | POST /api/v1/students/departments/
2025-03-19 00:50:02,720 - kademia - INFO - Request completed | 2cd0b0f6-9c35-47db-99be-bff0d373dfd7 | Status: 422 | Time: 0.002s
2025-03-19 00:50:42,863 - kademia - INFO - Application started
2025-03-19 00:50:42,871 - kademia - INFO - Application started
2025-03-19 00:50:42,951 - kademia - INFO - Request started | b99821f9-ca01-4d79-958b-5ca2b7fd01ea | GET /docs
2025-03-19 00:50:42,955 - kademia - INFO - Request completed | b99821f9-ca01-4d79-958b-5ca2b7fd01ea | Status: 200 | Time: 0.002s
2025-03-19 00:50:43,100 - kademia - INFO - Request started | 203afc8e-659f-4597-8f12-17725f74fa7b | GET /openapi.json
2025-03-19 00:50:43,318 - kademia - INFO - Request completed | 203afc8e-659f-4597-8f12-17725f74fa7b | Status: 200 | Time: 0.218s
2025-03-19 00:51:02,867 - kademia - INFO - Request started | e283d97b-4c83-4b7a-bb38-debc1cde32a5 | POST /api/v1/students/departments/
2025-03-19 00:51:03,437 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-19 00:51:03,438 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 00:51:03,441 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-19 00:51:03,442 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 00:51:03,445 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-19 00:51:03,446 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 00:51:03,448 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 00:51:03,458 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING student_departments.created_at, student_departments.last_modified_at
2025-03-19 00:51:03,460 - sqlalchemy.engine.Engine - INFO - [generated in 0.00221s] {'id': UUID('0eda033a-29f2-4706-b0a4-647238eba9a7'), 'name': 'Science', 'description': 'Science Classes', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 00:51:03,467 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 00:51:03,471 - kademia - ERROR - Unhandled exception | e283d97b-4c83-4b7a-bb38-debc1cde32a5 | Duplicate student department creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "student_departments_name_key"
detail:  key (name)=(science) already exists.

[sql: insert into student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(mentor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning student_departments.created_at, student_departments.last_modified_at]
[parameters: {'id': uuid('0eda033a-29f2-4706-b0a4-647238eba9a7'), 'name': 'science', 'description': 'science classes', 'mentor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 22, in create_department
    return student_departments_crud.create_department(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 30, in create_department
    department = self.factory.create_student_department(data)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 48, in create_student_department
    raise DuplicateStudentDepartmentError(
app.core.errors.student_organisation_errors.DuplicateStudentDepartmentError: Duplicate student department creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "student_departments_name_key"
detail:  key (name)=(science) already exists.

[sql: insert into student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(mentor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning student_departments.created_at, student_departments.last_modified_at]
[parameters: {'id': uuid('0eda033a-29f2-4706-b0a4-647238eba9a7'), 'name': 'science', 'description': 'science classes', 'mentor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 00:51:03,513 - kademia - WARNING - UniqueViolationError | e283d97b-4c83-4b7a-bb38-debc1cde32a5 | Duplicate student department creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "student_departments_name_key"
detail:  key (name)=(science) already exists.

[sql: insert into student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(mentor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning student_departments.created_at, student_departments.last_modified_at]
[parameters: {'id': uuid('0eda033a-29f2-4706-b0a4-647238eba9a7'), 'name': 'science', 'description': 'science classes', 'mentor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 00:52:21,041 - kademia - INFO - Application started
2025-03-19 00:52:21,042 - kademia - INFO - Application started
2025-03-19 00:52:26,302 - kademia - INFO - Request started | 3d848c2d-9873-4471-b8f3-af8dff0b6b25 | GET /docs
2025-03-19 00:52:26,305 - kademia - INFO - Request completed | 3d848c2d-9873-4471-b8f3-af8dff0b6b25 | Status: 200 | Time: 0.001s
2025-03-19 00:52:26,448 - kademia - INFO - Request started | 83aa7a07-6d86-4996-bb93-73380b5e7aab | GET /openapi.json
2025-03-19 00:52:26,615 - kademia - INFO - Request completed | 83aa7a07-6d86-4996-bb93-73380b5e7aab | Status: 200 | Time: 0.167s
2025-03-19 00:52:39,209 - kademia - INFO - Request started | de7d6007-e9b4-438f-b4fa-bf43342b6e8a | POST /api/v1/students/departments/
2025-03-19 00:52:39,761 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-19 00:52:39,762 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 00:52:39,765 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-19 00:52:39,766 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 00:52:39,768 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-19 00:52:39,769 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 00:52:39,771 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 00:52:39,779 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING student_departments.created_at, student_departments.last_modified_at
2025-03-19 00:52:39,781 - sqlalchemy.engine.Engine - INFO - [generated in 0.00184s] {'id': UUID('529d310f-d587-403e-b70e-ca4771d7e3c7'), 'name': 'Science', 'description': 'Science Classes', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 00:52:39,787 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 00:52:39,790 - kademia - ERROR - Unhandled exception | de7d6007-e9b4-438f-b4fa-bf43342b6e8a | Duplicate student department creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "student_departments_name_key"
detail:  key (name)=(science) already exists.

[sql: insert into student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(mentor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning student_departments.created_at, student_departments.last_modified_at]
[parameters: {'id': uuid('529d310f-d587-403e-b70e-ca4771d7e3c7'), 'name': 'science', 'description': 'science classes', 'mentor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 22, in create_department
    return student_departments_crud.create_department(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 30, in create_department
    department = self.factory.create_student_department(data)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 44, in create_student_department
    raise DuplicateStudentDepartmentError(
app.core.errors.student_organisation_errors.DuplicateStudentDepartmentError: Duplicate student department creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "student_departments_name_key"
detail:  key (name)=(science) already exists.

[sql: insert into student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(mentor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning student_departments.created_at, student_departments.last_modified_at]
[parameters: {'id': uuid('529d310f-d587-403e-b70e-ca4771d7e3c7'), 'name': 'science', 'description': 'science classes', 'mentor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 00:52:39,816 - kademia - WARNING - UniqueViolationError | de7d6007-e9b4-438f-b4fa-bf43342b6e8a | Duplicate student department creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "student_departments_name_key"
detail:  key (name)=(science) already exists.

[sql: insert into student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(mentor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning student_departments.created_at, student_departments.last_modified_at]
[parameters: {'id': uuid('529d310f-d587-403e-b70e-ca4771d7e3c7'), 'name': 'science', 'description': 'science classes', 'mentor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 00:52:54,292 - kademia - INFO - Request started | 8cbd47fe-12bf-4afd-b3c5-e0fd96c44f51 | POST /api/v1/students/departments/
2025-03-19 00:52:54,296 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 00:52:54,297 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING student_departments.created_at, student_departments.last_modified_at
2025-03-19 00:52:54,298 - sqlalchemy.engine.Engine - INFO - [cached since 14.52s ago] {'id': UUID('e86f156b-c846-4a47-9b84-54037eb609cf'), 'name': 'Science', 'description': 'Sciencetv Classes', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 00:52:54,300 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 00:52:54,303 - kademia - ERROR - Unhandled exception | 8cbd47fe-12bf-4afd-b3c5-e0fd96c44f51 | Duplicate student department creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "student_departments_name_key"
detail:  key (name)=(science) already exists.

[sql: insert into student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(mentor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning student_departments.created_at, student_departments.last_modified_at]
[parameters: {'id': uuid('e86f156b-c846-4a47-9b84-54037eb609cf'), 'name': 'science', 'description': 'sciencetv classes', 'mentor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 22, in create_department
    return student_departments_crud.create_department(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 30, in create_department
    department = self.factory.create_student_department(data)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 44, in create_student_department
    raise DuplicateStudentDepartmentError(
app.core.errors.student_organisation_errors.DuplicateStudentDepartmentError: Duplicate student department creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "student_departments_name_key"
detail:  key (name)=(science) already exists.

[sql: insert into student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(mentor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning student_departments.created_at, student_departments.last_modified_at]
[parameters: {'id': uuid('e86f156b-c846-4a47-9b84-54037eb609cf'), 'name': 'science', 'description': 'sciencetv classes', 'mentor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 00:52:54,316 - kademia - WARNING - UniqueViolationError | 8cbd47fe-12bf-4afd-b3c5-e0fd96c44f51 | Duplicate student department creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "student_departments_name_key"
detail:  key (name)=(science) already exists.

[sql: insert into student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(mentor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning student_departments.created_at, student_departments.last_modified_at]
[parameters: {'id': uuid('e86f156b-c846-4a47-9b84-54037eb609cf'), 'name': 'science', 'description': 'sciencetv classes', 'mentor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 00:53:01,150 - kademia - INFO - Request started | d9975156-8a57-49ee-ae69-8855cb9ecd06 | POST /api/v1/students/departments/
2025-03-19 00:53:01,154 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 00:53:01,155 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING student_departments.created_at, student_departments.last_modified_at
2025-03-19 00:53:01,156 - sqlalchemy.engine.Engine - INFO - [cached since 21.38s ago] {'id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'name': 'Sciennce', 'description': 'Sciencetv Classes', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 00:53:01,169 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 00:53:01,177 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 00:53:01,188 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id, student_departments.name, student_departments.description, student_departments.mentor_id, student_departments.student_rep_id, student_departments.assistant_rep_id, student_departments.created_by, student_departments.last_modified_by, student_departments.created_at, student_departments.last_modified_at, student_departments.is_archived, student_departments.archived_at, student_departments.archive_reason, student_departments.archived_by 
FROM student_departments 
WHERE student_departments.id = %(pk_1)s::UUID
2025-03-19 00:53:01,191 - sqlalchemy.engine.Engine - INFO - [generated in 0.00245s] {'pk_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 00:53:01,201 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 00:53:01,204 - kademia - INFO - Request completed | d9975156-8a57-49ee-ae69-8855cb9ecd06 | Status: 201 | Time: 0.053s
2025-03-19 00:54:33,380 - kademia - INFO - Request started | 691451f3-da8b-4a7f-8e8d-f50f886da952 | GET /api/v1/students/departments/
2025-03-19 00:54:33,385 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 00:54:33,390 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false ORDER BY student_departments.name DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-19 00:54:33,391 - sqlalchemy.engine.Engine - INFO - [generated in 0.00135s] {'param_1': 50, 'param_2': 0}
2025-03-19 00:54:33,397 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 00:54:33,429 - kademia - INFO - Request completed | 691451f3-da8b-4a7f-8e8d-f50f886da952 | Status: 200 | Time: 0.047s
2025-03-19 00:54:52,838 - kademia - INFO - Request started | 0449736b-5fc5-43e0-9b24-cf9c6d67caab | GET /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 00:54:52,841 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 00:54:52,843 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 00:54:52,845 - sqlalchemy.engine.Engine - INFO - [generated in 0.00143s] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 00:54:52,850 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 00:54:52,852 - kademia - INFO - Request completed | 0449736b-5fc5-43e0-9b24-cf9c6d67caab | Status: 200 | Time: 0.014s
2025-03-19 00:55:22,722 - kademia - INFO - Request started | 910a0f61-c43d-4250-821a-799d6edf2b10 | PUT /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 00:55:22,730 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 00:55:22,731 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 00:55:22,732 - sqlalchemy.engine.Engine - INFO - [cached since 29.89s ago] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 00:55:22,738 - sqlalchemy.engine.Engine - INFO - UPDATE student_departments SET description=%(description)s, mentor_id=%(mentor_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID
2025-03-19 00:55:22,739 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] {'description': 'Science Classes', 'mentor_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 00:55:22,753 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 00:55:22,800 - kademia - ERROR - Unhandled exception | 910a0f61-c43d-4250-821a-799d6edf2b10 | 1 validation error for DepartmentResponse
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 44, in update_department
    return student_departments_crud.update_department(department_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 64, in update_department
    return DepartmentResponse.model_validate(updated_department)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for DepartmentResponse
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type
2025-03-19 00:55:22,825 - kademia - ERROR - Unhandled exception | 910a0f61-c43d-4250-821a-799d6edf2b10 | 1 validation error for DepartmentResponse
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 44, in update_department
    return student_departments_crud.update_department(department_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 64, in update_department
    return DepartmentResponse.model_validate(updated_department)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for DepartmentResponse
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type
2025-03-19 00:58:26,486 - kademia - INFO - Application started
2025-03-19 00:58:26,493 - kademia - INFO - Application started
2025-03-19 00:58:31,869 - kademia - INFO - Request started | 56bfebac-13b3-4984-bce3-ba3280eb3587 | GET /docs
2025-03-19 00:58:31,871 - kademia - INFO - Request completed | 56bfebac-13b3-4984-bce3-ba3280eb3587 | Status: 200 | Time: 0.001s
2025-03-19 00:58:32,036 - kademia - INFO - Request started | 381df2f9-498f-47be-a693-9f2c1b1bfd86 | GET /openapi.json
2025-03-19 00:58:32,245 - kademia - INFO - Request completed | 381df2f9-498f-47be-a693-9f2c1b1bfd86 | Status: 200 | Time: 0.209s
2025-03-19 00:59:03,229 - kademia - INFO - Request started | 1679ae8d-02a9-488c-8196-31116ef7cc87 | PUT /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 00:59:03,626 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-19 00:59:03,627 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 00:59:03,629 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-19 00:59:03,629 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 00:59:03,631 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-19 00:59:03,631 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 00:59:03,633 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 00:59:03,638 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 00:59:03,639 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 00:59:03,652 - sqlalchemy.engine.Engine - INFO - UPDATE student_departments SET name=%(name)s, description=%(description)s, mentor_id=%(mentor_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID
2025-03-19 00:59:03,652 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] {'name': 'Science', 'description': 'Science Classes', 'mentor_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 00:59:03,655 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 00:59:03,657 - kademia - ERROR - Unhandled exception | 1679ae8d-02a9-488c-8196-31116ef7cc87 | Duplicate student department creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "student_departments_name_key"
detail:  key (name)=(science) already exists.

[sql: update student_departments set name=%(name)s, description=%(description)s, mentor_id=%(mentor_id)s::uuid, last_modified_at=now() where student_departments.id = %(student_departments_id)s::uuid]
[parameters: {'name': 'science', 'description': 'science classes', 'mentor_id': uuid('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': uuid('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 44, in update_department
    return student_departments_crud.update_department(department_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 63, in update_department
    updated_department = self.factory.update_student_department(department_id, data)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 112, in update_student_department
    raise DuplicateStudentDepartmentError(
app.core.errors.student_organisation_errors.DuplicateStudentDepartmentError: Duplicate student department creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "student_departments_name_key"
detail:  key (name)=(science) already exists.

[sql: update student_departments set name=%(name)s, description=%(description)s, mentor_id=%(mentor_id)s::uuid, last_modified_at=now() where student_departments.id = %(student_departments_id)s::uuid]
[parameters: {'name': 'science', 'description': 'science classes', 'mentor_id': uuid('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': uuid('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 00:59:03,673 - kademia - WARNING - UniqueViolationError | 1679ae8d-02a9-488c-8196-31116ef7cc87 | Duplicate student department creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "student_departments_name_key"
detail:  key (name)=(science) already exists.

[sql: update student_departments set name=%(name)s, description=%(description)s, mentor_id=%(mentor_id)s::uuid, last_modified_at=now() where student_departments.id = %(student_departments_id)s::uuid]
[parameters: {'name': 'science', 'description': 'science classes', 'mentor_id': uuid('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': uuid('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 00:59:19,830 - kademia - INFO - Request started | 59ef82fb-038b-4127-b570-d1718b17463b | PUT /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 00:59:19,834 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 00:59:19,835 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 00:59:19,836 - sqlalchemy.engine.Engine - INFO - [cached since 16.2s ago] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 00:59:19,840 - sqlalchemy.engine.Engine - INFO - UPDATE student_departments SET name=%(name)s, description=%(description)s, mentor_id=%(mentor_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID
2025-03-19 00:59:19,841 - sqlalchemy.engine.Engine - INFO - [cached since 16.19s ago] {'name': 'Scienyiuuce', 'description': 'Science Classes', 'mentor_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 00:59:19,847 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 00:59:19,851 - kademia - ERROR - Unhandled exception | 59ef82fb-038b-4127-b570-d1718b17463b | 1 validation error for DepartmentResponse
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 44, in update_department
    return student_departments_crud.update_department(department_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 64, in update_department
    return DepartmentResponse.model_validate(updated_department)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for DepartmentResponse
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type
2025-03-19 00:59:19,873 - kademia - ERROR - Unhandled exception | 59ef82fb-038b-4127-b570-d1718b17463b | 1 validation error for DepartmentResponse
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 44, in update_department
    return student_departments_crud.update_department(department_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 64, in update_department
    return DepartmentResponse.model_validate(updated_department)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for DepartmentResponse
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_attributes_type
2025-03-19 01:00:37,008 - kademia - INFO - Application started
2025-03-19 01:00:37,012 - kademia - INFO - Application started
2025-03-19 01:00:40,815 - kademia - INFO - Request started | 2961235a-748a-4e0a-b0d7-9feeb42ce39b | GET /docs
2025-03-19 01:00:40,818 - kademia - INFO - Request completed | 2961235a-748a-4e0a-b0d7-9feeb42ce39b | Status: 200 | Time: 0.003s
2025-03-19 01:00:40,964 - kademia - INFO - Request started | 20d5a445-52f0-4ab5-ac22-b336fe7eb248 | GET /openapi.json
2025-03-19 01:00:41,145 - kademia - INFO - Request completed | 20d5a445-52f0-4ab5-ac22-b336fe7eb248 | Status: 200 | Time: 0.181s
2025-03-19 01:01:13,558 - kademia - INFO - Request started | f18c3f87-da91-45a8-b57c-a2a7e21a74ab | PUT /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:01:13,956 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-19 01:01:13,957 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 01:01:13,959 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-19 01:01:13,960 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 01:01:13,961 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-19 01:01:13,962 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 01:01:13,963 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:01:13,970 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:01:13,972 - sqlalchemy.engine.Engine - INFO - [generated in 0.00171s] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:01:13,984 - sqlalchemy.engine.Engine - INFO - UPDATE student_departments SET name=%(name)s, description=%(description)s, mentor_id=%(mentor_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID
2025-03-19 01:01:13,985 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] {'name': 'Scrrtergience', 'description': 'Science Classes', 'mentor_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 01:01:13,990 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:01:13,992 - kademia - ERROR - Unhandled exception | f18c3f87-da91-45a8-b57c-a2a7e21a74ab | Cannot update record because related unknown does not exist
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 44, in update_department
    return student_departments_crud.update_department(department_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 63, in update_department
    updated_department = self.factory.update_student_department(department_id, data)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 126, in update_student_department
    raise RelationshipError(error=str(e), operation='update', entity='unknown')
app.core.errors.database_errors.RelationshipError: Cannot update record because related unknown does not exist
2025-03-19 01:01:14,008 - kademia - WARNING - RelationshipError | f18c3f87-da91-45a8-b57c-a2a7e21a74ab | Foreign key constraint violation during update operation. Detail: Cannot create record because related Unknown does not exist
2025-03-19 01:06:38,941 - kademia - INFO - Application started
2025-03-19 01:06:38,946 - kademia - INFO - Application started
2025-03-19 01:06:58,343 - kademia - INFO - Request started | bdf08766-819a-4a5a-8c5e-f21952e20ffb | GET /docs
2025-03-19 01:06:58,346 - kademia - INFO - Request completed | bdf08766-819a-4a5a-8c5e-f21952e20ffb | Status: 200 | Time: 0.002s
2025-03-19 01:06:58,483 - kademia - INFO - Request started | 6d57fd52-7d32-4fea-aee4-70856a7793b2 | GET /openapi.json
2025-03-19 01:06:58,685 - kademia - INFO - Request completed | 6d57fd52-7d32-4fea-aee4-70856a7793b2 | Status: 200 | Time: 0.202s
2025-03-19 01:07:22,807 - kademia - INFO - Request started | 1fa2d7bd-ed8e-4b85-8b28-3bb5fcad74d9 | PUT /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:07:23,203 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-19 01:07:23,204 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 01:07:23,207 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-19 01:07:23,208 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 01:07:23,209 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-19 01:07:23,210 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 01:07:23,212 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:07:23,219 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:07:23,220 - sqlalchemy.engine.Engine - INFO - [generated in 0.00130s] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:07:23,235 - sqlalchemy.engine.Engine - INFO - UPDATE student_departments SET name=%(name)s, description=%(description)s, mentor_id=%(mentor_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID
2025-03-19 01:07:23,235 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] {'name': 'Sciewd233Ence', 'description': 'Science Classes', 'mentor_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 01:07:23,241 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:07:23,245 - kademia - ERROR - Unhandled exception | 1fa2d7bd-ed8e-4b85-8b28-3bb5fcad74d9 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 44, in update_department
    return student_departments_crud.update_department(department_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 63, in update_department
    updated_department = self.factory.update_student_department(department_id, data)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 126, in update_student_department
    raise RelationshipError(error=str(e), operation='update', entity='unknown')
app.core.errors.database_errors.RelationshipError
2025-03-19 01:07:23,255 - kademia - WARNING - RelationshipError | 1fa2d7bd-ed8e-4b85-8b28-3bb5fcad74d9 | Foreign key constraint violation during update operation. Detail: 
2025-03-19 01:08:17,623 - kademia - INFO - Application started
2025-03-19 01:08:17,624 - kademia - INFO - Application started
2025-03-19 01:08:25,776 - kademia - INFO - Application started
2025-03-19 01:08:25,807 - kademia - INFO - Application started
2025-03-19 01:08:31,968 - kademia - INFO - Request started | 0cfcacfd-46d7-4c52-aa93-6704683205e4 | GET /docs
2025-03-19 01:08:31,972 - kademia - INFO - Request completed | 0cfcacfd-46d7-4c52-aa93-6704683205e4 | Status: 200 | Time: 0.002s
2025-03-19 01:08:32,116 - kademia - INFO - Request started | b0bef809-63c7-4ec1-af7e-d4ea4ec05bde | GET /openapi.json
2025-03-19 01:08:32,348 - kademia - INFO - Request completed | b0bef809-63c7-4ec1-af7e-d4ea4ec05bde | Status: 200 | Time: 0.232s
2025-03-19 01:09:39,792 - kademia - INFO - Request started | ea57b32e-9f53-44aa-aceb-569572db2230 | PUT /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:09:40,153 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-19 01:09:40,153 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 01:09:40,155 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-19 01:09:40,156 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 01:09:40,157 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-19 01:09:40,158 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 01:09:40,159 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:09:40,167 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:09:40,168 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:09:40,177 - sqlalchemy.engine.Engine - INFO - UPDATE student_departments SET name=%(name)s, description=%(description)s, mentor_id=%(mentor_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID
2025-03-19 01:09:40,178 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] {'name': 'Science', 'description': 'Science Classes', 'mentor_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 01:09:40,182 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:09:40,184 - kademia - ERROR - Unhandled exception | ea57b32e-9f53-44aa-aceb-569572db2230 | Duplicate student department creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "student_departments_name_key"
detail:  key (name)=(science) already exists.

[sql: update student_departments set name=%(name)s, description=%(description)s, mentor_id=%(mentor_id)s::uuid, last_modified_at=now() where student_departments.id = %(student_departments_id)s::uuid]
[parameters: {'name': 'science', 'description': 'science classes', 'mentor_id': uuid('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': uuid('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 44, in update_department
    return student_departments_crud.update_department(department_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 63, in update_department
    updated_department = self.factory.update_student_department(department_id, data)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 112, in update_student_department
    raise DuplicateStudentDepartmentError(
app.core.errors.student_organisation_errors.DuplicateStudentDepartmentError: Duplicate student department creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "student_departments_name_key"
detail:  key (name)=(science) already exists.

[sql: update student_departments set name=%(name)s, description=%(description)s, mentor_id=%(mentor_id)s::uuid, last_modified_at=now() where student_departments.id = %(student_departments_id)s::uuid]
[parameters: {'name': 'science', 'description': 'science classes', 'mentor_id': uuid('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': uuid('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:09:40,198 - kademia - WARNING - UniqueViolationError | ea57b32e-9f53-44aa-aceb-569572db2230 | Duplicate student department creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "student_departments_name_key"
detail:  key (name)=(science) already exists.

[sql: update student_departments set name=%(name)s, description=%(description)s, mentor_id=%(mentor_id)s::uuid, last_modified_at=now() where student_departments.id = %(student_departments_id)s::uuid]
[parameters: {'name': 'science', 'description': 'science classes', 'mentor_id': uuid('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': uuid('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:10:05,796 - kademia - INFO - Request started | 40af0570-e8f3-40aa-8d75-d42debc0824b | PUT /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:10:05,798 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:10:05,801 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:10:05,802 - sqlalchemy.engine.Engine - INFO - [cached since 25.63s ago] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:10:05,806 - sqlalchemy.engine.Engine - INFO - UPDATE student_departments SET name=%(name)s, description=%(description)s, mentor_id=%(mentor_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID
2025-03-19 01:10:05,808 - sqlalchemy.engine.Engine - INFO - [cached since 25.63s ago] {'name': 'Scieeaergnce', 'description': 'Science Classes', 'mentor_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 01:10:05,812 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:10:05,850 - kademia - ERROR - Unhandled exception | 40af0570-e8f3-40aa-8d75-d42debc0824b | Error during during fk insertion of Educator with id:c8d6098d-0483-472c-abff-68a478ff5d56 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "student_departments" violates foreign key constraint "fk_student_departments_educators_mentor_id"
DETAIL:  Key (mentor_id)=(c8d6098d-0483-472c-abff-68a478ff5d56) is not present in table "educators".

[SQL: UPDATE student_departments SET name=%(name)s, description=%(description)s, mentor_id=%(mentor_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID]
[parameters: {'name': 'Scieeaergnce', 'description': 'Science Classes', 'mentor_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 44, in update_department
    return student_departments_crud.update_department(department_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 63, in update_department
    updated_department = self.factory.update_student_department(department_id, data)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 125, in update_student_department
    raise error_class(id=entity_id, detail=str(e), action='update')
app.core.errors.profile_errors.RelatedEducatorNotFoundError: Error during during fk insertion of Educator with id:c8d6098d-0483-472c-abff-68a478ff5d56 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "student_departments" violates foreign key constraint "fk_student_departments_educators_mentor_id"
DETAIL:  Key (mentor_id)=(c8d6098d-0483-472c-abff-68a478ff5d56) is not present in table "educators".

[SQL: UPDATE student_departments SET name=%(name)s, description=%(description)s, mentor_id=%(mentor_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID]
[parameters: {'name': 'Scieeaergnce', 'description': 'Science Classes', 'mentor_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:10:05,887 - kademia - WARNING - RelationshipError | 40af0570-e8f3-40aa-8d75-d42debc0824b | Error during during fk insertion of Educator with id:c8d6098d-0483-472c-abff-68a478ff5d56 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "student_departments" violates foreign key constraint "fk_student_departments_educators_mentor_id"
DETAIL:  Key (mentor_id)=(c8d6098d-0483-472c-abff-68a478ff5d56) is not present in table "educators".

[SQL: UPDATE student_departments SET name=%(name)s, description=%(description)s, mentor_id=%(mentor_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID]
[parameters: {'name': 'Scieeaergnce', 'description': 'Science Classes', 'mentor_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:13:58,053 - kademia - INFO - Application started
2025-03-19 01:13:58,057 - kademia - INFO - Application started
2025-03-19 01:16:19,622 - kademia - INFO - Request started | b3d84e29-0359-418d-997f-4343735ed462 | PUT /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:16:20,175 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-19 01:16:20,176 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 01:16:20,181 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-19 01:16:20,183 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 01:16:20,185 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-19 01:16:20,186 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 01:16:20,190 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:16:20,201 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:16:20,203 - sqlalchemy.engine.Engine - INFO - [generated in 0.00187s] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:16:20,217 - sqlalchemy.engine.Engine - INFO - UPDATE student_departments SET name=%(name)s, description=%(description)s, student_rep_id=%(student_rep_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID
2025-03-19 01:16:20,218 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] {'name': 'Scieeaergnce', 'description': 'Science Classes', 'student_rep_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 01:16:20,239 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:16:20,243 - kademia - ERROR - Unhandled exception | b3d84e29-0359-418d-997f-4343735ed462 | Error during during fk insertion of Staff with id:c8d6098d-0483-472c-abff-68a478ff5d56 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "student_departments" violates foreign key constraint "fk_student_departments_students_student_rep"
DETAIL:  Key (student_rep_id)=(c8d6098d-0483-472c-abff-68a478ff5d56) is not present in table "students".

[SQL: UPDATE student_departments SET name=%(name)s, description=%(description)s, student_rep_id=%(student_rep_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID]
[parameters: {'name': 'Scieeaergnce', 'description': 'Science Classes', 'student_rep_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 44, in update_department
    return student_departments_crud.update_department(department_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 63, in update_department
    updated_department = self.factory.update_student_department(department_id, data)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 125, in update_student_department
    raise error_class(id=entity_id, detail=str(e), action='update')
app.core.errors.profile_errors.RelatedStudentNotFoundError: Error during during fk insertion of Staff with id:c8d6098d-0483-472c-abff-68a478ff5d56 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "student_departments" violates foreign key constraint "fk_student_departments_students_student_rep"
DETAIL:  Key (student_rep_id)=(c8d6098d-0483-472c-abff-68a478ff5d56) is not present in table "students".

[SQL: UPDATE student_departments SET name=%(name)s, description=%(description)s, student_rep_id=%(student_rep_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID]
[parameters: {'name': 'Scieeaergnce', 'description': 'Science Classes', 'student_rep_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:16:20,282 - kademia - WARNING - RelationshipError | b3d84e29-0359-418d-997f-4343735ed462 | Error during during fk insertion of Staff with id:c8d6098d-0483-472c-abff-68a478ff5d56 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "student_departments" violates foreign key constraint "fk_student_departments_students_student_rep"
DETAIL:  Key (student_rep_id)=(c8d6098d-0483-472c-abff-68a478ff5d56) is not present in table "students".

[SQL: UPDATE student_departments SET name=%(name)s, description=%(description)s, student_rep_id=%(student_rep_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID]
[parameters: {'name': 'Scieeaergnce', 'description': 'Science Classes', 'student_rep_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:17:14,847 - kademia - INFO - Application started
2025-03-19 01:17:14,849 - kademia - INFO - Application started
2025-03-19 01:17:16,059 - kademia - INFO - Request started | 5e91ab33-ad4f-44d6-850d-6bc99aaa364c | GET /docs
2025-03-19 01:17:16,061 - kademia - INFO - Request completed | 5e91ab33-ad4f-44d6-850d-6bc99aaa364c | Status: 200 | Time: 0.000s
2025-03-19 01:17:16,253 - kademia - INFO - Request started | f89aafe4-3aec-4914-9129-6a75a0c734ad | GET /openapi.json
2025-03-19 01:17:16,558 - kademia - INFO - Request completed | f89aafe4-3aec-4914-9129-6a75a0c734ad | Status: 200 | Time: 0.304s
2025-03-19 01:18:13,270 - kademia - INFO - Request started | 93af3f8c-a301-4157-a5d2-0f8d745d4c78 | PUT /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:18:13,707 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-19 01:18:13,709 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 01:18:13,711 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-19 01:18:13,712 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 01:18:13,713 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-19 01:18:13,713 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 01:18:13,716 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:18:13,722 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:18:13,723 - sqlalchemy.engine.Engine - INFO - [generated in 0.00145s] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:18:13,732 - sqlalchemy.engine.Engine - INFO - UPDATE student_departments SET name=%(name)s, description=%(description)s, student_rep_id=%(student_rep_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID
2025-03-19 01:18:13,733 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] {'name': 'Scierthrthnce', 'description': 'Science Classes', 'student_rep_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 01:18:13,744 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:18:13,746 - kademia - ERROR - Unhandled exception | 93af3f8c-a301-4157-a5d2-0f8d745d4c78 | Error during during fk insertion of student with id:c8d6098d-0483-472c-abff-68a478ff5d56 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "student_departments" violates foreign key constraint "fk_student_departments_students_student_rep"
DETAIL:  Key (student_rep_id)=(c8d6098d-0483-472c-abff-68a478ff5d56) is not present in table "students".

[SQL: UPDATE student_departments SET name=%(name)s, description=%(description)s, student_rep_id=%(student_rep_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID]
[parameters: {'name': 'Scierthrthnce', 'description': 'Science Classes', 'student_rep_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 44, in update_department
    return student_departments_crud.update_department(department_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 63, in update_department
    updated_department = self.factory.update_student_department(department_id, data)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 125, in update_student_department
    raise error_class(id=entity_id, detail=str(e), action='update')
app.core.errors.profile_errors.RelatedStudentNotFoundError: Error during during fk insertion of student with id:c8d6098d-0483-472c-abff-68a478ff5d56 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "student_departments" violates foreign key constraint "fk_student_departments_students_student_rep"
DETAIL:  Key (student_rep_id)=(c8d6098d-0483-472c-abff-68a478ff5d56) is not present in table "students".

[SQL: UPDATE student_departments SET name=%(name)s, description=%(description)s, student_rep_id=%(student_rep_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID]
[parameters: {'name': 'Scierthrthnce', 'description': 'Science Classes', 'student_rep_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:18:13,759 - kademia - WARNING - RelationshipError | 93af3f8c-a301-4157-a5d2-0f8d745d4c78 | Error during during fk insertion of student with id:c8d6098d-0483-472c-abff-68a478ff5d56 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "student_departments" violates foreign key constraint "fk_student_departments_students_student_rep"
DETAIL:  Key (student_rep_id)=(c8d6098d-0483-472c-abff-68a478ff5d56) is not present in table "students".

[SQL: UPDATE student_departments SET name=%(name)s, description=%(description)s, student_rep_id=%(student_rep_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID]
[parameters: {'name': 'Scierthrthnce', 'description': 'Science Classes', 'student_rep_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:18:32,610 - kademia - INFO - Request started | 13bef349-efc0-4286-85fa-8094b0976c50 | PUT /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:18:32,615 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:18:32,619 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:18:32,620 - sqlalchemy.engine.Engine - INFO - [cached since 18.9s ago] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:18:32,626 - sqlalchemy.engine.Engine - INFO - UPDATE student_departments SET name=%(name)s, description=%(description)s, assistant_rep_id=%(assistant_rep_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID
2025-03-19 01:18:32,627 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] {'name': 'Scierthrthnce', 'description': 'Science Classes', 'assistant_rep_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 01:18:32,630 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:18:32,634 - kademia - ERROR - Unhandled exception | 13bef349-efc0-4286-85fa-8094b0976c50 | Error during during fk insertion of student with id:c8d6098d-0483-472c-abff-68a478ff5d56 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "student_departments" violates foreign key constraint "fk_student_departments_students_assistant_rep"
DETAIL:  Key (assistant_rep_id)=(c8d6098d-0483-472c-abff-68a478ff5d56) is not present in table "students".

[SQL: UPDATE student_departments SET name=%(name)s, description=%(description)s, assistant_rep_id=%(assistant_rep_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID]
[parameters: {'name': 'Scierthrthnce', 'description': 'Science Classes', 'assistant_rep_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 44, in update_department
    return student_departments_crud.update_department(department_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 63, in update_department
    updated_department = self.factory.update_student_department(department_id, data)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 125, in update_student_department
    raise error_class(id=entity_id, detail=str(e), action='update')
app.core.errors.profile_errors.RelatedStudentNotFoundError: Error during during fk insertion of student with id:c8d6098d-0483-472c-abff-68a478ff5d56 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "student_departments" violates foreign key constraint "fk_student_departments_students_assistant_rep"
DETAIL:  Key (assistant_rep_id)=(c8d6098d-0483-472c-abff-68a478ff5d56) is not present in table "students".

[SQL: UPDATE student_departments SET name=%(name)s, description=%(description)s, assistant_rep_id=%(assistant_rep_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID]
[parameters: {'name': 'Scierthrthnce', 'description': 'Science Classes', 'assistant_rep_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:18:32,693 - kademia - WARNING - RelationshipError | 13bef349-efc0-4286-85fa-8094b0976c50 | Error during during fk insertion of student with id:c8d6098d-0483-472c-abff-68a478ff5d56 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "student_departments" violates foreign key constraint "fk_student_departments_students_assistant_rep"
DETAIL:  Key (assistant_rep_id)=(c8d6098d-0483-472c-abff-68a478ff5d56) is not present in table "students".

[SQL: UPDATE student_departments SET name=%(name)s, description=%(description)s, assistant_rep_id=%(assistant_rep_id)s::UUID, last_modified_at=now() WHERE student_departments.id = %(student_departments_id)s::UUID]
[parameters: {'name': 'Scierthrthnce', 'description': 'Science Classes', 'assistant_rep_id': UUID('c8d6098d-0483-472c-abff-68a478ff5d56'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:21:01,230 - kademia - INFO - Request started | 80e00e0b-6f78-4166-a855-bcbf4e30ab47 | PATCH /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:21:01,237 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:21:01,238 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:21:01,239 - sqlalchemy.engine.Engine - INFO - [cached since 167.5s ago] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:21:01,244 - sqlalchemy.engine.Engine - INFO - UPDATE student_departments SET last_modified_at=now(), is_archived=%(is_archived)s, archived_at=%(archived_at)s, archive_reason=%(archive_reason)s, archived_by=%(archived_by)s::UUID WHERE student_departments.id = %(student_departments_id)s::UUID
2025-03-19 01:21:01,245 - sqlalchemy.engine.Engine - INFO - [generated in 0.00138s] {'is_archived': True, 'archived_at': datetime.datetime(2025, 3, 19, 1, 21, 1, 242743, tzinfo=datetime.timezone.utc), 'archive_reason': 'ERROR', 'archived_by': UUID('00000000-0000-0000-0000-000000000000'), 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 01:21:01,265 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 01:21:01,271 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:21:01,275 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id, student_departments.name, student_departments.description, student_departments.mentor_id, student_departments.student_rep_id, student_departments.assistant_rep_id, student_departments.created_by, student_departments.last_modified_by, student_departments.created_at, student_departments.last_modified_at, student_departments.is_archived, student_departments.archived_at, student_departments.archive_reason, student_departments.archived_by 
FROM student_departments 
WHERE student_departments.id = %(pk_1)s::UUID
2025-03-19 01:21:01,276 - sqlalchemy.engine.Engine - INFO - [generated in 0.00132s] {'pk_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 01:21:01,284 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:21:01,285 - kademia - INFO - Request completed | 80e00e0b-6f78-4166-a855-bcbf4e30ab47 | Status: 204 | Time: 0.054s
2025-03-19 01:21:26,421 - kademia - INFO - Request started | 3db51239-e257-4cef-a08d-db16ee71d050 | GET /api/v1/students/departments/
2025-03-19 01:21:26,425 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:21:26,427 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false ORDER BY student_departments.name DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-19 01:21:26,428 - sqlalchemy.engine.Engine - INFO - [generated in 0.00132s] {'param_1': 50, 'param_2': 0}
2025-03-19 01:21:26,433 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:21:26,436 - kademia - INFO - Request completed | 3db51239-e257-4cef-a08d-db16ee71d050 | Status: 200 | Time: 0.014s
2025-03-19 01:22:23,579 - kademia - INFO - Request started | 0f5180b1-2524-4d99-b511-af8219ce5feb | GET /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:22:23,581 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:22:23,583 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:22:23,583 - sqlalchemy.engine.Engine - INFO - [cached since 249.9s ago] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:22:23,585 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:22:23,587 - kademia - ERROR - Unhandled exception | 0f5180b1-2524-4d99-b511-af8219ce5feb | Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: Record not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 36, in get_department
    return student_departments_crud.get_department(department_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 41, in get_department
    department = self.factory.get_student_department(department_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 77, in get_student_department
    raise StudentDepartmentNotFoundError(id=department_id, detail=str(e))
app.core.errors.student_organisation_errors.StudentDepartmentNotFoundError: Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: Record not found
2025-03-19 01:22:23,590 - kademia - WARNING - EntityNotFoundError | 0f5180b1-2524-4d99-b511-af8219ce5feb | Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: Record not found
2025-03-19 01:22:38,232 - kademia - INFO - Request started | 357eb07b-80f7-433b-b55f-0a4ce1e4e0ad | PUT /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:22:38,234 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:22:38,235 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:22:38,235 - sqlalchemy.engine.Engine - INFO - [cached since 264.5s ago] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:22:38,237 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:22:38,238 - kademia - ERROR - Unhandled exception | 357eb07b-80f7-433b-b55f-0a4ce1e4e0ad | Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: Record not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 44, in update_department
    return student_departments_crud.update_department(department_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 63, in update_department
    updated_department = self.factory.update_student_department(department_id, data)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 110, in update_student_department
    raise StudentDepartmentNotFoundError(id=department_id, detail=str(e))
app.core.errors.student_organisation_errors.StudentDepartmentNotFoundError: Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: Record not found
2025-03-19 01:22:38,243 - kademia - WARNING - EntityNotFoundError | 357eb07b-80f7-433b-b55f-0a4ce1e4e0ad | Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: Record not found
2025-03-19 01:22:53,532 - kademia - INFO - Request started | b8d4278f-49d8-4cdf-a9bd-1ff68baf212c | PATCH /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:22:53,535 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:22:53,536 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:22:53,537 - sqlalchemy.engine.Engine - INFO - [cached since 279.8s ago] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:22:53,539 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:22:53,541 - kademia - ERROR - Unhandled exception | b8d4278f-49d8-4cdf-a9bd-1ff68baf212c | Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: object not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 51, in archive_department
    return student_departments_crud.archive_department(department_id, reason.reason)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 74, in archive_department
    self.factory.archive_department(department_id, reason)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 140, in archive_department
    raise StudentDepartmentNotFoundError(id=department_id, detail=str(e))
app.core.errors.student_organisation_errors.StudentDepartmentNotFoundError: Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: object not found
2025-03-19 01:22:53,546 - kademia - WARNING - EntityNotFoundError | b8d4278f-49d8-4cdf-a9bd-1ff68baf212c | Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: object not found
2025-03-19 01:23:03,062 - kademia - INFO - Request started | 316b3308-b642-45b6-990f-194fdb455db3 | DELETE /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:23:03,065 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:23:03,065 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:23:03,066 - sqlalchemy.engine.Engine - INFO - [cached since 289.3s ago] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:23:03,068 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:23:03,070 - kademia - ERROR - Unhandled exception | 316b3308-b642-45b6-990f-194fdb455db3 | Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: object not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\student_departments.py", line 57, in delete_department
    return student_departments_crud.delete_department(department_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 82, in delete_department
    self.factory.delete_department(department_id)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 150, in delete_department
    raise StudentDepartmentNotFoundError(id=department_id, detail=str(e))
app.core.errors.student_organisation_errors.StudentDepartmentNotFoundError: Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: object not found
2025-03-19 01:23:03,076 - kademia - WARNING - EntityNotFoundError | 316b3308-b642-45b6-990f-194fdb455db3 | Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: object not found
2025-03-19 01:23:12,120 - kademia - INFO - Request started | d3ef5efd-0bd0-466a-8f0c-893d9e6dfcd2 | GET /api/v1/archive/students/departments/
2025-03-19 01:23:12,122 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:23:12,124 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = true ORDER BY student_departments.name DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-19 01:23:12,125 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] {'param_1': 50, 'param_2': 0}
2025-03-19 01:23:12,127 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:23:12,129 - kademia - INFO - Request completed | d3ef5efd-0bd0-466a-8f0c-893d9e6dfcd2 | Status: 200 | Time: 0.009s
2025-03-19 01:23:22,430 - kademia - INFO - Request started | a95f5df3-511f-43ba-a31c-8f6a81fd0c9b | GET /api/v1/archive/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:23:22,431 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:23:22,433 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = true AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:23:22,433 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:23:22,436 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:23:22,436 - kademia - INFO - Request completed | a95f5df3-511f-43ba-a31c-8f6a81fd0c9b | Status: 200 | Time: 0.006s
2025-03-19 01:23:31,729 - kademia - INFO - Request started | 03720a11-d55e-4e9f-9f97-e36d9e98656a | PATCH /api/v1/archive/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:23:31,731 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:23:31,731 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = true AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:23:31,732 - sqlalchemy.engine.Engine - INFO - [cached since 9.299s ago] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:23:31,734 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = true AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:23:31,735 - sqlalchemy.engine.Engine - INFO - [cached since 9.302s ago] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:23:31,737 - sqlalchemy.engine.Engine - INFO - UPDATE student_departments SET last_modified_at=now(), is_archived=%(is_archived)s WHERE student_departments.id = %(student_departments_id)s::UUID
2025-03-19 01:23:31,737 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] {'is_archived': False, 'student_departments_id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 01:23:31,739 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 01:23:31,742 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:23:31,744 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.id = %(pk_1)s::UUID
2025-03-19 01:23:31,745 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] {'pk_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 01:23:31,749 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:23:31,750 - kademia - INFO - Request completed | 03720a11-d55e-4e9f-9f97-e36d9e98656a | Status: 200 | Time: 0.021s
2025-03-19 01:23:39,249 - kademia - INFO - Request started | 43135152-3553-4110-925f-0e3ff2da38e9 | GET /api/v1/archive/students/departments/
2025-03-19 01:23:39,251 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:23:39,252 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = true ORDER BY student_departments.name DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-19 01:23:39,252 - sqlalchemy.engine.Engine - INFO - [cached since 27.13s ago] {'param_1': 50, 'param_2': 0}
2025-03-19 01:23:39,254 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:23:39,255 - kademia - INFO - Request completed | 43135152-3553-4110-925f-0e3ff2da38e9 | Status: 200 | Time: 0.006s
2025-03-19 01:23:44,815 - kademia - INFO - Request started | 75c524e6-a910-4cfe-ad66-9a0cc0d9abd8 | GET /api/v1/archive/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:23:44,816 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:23:44,818 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = true AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:23:44,818 - sqlalchemy.engine.Engine - INFO - [cached since 22.39s ago] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:23:44,820 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:23:44,822 - kademia - ERROR - Unhandled exception | 75c524e6-a910-4cfe-ad66-9a0cc0d9abd8 | Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: object not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\archived_student_departments.py", line 27, in get_archived_department
    return student_departments_crud.get_archived_department(department_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 93, in get_archived_department
    department = self.factory.get_archived_department(department_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 172, in get_archived_department
    raise StudentDepartmentNotFoundError(id=department_id, detail=str(e))
app.core.errors.student_organisation_errors.StudentDepartmentNotFoundError: Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: object not found
2025-03-19 01:23:44,835 - kademia - WARNING - EntityNotFoundError | 75c524e6-a910-4cfe-ad66-9a0cc0d9abd8 | Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: object not found
2025-03-19 01:23:50,423 - kademia - INFO - Request started | 62a8bf33-145a-424e-aa1d-8e272204a775 | PATCH /api/v1/archive/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:23:50,425 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:23:50,426 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = true AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:23:50,427 - sqlalchemy.engine.Engine - INFO - [cached since 27.99s ago] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:23:50,429 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:23:50,430 - kademia - ERROR - Unhandled exception | 62a8bf33-145a-424e-aa1d-8e272204a775 | Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: object not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\archived_student_departments.py", line 33, in restore_department
    return student_departments_crud.restore_department(department_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\student_departments.py", line 113, in restore_department
    department = self.factory.restore_department(department_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\department.py", line 186, in restore_department
    raise StudentDepartmentNotFoundError(id=department_id, detail=str(e))
app.core.errors.student_organisation_errors.StudentDepartmentNotFoundError: Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: object not found
2025-03-19 01:23:50,450 - kademia - WARNING - EntityNotFoundError | 62a8bf33-145a-424e-aa1d-8e272204a775 | Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: Department with id:cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: StudentDepartments not with id cdb909cf-4d27-4105-8f18-5b9a5f3b0070 not found. DETAIL: object not found
2025-03-19 01:24:00,866 - kademia - INFO - Request started | ba9ba3cb-947d-4ec5-ae3f-23db3b351109 | GET /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:24:00,868 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:24:00,869 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:24:00,870 - sqlalchemy.engine.Engine - INFO - [cached since 347.1s ago] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:24:00,872 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:24:00,873 - kademia - INFO - Request completed | ba9ba3cb-947d-4ec5-ae3f-23db3b351109 | Status: 200 | Time: 0.006s
2025-03-19 01:24:07,127 - kademia - INFO - Request started | f60d13aa-55cb-4932-afbb-821a58c0c741 | DELETE /api/v1/students/departments/cdb909cf-4d27-4105-8f18-5b9a5f3b0070
2025-03-19 01:24:07,129 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:24:07,130 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:24:07,131 - sqlalchemy.engine.Engine - INFO - [cached since 353.4s ago] {'id_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070'), 'param_1': 1}
2025-03-19 01:24:07,137 - sqlalchemy.engine.Engine - INFO - SELECT students.student_id AS students_student_id, students.user_type AS students_user_type, students.access_level AS students_access_level, students.status AS students_status, students.date_of_birth AS students_date_of_birth, students.image_url AS students_image_url, students.class_id AS students_class_id, students.level_id AS students_level_id, students.department_id AS students_department_id, students.guardian_id AS students_guardian_id, students.is_repeating AS students_is_repeating, students.admission_date AS students_admission_date, students.date_left AS students_date_left, students.graduation_date AS students_graduation_date, students.id AS students_id, students.password_hash AS students_password_hash, students.first_name AS students_first_name, students.last_name AS students_last_name, students.gender AS students_gender, students.last_login AS students_last_login, students.deletion_eligible AS students_deletion_eligible, students.created_by AS students_created_by, students.last_modified_by AS students_last_modified_by, students.created_at AS students_created_at, students.last_modified_at AS students_last_modified_at, students.is_archived AS students_is_archived, students.archived_at AS students_archived_at, students.archive_reason AS students_archive_reason, students.archived_by AS students_archived_by 
FROM students 
WHERE %(param_1)s::UUID = students.department_id
2025-03-19 01:24:07,139 - sqlalchemy.engine.Engine - INFO - [generated in 0.00127s] {'param_1': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 01:24:07,148 - sqlalchemy.engine.Engine - INFO - DELETE FROM student_departments WHERE student_departments.id = %(id)s::UUID
2025-03-19 01:24:07,149 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] {'id': UUID('cdb909cf-4d27-4105-8f18-5b9a5f3b0070')}
2025-03-19 01:24:07,164 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 01:24:07,165 - kademia - INFO - Request completed | f60d13aa-55cb-4932-afbb-821a58c0c741 | Status: 204 | Time: 0.038s
2025-03-19 01:24:38,898 - kademia - INFO - Request started | 55323d7c-2252-419e-ae84-622e06a32db2 | PATCH /api/v1/students/departments/4f9a41d7-391e-444b-9ebe-fac76d49b550
2025-03-19 01:24:38,901 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:24:38,902 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:24:38,902 - sqlalchemy.engine.Engine - INFO - [cached since 385.2s ago] {'id_1': UUID('4f9a41d7-391e-444b-9ebe-fac76d49b550'), 'param_1': 1}
2025-03-19 01:24:38,903 - sqlalchemy.engine.Engine - INFO - UPDATE student_departments SET last_modified_at=now(), is_archived=%(is_archived)s, archived_at=%(archived_at)s, archive_reason=%(archive_reason)s, archived_by=%(archived_by)s::UUID WHERE student_departments.id = %(student_departments_id)s::UUID
2025-03-19 01:24:38,905 - sqlalchemy.engine.Engine - INFO - [cached since 217.7s ago] {'is_archived': True, 'archived_at': datetime.datetime(2025, 3, 19, 1, 24, 38, 903708, tzinfo=datetime.timezone.utc), 'archive_reason': 'ERROR', 'archived_by': UUID('00000000-0000-0000-0000-000000000000'), 'student_departments_id': UUID('4f9a41d7-391e-444b-9ebe-fac76d49b550')}
2025-03-19 01:24:38,907 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 01:24:38,912 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:24:38,912 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id, student_departments.name, student_departments.description, student_departments.mentor_id, student_departments.student_rep_id, student_departments.assistant_rep_id, student_departments.created_by, student_departments.last_modified_by, student_departments.created_at, student_departments.last_modified_at, student_departments.is_archived, student_departments.archived_at, student_departments.archive_reason, student_departments.archived_by 
FROM student_departments 
WHERE student_departments.id = %(pk_1)s::UUID
2025-03-19 01:24:38,947 - sqlalchemy.engine.Engine - INFO - [cached since 217.7s ago] {'pk_1': UUID('4f9a41d7-391e-444b-9ebe-fac76d49b550')}
2025-03-19 01:24:38,949 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:24:38,950 - kademia - INFO - Request completed | 55323d7c-2252-419e-ae84-622e06a32db2 | Status: 204 | Time: 0.052s
2025-03-19 01:24:51,718 - kademia - INFO - Request started | c0ed4ab3-510e-4a71-a335-d8ff4d763cbf | DELETE /api/v1/archive/students/departments/4f9a41d7-391e-444b-9ebe-fac76d49b550
2025-03-19 01:24:51,721 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:24:51,721 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = true AND student_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:24:51,722 - sqlalchemy.engine.Engine - INFO - [cached since 89.29s ago] {'id_1': UUID('4f9a41d7-391e-444b-9ebe-fac76d49b550'), 'param_1': 1}
2025-03-19 01:24:51,723 - sqlalchemy.engine.Engine - INFO - SELECT students.student_id AS students_student_id, students.user_type AS students_user_type, students.access_level AS students_access_level, students.status AS students_status, students.date_of_birth AS students_date_of_birth, students.image_url AS students_image_url, students.class_id AS students_class_id, students.level_id AS students_level_id, students.department_id AS students_department_id, students.guardian_id AS students_guardian_id, students.is_repeating AS students_is_repeating, students.admission_date AS students_admission_date, students.date_left AS students_date_left, students.graduation_date AS students_graduation_date, students.id AS students_id, students.password_hash AS students_password_hash, students.first_name AS students_first_name, students.last_name AS students_last_name, students.gender AS students_gender, students.last_login AS students_last_login, students.deletion_eligible AS students_deletion_eligible, students.created_by AS students_created_by, students.last_modified_by AS students_last_modified_by, students.created_at AS students_created_at, students.last_modified_at AS students_last_modified_at, students.is_archived AS students_is_archived, students.archived_at AS students_archived_at, students.archive_reason AS students_archive_reason, students.archived_by AS students_archived_by 
FROM students 
WHERE %(param_1)s::UUID = students.department_id
2025-03-19 01:24:51,725 - sqlalchemy.engine.Engine - INFO - [cached since 44.59s ago] {'param_1': UUID('4f9a41d7-391e-444b-9ebe-fac76d49b550')}
2025-03-19 01:24:51,727 - sqlalchemy.engine.Engine - INFO - DELETE FROM student_departments WHERE student_departments.id = %(id)s::UUID
2025-03-19 01:24:51,728 - sqlalchemy.engine.Engine - INFO - [cached since 44.58s ago] {'id': UUID('4f9a41d7-391e-444b-9ebe-fac76d49b550')}
2025-03-19 01:24:51,729 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 01:24:51,732 - kademia - INFO - Request completed | c0ed4ab3-510e-4a71-a335-d8ff4d763cbf | Status: 204 | Time: 0.014s
2025-03-19 01:25:42,097 - kademia - INFO - Request started | 530e8792-ecec-4a87-9ea8-d37147bc81cb | POST /api/v1/students/academic_levels/
2025-03-19 01:25:42,101 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:25:42,104 - sqlalchemy.engine.Engine - INFO - INSERT INTO academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING academic_levels.created_at, academic_levels.last_modified_at
2025-03-19 01:25:42,104 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] {'id': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443'), 'name': 'Jss1', 'description': 'First Level In The Secondary School System', 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 01:25:42,117 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 01:25:42,121 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:25:42,122 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-19 01:25:42,123 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] {'pk_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443')}
2025-03-19 01:25:42,124 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:25:42,125 - kademia - INFO - Request completed | 530e8792-ecec-4a87-9ea8-d37147bc81cb | Status: 201 | Time: 0.028s
2025-03-19 01:25:45,733 - kademia - INFO - Request started | b119b389-cc54-410f-80ec-a777abcf35bc | POST /api/v1/students/academic_levels/
2025-03-19 01:25:45,734 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:25:45,736 - sqlalchemy.engine.Engine - INFO - INSERT INTO academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING academic_levels.created_at, academic_levels.last_modified_at
2025-03-19 01:25:45,737 - sqlalchemy.engine.Engine - INFO - [cached since 3.633s ago] {'id': UUID('de44be43-e5e4-473b-b3b2-bd3e7bd29c08'), 'name': 'Jss1', 'description': 'First Level In The Secondary School System', 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 01:25:45,738 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:25:45,741 - kademia - ERROR - Unhandled exception | b119b389-cc54-410f-80ec-a777abcf35bc | Duplicate level creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_name_key"
detail:  key (name)=(jss1) already exists.

[sql: insert into academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning academic_levels.created_at, academic_levels.last_modified_at]
[parameters: {'id': uuid('de44be43-e5e4-473b-b3b2-bd3e7bd29c08'), 'name': 'jss1', 'description': 'first level in the secondary school system', 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\academic_levels.py", line 21, in create_academic_level
    return academic_level_crud.create_level(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 30, in create_level
    level = self.factory.create_academic_level(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\academic_level.py", line 46, in create_academic_level
    raise DuplicateLevelError(
app.core.errors.student_organisation_errors.DuplicateLevelError: Duplicate level creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_name_key"
detail:  key (name)=(jss1) already exists.

[sql: insert into academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning academic_levels.created_at, academic_levels.last_modified_at]
[parameters: {'id': uuid('de44be43-e5e4-473b-b3b2-bd3e7bd29c08'), 'name': 'jss1', 'description': 'first level in the secondary school system', 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:25:45,787 - kademia - WARNING - UniqueViolationError | b119b389-cc54-410f-80ec-a777abcf35bc | Duplicate level creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_name_key"
detail:  key (name)=(jss1) already exists.

[sql: insert into academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning academic_levels.created_at, academic_levels.last_modified_at]
[parameters: {'id': uuid('de44be43-e5e4-473b-b3b2-bd3e7bd29c08'), 'name': 'jss1', 'description': 'first level in the secondary school system', 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:25:57,827 - kademia - INFO - Request started | 88f21c4e-9d89-4d99-9e9d-3d6fdb2bee50 | POST /api/v1/students/academic_levels/
2025-03-19 01:25:57,829 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:25:57,831 - sqlalchemy.engine.Engine - INFO - INSERT INTO academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING academic_levels.created_at, academic_levels.last_modified_at
2025-03-19 01:25:57,831 - sqlalchemy.engine.Engine - INFO - [cached since 15.73s ago] {'id': UUID('665d86e9-d4b1-4233-be57-3f4dc8195e0d'), 'name': 'Jssn', 'description': 'First Level In The Secondary School System', 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 01:25:57,833 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:25:57,835 - kademia - ERROR - Unhandled exception | 88f21c4e-9d89-4d99-9e9d-3d6fdb2bee50 | Duplicate level creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_order_key"
detail:  key ("order")=(1) already exists.

[sql: insert into academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning academic_levels.created_at, academic_levels.last_modified_at]
[parameters: {'id': uuid('665d86e9-d4b1-4233-be57-3f4dc8195e0d'), 'name': 'jssn', 'description': 'first level in the secondary school system', 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\academic_levels.py", line 21, in create_academic_level
    return academic_level_crud.create_level(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 30, in create_level
    level = self.factory.create_academic_level(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\academic_level.py", line 49, in create_academic_level
    raise DuplicateLevelError(
app.core.errors.student_organisation_errors.DuplicateLevelError: Duplicate level creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_order_key"
detail:  key ("order")=(1) already exists.

[sql: insert into academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning academic_levels.created_at, academic_levels.last_modified_at]
[parameters: {'id': uuid('665d86e9-d4b1-4233-be57-3f4dc8195e0d'), 'name': 'jssn', 'description': 'first level in the secondary school system', 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:25:57,841 - kademia - WARNING - UniqueViolationError | 88f21c4e-9d89-4d99-9e9d-3d6fdb2bee50 | Duplicate level creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_order_key"
detail:  key ("order")=(1) already exists.

[sql: insert into academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(name)s, %(description)s, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning academic_levels.created_at, academic_levels.last_modified_at]
[parameters: {'id': uuid('665d86e9-d4b1-4233-be57-3f4dc8195e0d'), 'name': 'jssn', 'description': 'first level in the secondary school system', 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:26:16,205 - kademia - INFO - Request started | 98aaf966-bd92-42ed-bc13-9b4eee329040 | POST /api/v1/students/academic_levels/
2025-03-19 01:26:16,207 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:26:16,208 - sqlalchemy.engine.Engine - INFO - INSERT INTO academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING academic_levels.created_at, academic_levels.last_modified_at
2025-03-19 01:26:16,209 - sqlalchemy.engine.Engine - INFO - [cached since 34.11s ago] {'id': UUID('69297e55-a785-472f-9e3f-21c857cba53d'), 'name': 'Jssn', 'description': 'First Level In The Secondary School System', 'order': 6, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 01:26:16,211 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 01:26:16,215 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:26:16,216 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-19 01:26:16,217 - sqlalchemy.engine.Engine - INFO - [cached since 34.09s ago] {'pk_1': UUID('69297e55-a785-472f-9e3f-21c857cba53d')}
2025-03-19 01:26:16,220 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:26:16,222 - kademia - INFO - Request completed | 98aaf966-bd92-42ed-bc13-9b4eee329040 | Status: 201 | Time: 0.018s
2025-03-19 01:26:32,576 - kademia - INFO - Request started | 3e32682d-11b4-447c-91b4-f6241475c92d | GET /api/v1/students/academic_levels/
2025-03-19 01:26:32,578 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:26:32,580 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.name ILIKE %(name_1)s ORDER BY academic_levels."order" DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-19 01:26:32,580 - sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] {'name_1': '%n%', 'param_1': 50, 'param_2': 0}
2025-03-19 01:26:32,584 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:26:32,585 - kademia - INFO - Request completed | 3e32682d-11b4-447c-91b4-f6241475c92d | Status: 200 | Time: 0.008s
2025-03-19 01:27:07,023 - kademia - INFO - Request started | 1afbe689-155a-4c4f-8579-1e770fcfe473 | GET /api/v1/students/academic_levels/842301c1-7e05-4c34-ba54-7f41c0a05443
2025-03-19 01:27:07,025 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:27:07,026 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:27:07,027 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] {'id_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443'), 'param_1': 1}
2025-03-19 01:27:07,030 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:27:07,031 - kademia - INFO - Request completed | 1afbe689-155a-4c4f-8579-1e770fcfe473 | Status: 200 | Time: 0.008s
2025-03-19 01:28:00,195 - kademia - INFO - Request started | ec168e73-8504-4af7-b6e3-40c464dc0851 | PUT /api/v1/students/academic_levels/842301c1-7e05-4c34-ba54-7f41c0a05443
2025-03-19 01:28:00,199 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:28:00,200 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:28:00,201 - sqlalchemy.engine.Engine - INFO - [cached since 53.17s ago] {'id_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443'), 'param_1': 1}
2025-03-19 01:28:00,203 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:28:00,204 - sqlalchemy.engine.Engine - INFO - [cached since 53.18s ago] {'id_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443'), 'param_1': 1}
2025-03-19 01:28:00,206 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 01:28:00,208 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:28:00,209 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-19 01:28:00,230 - sqlalchemy.engine.Engine - INFO - [cached since 138.1s ago] {'pk_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443')}
2025-03-19 01:28:00,236 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:28:00,248 - kademia - INFO - Request completed | ec168e73-8504-4af7-b6e3-40c464dc0851 | Status: 200 | Time: 0.053s
2025-03-19 01:28:21,532 - kademia - INFO - Request started | f8aa9991-34a3-4506-aea1-b1fee2237d9e | PUT /api/v1/students/academic_levels/842301c1-7e05-4c34-ba54-7f41c0a05443
2025-03-19 01:28:21,534 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:28:21,535 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:28:21,535 - sqlalchemy.engine.Engine - INFO - [cached since 74.51s ago] {'id_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443'), 'param_1': 1}
2025-03-19 01:28:21,538 - sqlalchemy.engine.Engine - INFO - UPDATE academic_levels SET name=%(name)s, last_modified_at=now() WHERE academic_levels.id = %(academic_levels_id)s::UUID
2025-03-19 01:28:21,538 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] {'name': 'Jssn', 'academic_levels_id': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443')}
2025-03-19 01:28:21,540 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:28:21,543 - kademia - ERROR - Unhandled exception | f8aa9991-34a3-4506-aea1-b1fee2237d9e | Duplicate level creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_name_key"
detail:  key (name)=(jssn) already exists.

[sql: update academic_levels set name=%(name)s, last_modified_at=now() where academic_levels.id = %(academic_levels_id)s::uuid]
[parameters: {'name': 'jssn', 'academic_levels_id': uuid('842301c1-7e05-4c34-ba54-7f41c0a05443')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\academic_levels.py", line 41, in update_academic_level
    return academic_level_crud.update_level(level_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 63, in update_level
    updated_level = self.factory.update_academic_level(level_id, data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\academic_level.py", line 104, in update_academic_level
    raise DuplicateLevelError(
app.core.errors.student_organisation_errors.DuplicateLevelError: Duplicate level creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_name_key"
detail:  key (name)=(jssn) already exists.

[sql: update academic_levels set name=%(name)s, last_modified_at=now() where academic_levels.id = %(academic_levels_id)s::uuid]
[parameters: {'name': 'jssn', 'academic_levels_id': uuid('842301c1-7e05-4c34-ba54-7f41c0a05443')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:28:21,550 - kademia - WARNING - UniqueViolationError | f8aa9991-34a3-4506-aea1-b1fee2237d9e | Duplicate level creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_name_key"
detail:  key (name)=(jssn) already exists.

[sql: update academic_levels set name=%(name)s, last_modified_at=now() where academic_levels.id = %(academic_levels_id)s::uuid]
[parameters: {'name': 'jssn', 'academic_levels_id': uuid('842301c1-7e05-4c34-ba54-7f41c0a05443')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:28:43,267 - kademia - INFO - Request started | acfdfe0a-6772-49ff-904b-480587a77472 | PUT /api/v1/students/academic_levels/842301c1-7e05-4c34-ba54-7f41c0a05443
2025-03-19 01:28:43,270 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:28:43,270 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:28:43,272 - sqlalchemy.engine.Engine - INFO - [cached since 96.25s ago] {'id_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443'), 'param_1': 1}
2025-03-19 01:28:43,274 - sqlalchemy.engine.Engine - INFO - UPDATE academic_levels SET name=%(name)s, "order"=%(order)s, last_modified_at=now() WHERE academic_levels.id = %(academic_levels_id)s::UUID
2025-03-19 01:28:43,275 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] {'name': 'Jss7Y', 'order': 6, 'academic_levels_id': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443')}
2025-03-19 01:28:43,277 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:28:43,279 - kademia - ERROR - Unhandled exception | acfdfe0a-6772-49ff-904b-480587a77472 | Duplicate level creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_order_key"
detail:  key ("order")=(6) already exists.

[sql: update academic_levels set name=%(name)s, "order"=%(order)s, last_modified_at=now() where academic_levels.id = %(academic_levels_id)s::uuid]
[parameters: {'name': 'jss7y', 'order': 6, 'academic_levels_id': uuid('842301c1-7e05-4c34-ba54-7f41c0a05443')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\academic_levels.py", line 41, in update_academic_level
    return academic_level_crud.update_level(level_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 63, in update_level
    updated_level = self.factory.update_academic_level(level_id, data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\academic_level.py", line 107, in update_academic_level
    raise DuplicateLevelError(
app.core.errors.student_organisation_errors.DuplicateLevelError: Duplicate level creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_order_key"
detail:  key ("order")=(6) already exists.

[sql: update academic_levels set name=%(name)s, "order"=%(order)s, last_modified_at=now() where academic_levels.id = %(academic_levels_id)s::uuid]
[parameters: {'name': 'jss7y', 'order': 6, 'academic_levels_id': uuid('842301c1-7e05-4c34-ba54-7f41c0a05443')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:28:43,287 - kademia - WARNING - UniqueViolationError | acfdfe0a-6772-49ff-904b-480587a77472 | Duplicate level creation attempted: Unique constraint violation - Detail: (raised as a result of query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "academic_levels_order_key"
detail:  key ("order")=(6) already exists.

[sql: update academic_levels set name=%(name)s, "order"=%(order)s, last_modified_at=now() where academic_levels.id = %(academic_levels_id)s::uuid]
[parameters: {'name': 'jss7y', 'order': 6, 'academic_levels_id': uuid('842301c1-7e05-4c34-ba54-7f41c0a05443')}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 01:28:54,716 - kademia - INFO - Request started | 6c82501c-eb24-4a73-be46-c3a769fcfc74 | PUT /api/v1/students/academic_levels/842301c1-7e05-4c34-ba54-7f41c0a05443
2025-03-19 01:28:54,718 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:28:54,719 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:28:54,720 - sqlalchemy.engine.Engine - INFO - [cached since 107.7s ago] {'id_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443'), 'param_1': 1}
2025-03-19 01:28:54,722 - sqlalchemy.engine.Engine - INFO - UPDATE academic_levels SET name=%(name)s, "order"=%(order)s, last_modified_at=now() WHERE academic_levels.id = %(academic_levels_id)s::UUID
2025-03-19 01:28:54,723 - sqlalchemy.engine.Engine - INFO - [cached since 11.45s ago] {'name': 'Jss7Y', 'order': 60, 'academic_levels_id': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443')}
2025-03-19 01:28:54,725 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:28:54,726 - sqlalchemy.engine.Engine - INFO - [cached since 107.7s ago] {'id_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443'), 'param_1': 1}
2025-03-19 01:28:54,727 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 01:28:54,730 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:28:54,732 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-19 01:28:54,733 - sqlalchemy.engine.Engine - INFO - [cached since 192.6s ago] {'pk_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443')}
2025-03-19 01:28:54,740 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:28:54,784 - kademia - INFO - Request completed | 6c82501c-eb24-4a73-be46-c3a769fcfc74 | Status: 200 | Time: 0.068s
2025-03-19 01:29:10,737 - kademia - INFO - Request started | a612b134-4aca-49c7-966e-c992d3ffd484 | PATCH /api/v1/students/academic_levels/842301c1-7e05-4c34-ba54-7f41c0a05443
2025-03-19 01:29:10,740 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:29:10,741 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:29:10,741 - sqlalchemy.engine.Engine - INFO - [cached since 123.7s ago] {'id_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443'), 'param_1': 1}
2025-03-19 01:29:10,744 - sqlalchemy.engine.Engine - INFO - UPDATE academic_levels SET last_modified_at=now(), is_archived=%(is_archived)s, archived_at=%(archived_at)s, archive_reason=%(archive_reason)s, archived_by=%(archived_by)s::UUID WHERE academic_levels.id = %(academic_levels_id)s::UUID
2025-03-19 01:29:10,745 - sqlalchemy.engine.Engine - INFO - [generated in 0.00067s] {'is_archived': True, 'archived_at': datetime.datetime(2025, 3, 19, 1, 29, 10, 743296, tzinfo=datetime.timezone.utc), 'archive_reason': 'ERROR', 'archived_by': UUID('00000000-0000-0000-0000-000000000000'), 'academic_levels_id': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443')}
2025-03-19 01:29:10,747 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 01:29:10,752 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:29:10,753 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-19 01:29:10,754 - sqlalchemy.engine.Engine - INFO - [cached since 208.6s ago] {'pk_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443')}
2025-03-19 01:29:10,756 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:29:10,757 - kademia - INFO - Request completed | a612b134-4aca-49c7-966e-c992d3ffd484 | Status: 204 | Time: 0.020s
2025-03-19 01:29:14,380 - kademia - INFO - Request started | 31eda11e-b4d5-465e-be85-8067da40f459 | PATCH /api/v1/students/academic_levels/842301c1-7e05-4c34-ba54-7f41c0a05443
2025-03-19 01:29:14,383 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:29:14,384 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:29:14,384 - sqlalchemy.engine.Engine - INFO - [cached since 127.4s ago] {'id_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443'), 'param_1': 1}
2025-03-19 01:29:14,386 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:29:14,387 - kademia - ERROR - Unhandled exception | 31eda11e-b4d5-465e-be85-8067da40f459 | Academic level with id:842301c1-7e05-4c34-ba54-7f41c0a05443 not found. DETAIL: AcademicLevel not with id 842301c1-7e05-4c34-ba54-7f41c0a05443 not found. DETAIL: object not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\academic_levels.py", line 48, in archive_academic_level
    return academic_level_crud.archive_level(level_id, reason.reason)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 74, in archive_level
    self.factory.archive_academic_level(level_id, reason)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\academic_level.py", line 125, in archive_academic_level
    raise LevelNotFoundError(id=academic_level_id, detail=str(e))
app.core.errors.student_organisation_errors.LevelNotFoundError: Academic level with id:842301c1-7e05-4c34-ba54-7f41c0a05443 not found. DETAIL: AcademicLevel not with id 842301c1-7e05-4c34-ba54-7f41c0a05443 not found. DETAIL: object not found
2025-03-19 01:29:14,427 - kademia - WARNING - EntityNotFoundError | 31eda11e-b4d5-465e-be85-8067da40f459 | Academic level with id:842301c1-7e05-4c34-ba54-7f41c0a05443 not found. DETAIL: AcademicLevel not with id 842301c1-7e05-4c34-ba54-7f41c0a05443 not found. DETAIL: object not found
2025-03-19 01:29:28,297 - kademia - INFO - Request started | a8405bd7-6368-4e3e-85dd-a771411b39cc | GET /api/v1/archive/students/academic_levels/842301c1-7e05-4c34-ba54-7f41c0a05443
2025-03-19 01:29:28,299 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:29:28,301 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = true AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:29:28,301 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] {'id_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443'), 'param_1': 1}
2025-03-19 01:29:28,303 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:29:28,304 - kademia - INFO - Request completed | a8405bd7-6368-4e3e-85dd-a771411b39cc | Status: 200 | Time: 0.007s
2025-03-19 01:29:38,844 - kademia - INFO - Request started | 18fe8e4a-ae18-4fda-a33b-b6163f4e63de | PATCH /api/v1/archive/students/academic_levels/842301c1-7e05-4c34-ba54-7f41c0a05443
2025-03-19 01:29:38,846 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:29:38,847 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = true AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:29:38,847 - sqlalchemy.engine.Engine - INFO - [cached since 10.55s ago] {'id_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443'), 'param_1': 1}
2025-03-19 01:29:38,851 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = true AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:29:38,851 - sqlalchemy.engine.Engine - INFO - [cached since 10.55s ago] {'id_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443'), 'param_1': 1}
2025-03-19 01:29:38,854 - sqlalchemy.engine.Engine - INFO - UPDATE academic_levels SET last_modified_at=now(), is_archived=%(is_archived)s WHERE academic_levels.id = %(academic_levels_id)s::UUID
2025-03-19 01:29:38,855 - sqlalchemy.engine.Engine - INFO - [generated in 0.00074s] {'is_archived': False, 'academic_levels_id': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443')}
2025-03-19 01:29:38,856 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 01:29:38,863 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:29:38,864 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-19 01:29:38,865 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] {'pk_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443')}
2025-03-19 01:29:38,867 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:29:38,881 - kademia - INFO - Request completed | 18fe8e4a-ae18-4fda-a33b-b6163f4e63de | Status: 200 | Time: 0.036s
2025-03-19 01:29:47,479 - kademia - INFO - Request started | 2c38a081-975c-4524-b5ce-798c1f94253d | DELETE /api/v1/students/academic_levels/842301c1-7e05-4c34-ba54-7f41c0a05443
2025-03-19 01:29:47,481 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:29:47,481 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:29:47,482 - sqlalchemy.engine.Engine - INFO - [cached since 160.5s ago] {'id_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443'), 'param_1': 1}
2025-03-19 01:29:47,485 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.mentor_id AS classes_mentor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE %(param_1)s::UUID = classes.level_id
2025-03-19 01:29:47,486 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] {'param_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443')}
2025-03-19 01:29:47,500 - sqlalchemy.engine.Engine - INFO - SELECT academic_level_subjects.id AS academic_level_subjects_id, academic_level_subjects.level_id AS academic_level_subjects_level_id, academic_level_subjects.subject_id AS academic_level_subjects_subject_id, academic_level_subjects.educator_id AS academic_level_subjects_educator_id, academic_level_subjects.is_elective AS academic_level_subjects_is_elective, academic_level_subjects.academic_year AS academic_level_subjects_academic_year, academic_level_subjects.curriculum_url AS academic_level_subjects_curriculum_url, academic_level_subjects.created_by AS academic_level_subjects_created_by, academic_level_subjects.last_modified_by AS academic_level_subjects_last_modified_by, academic_level_subjects.created_at AS academic_level_subjects_created_at, academic_level_subjects.last_modified_at AS academic_level_subjects_last_modified_at, academic_level_subjects.is_archived AS academic_level_subjects_is_archived, academic_level_subjects.archived_at AS academic_level_subjects_archived_at, academic_level_subjects.archive_reason AS academic_level_subjects_archive_reason, academic_level_subjects.archived_by AS academic_level_subjects_archived_by 
FROM academic_level_subjects 
WHERE %(param_1)s::UUID = academic_level_subjects.level_id
2025-03-19 01:29:47,501 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] {'param_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443')}
2025-03-19 01:29:47,513 - sqlalchemy.engine.Engine - INFO - SELECT students.student_id AS students_student_id, students.user_type AS students_user_type, students.access_level AS students_access_level, students.status AS students_status, students.date_of_birth AS students_date_of_birth, students.image_url AS students_image_url, students.class_id AS students_class_id, students.level_id AS students_level_id, students.department_id AS students_department_id, students.guardian_id AS students_guardian_id, students.is_repeating AS students_is_repeating, students.admission_date AS students_admission_date, students.date_left AS students_date_left, students.graduation_date AS students_graduation_date, students.id AS students_id, students.password_hash AS students_password_hash, students.first_name AS students_first_name, students.last_name AS students_last_name, students.gender AS students_gender, students.last_login AS students_last_login, students.deletion_eligible AS students_deletion_eligible, students.created_by AS students_created_by, students.last_modified_by AS students_last_modified_by, students.created_at AS students_created_at, students.last_modified_at AS students_last_modified_at, students.is_archived AS students_is_archived, students.archived_at AS students_archived_at, students.archive_reason AS students_archive_reason, students.archived_by AS students_archived_by 
FROM students 
WHERE %(param_1)s::UUID = students.level_id
2025-03-19 01:29:47,513 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] {'param_1': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443')}
2025-03-19 01:29:47,515 - sqlalchemy.engine.Engine - INFO - DELETE FROM academic_levels WHERE academic_levels.id = %(id)s::UUID
2025-03-19 01:29:47,515 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] {'id': UUID('842301c1-7e05-4c34-ba54-7f41c0a05443')}
2025-03-19 01:29:47,529 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 01:29:47,531 - kademia - INFO - Request completed | 2c38a081-975c-4524-b5ce-798c1f94253d | Status: 204 | Time: 0.052s
2025-03-19 01:30:14,160 - kademia - INFO - Request started | fd67ac78-801b-4d7e-ad21-9730030aac53 | PATCH /api/v1/students/academic_levels/69297e55-a785-472f-9e3f-21c857cba53d
2025-03-19 01:30:14,162 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:30:14,162 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:30:14,164 - sqlalchemy.engine.Engine - INFO - [cached since 187.1s ago] {'id_1': UUID('69297e55-a785-472f-9e3f-21c857cba53d'), 'param_1': 1}
2025-03-19 01:30:14,166 - sqlalchemy.engine.Engine - INFO - UPDATE academic_levels SET last_modified_at=now(), is_archived=%(is_archived)s, archived_at=%(archived_at)s, archive_reason=%(archive_reason)s, archived_by=%(archived_by)s::UUID WHERE academic_levels.id = %(academic_levels_id)s::UUID
2025-03-19 01:30:14,166 - sqlalchemy.engine.Engine - INFO - [cached since 63.42s ago] {'is_archived': True, 'archived_at': datetime.datetime(2025, 3, 19, 1, 30, 14, 165153, tzinfo=datetime.timezone.utc), 'archive_reason': 'ERROR', 'archived_by': UUID('00000000-0000-0000-0000-000000000000'), 'academic_levels_id': UUID('69297e55-a785-472f-9e3f-21c857cba53d')}
2025-03-19 01:30:14,167 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 01:30:14,170 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:30:14,171 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-19 01:30:14,171 - sqlalchemy.engine.Engine - INFO - [cached since 272s ago] {'pk_1': UUID('69297e55-a785-472f-9e3f-21c857cba53d')}
2025-03-19 01:30:14,173 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:30:14,175 - kademia - INFO - Request completed | fd67ac78-801b-4d7e-ad21-9730030aac53 | Status: 204 | Time: 0.014s
2025-03-19 01:30:26,271 - kademia - INFO - Request started | 9abb16f2-ef8f-4091-b61f-bd36d50f4989 | DELETE /api/v1/archive/students/academic_levels/{level_id}
2025-03-19 01:30:26,273 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:30:26,274 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = true AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:30:26,276 - sqlalchemy.engine.Engine - INFO - [cached since 57.98s ago] {'id_1': UUID('69297e55-a785-472f-9e3f-21c857cba53d'), 'param_1': 1}
2025-03-19 01:30:26,278 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.mentor_id AS classes_mentor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE %(param_1)s::UUID = classes.level_id
2025-03-19 01:30:26,279 - sqlalchemy.engine.Engine - INFO - [cached since 38.79s ago] {'param_1': UUID('69297e55-a785-472f-9e3f-21c857cba53d')}
2025-03-19 01:30:26,282 - sqlalchemy.engine.Engine - INFO - SELECT academic_level_subjects.id AS academic_level_subjects_id, academic_level_subjects.level_id AS academic_level_subjects_level_id, academic_level_subjects.subject_id AS academic_level_subjects_subject_id, academic_level_subjects.educator_id AS academic_level_subjects_educator_id, academic_level_subjects.is_elective AS academic_level_subjects_is_elective, academic_level_subjects.academic_year AS academic_level_subjects_academic_year, academic_level_subjects.curriculum_url AS academic_level_subjects_curriculum_url, academic_level_subjects.created_by AS academic_level_subjects_created_by, academic_level_subjects.last_modified_by AS academic_level_subjects_last_modified_by, academic_level_subjects.created_at AS academic_level_subjects_created_at, academic_level_subjects.last_modified_at AS academic_level_subjects_last_modified_at, academic_level_subjects.is_archived AS academic_level_subjects_is_archived, academic_level_subjects.archived_at AS academic_level_subjects_archived_at, academic_level_subjects.archive_reason AS academic_level_subjects_archive_reason, academic_level_subjects.archived_by AS academic_level_subjects_archived_by 
FROM academic_level_subjects 
WHERE %(param_1)s::UUID = academic_level_subjects.level_id
2025-03-19 01:30:26,283 - sqlalchemy.engine.Engine - INFO - [cached since 38.78s ago] {'param_1': UUID('69297e55-a785-472f-9e3f-21c857cba53d')}
2025-03-19 01:30:26,284 - sqlalchemy.engine.Engine - INFO - SELECT students.student_id AS students_student_id, students.user_type AS students_user_type, students.access_level AS students_access_level, students.status AS students_status, students.date_of_birth AS students_date_of_birth, students.image_url AS students_image_url, students.class_id AS students_class_id, students.level_id AS students_level_id, students.department_id AS students_department_id, students.guardian_id AS students_guardian_id, students.is_repeating AS students_is_repeating, students.admission_date AS students_admission_date, students.date_left AS students_date_left, students.graduation_date AS students_graduation_date, students.id AS students_id, students.password_hash AS students_password_hash, students.first_name AS students_first_name, students.last_name AS students_last_name, students.gender AS students_gender, students.last_login AS students_last_login, students.deletion_eligible AS students_deletion_eligible, students.created_by AS students_created_by, students.last_modified_by AS students_last_modified_by, students.created_at AS students_created_at, students.last_modified_at AS students_last_modified_at, students.is_archived AS students_is_archived, students.archived_at AS students_archived_at, students.archive_reason AS students_archive_reason, students.archived_by AS students_archived_by 
FROM students 
WHERE %(param_1)s::UUID = students.level_id
2025-03-19 01:30:26,285 - sqlalchemy.engine.Engine - INFO - [cached since 38.77s ago] {'param_1': UUID('69297e55-a785-472f-9e3f-21c857cba53d')}
2025-03-19 01:30:26,286 - sqlalchemy.engine.Engine - INFO - DELETE FROM academic_levels WHERE academic_levels.id = %(id)s::UUID
2025-03-19 01:30:26,286 - sqlalchemy.engine.Engine - INFO - [cached since 38.77s ago] {'id': UUID('69297e55-a785-472f-9e3f-21c857cba53d')}
2025-03-19 01:30:26,288 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 01:30:26,293 - kademia - INFO - Request completed | 9abb16f2-ef8f-4091-b61f-bd36d50f4989 | Status: 204 | Time: 0.021s
2025-03-19 01:30:46,809 - kademia - INFO - Request started | 5d2044ca-3508-4d4d-b91e-0db7c2c161cd | GET /api/v1/students/academic_levels/69297e55-a785-472f-9e3f-21c857cba53d
2025-03-19 01:30:46,811 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 01:30:46,812 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id AS academic_levels_id, academic_levels.name AS academic_levels_name, academic_levels.description AS academic_levels_description, academic_levels."order" AS academic_levels_order, academic_levels.created_by AS academic_levels_created_by, academic_levels.last_modified_by AS academic_levels_last_modified_by, academic_levels.created_at AS academic_levels_created_at, academic_levels.last_modified_at AS academic_levels_last_modified_at, academic_levels.is_archived AS academic_levels_is_archived, academic_levels.archived_at AS academic_levels_archived_at, academic_levels.archive_reason AS academic_levels_archive_reason, academic_levels.archived_by AS academic_levels_archived_by 
FROM academic_levels 
WHERE academic_levels.is_archived = false AND academic_levels.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 01:30:46,812 - sqlalchemy.engine.Engine - INFO - [cached since 219.8s ago] {'id_1': UUID('69297e55-a785-472f-9e3f-21c857cba53d'), 'param_1': 1}
2025-03-19 01:30:46,815 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 01:30:46,816 - kademia - ERROR - Unhandled exception | 5d2044ca-3508-4d4d-b91e-0db7c2c161cd | Academic level with id:69297e55-a785-472f-9e3f-21c857cba53d not found. DETAIL: AcademicLevel not with id 69297e55-a785-472f-9e3f-21c857cba53d not found. DETAIL: Record not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\academic_levels.py", line 34, in get_academic_level
    return academic_level_crud.get_level(level_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 41, in get_level
    level = self.factory.get_academic_level(level_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\academic_level.py", line 66, in get_academic_level
    raise LevelNotFoundError(id=academic_level_id, detail= str(e))
app.core.errors.student_organisation_errors.LevelNotFoundError: Academic level with id:69297e55-a785-472f-9e3f-21c857cba53d not found. DETAIL: AcademicLevel not with id 69297e55-a785-472f-9e3f-21c857cba53d not found. DETAIL: Record not found
2025-03-19 01:30:46,821 - kademia - WARNING - EntityNotFoundError | 5d2044ca-3508-4d4d-b91e-0db7c2c161cd | Academic level with id:69297e55-a785-472f-9e3f-21c857cba53d not found. DETAIL: AcademicLevel not with id 69297e55-a785-472f-9e3f-21c857cba53d not found. DETAIL: Record not found
2025-03-19 01:33:14,292 - kademia - INFO - Application started
2025-03-19 01:33:14,313 - kademia - INFO - Application started
2025-03-19 01:33:17,396 - kademia - INFO - Request started | ae9058e4-5e2e-4843-bc60-2f5f1fba6840 | GET /docs
2025-03-19 01:33:17,398 - kademia - INFO - Request completed | ae9058e4-5e2e-4843-bc60-2f5f1fba6840 | Status: 200 | Time: 0.002s
2025-03-19 01:33:17,607 - kademia - INFO - Request started | 2cbb9dfb-1af3-48da-9e7d-16920b54b3f9 | GET /openapi.json
2025-03-19 01:33:17,720 - kademia - INFO - Request completed | 2cbb9dfb-1af3-48da-9e7d-16920b54b3f9 | Status: 200 | Time: 0.113s
2025-03-19 01:40:01,996 - kademia - INFO - Application started
2025-03-19 01:40:01,997 - kademia - INFO - Application started
2025-03-19 02:03:04,168 - kademia - INFO - Application started
2025-03-19 02:03:04,169 - kademia - INFO - Application started
2025-03-19 02:03:04,177 - kademia - INFO - Request started | a45a3b84-dff9-4d75-8515-4c8a42e13934 | POST /api/v1/students/academic_levels/
2025-03-19 02:03:04,255 - kademia - ERROR - Unhandled exception | a45a3b84-dff9-4d75-8515-4c8a42e13934 | Mapper 'Mapper[Educator(educators)]' has no property 'mentored_class'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2520, in get_property
    return self._props[key]
           ~~~~~~~~~~~^^^^^
KeyError: 'mentored_class'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\academic_levels.py", line 21, in create_level
    return academic_level_crud.create_level(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 30, in create_level
    level = self.factory.create_academic_level(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\academic_level.py", line 31, in create_academic_level
    academic_level = AcademicLevel(
                     ^^^^^^^^^^^^^^
  File "<string>", line 4, in __init__
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4407, in _event_on_init
    instrumenting_mapper._check_configure()
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2399, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4215, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4256, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2416, in _post_configure_properties
    prop.init()
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1647, in do_init
    self._generate_backref()
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2133, in _generate_backref
    self._add_reverse_property(self.back_populates)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1578, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2522, in get_property
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[Educator(educators)]' has no property 'mentored_class'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-03-19 02:03:04,284 - kademia - ERROR - Unhandled exception | a45a3b84-dff9-4d75-8515-4c8a42e13934 | Mapper 'Mapper[Educator(educators)]' has no property 'mentored_class'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2520, in get_property
    return self._props[key]
           ~~~~~~~~~~~^^^^^
KeyError: 'mentored_class'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\academic_levels.py", line 21, in create_level
    return academic_level_crud.create_level(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\academic_levels.py", line 30, in create_level
    level = self.factory.create_academic_level(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\academic_level.py", line 31, in create_academic_level
    academic_level = AcademicLevel(
                     ^^^^^^^^^^^^^^
  File "<string>", line 4, in __init__
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\state.py", line 566, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\event\attr.py", line 497, in __call__
    fn(*args, **kw)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4407, in _event_on_init
    instrumenting_mapper._check_configure()
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2399, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4215, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4256, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2416, in _post_configure_properties
    prop.init()
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1647, in do_init
    self._generate_backref()
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2133, in _generate_backref
    self._add_reverse_property(self.back_populates)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1578, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2522, in get_property
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[Educator(educators)]' has no property 'mentored_class'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-03-19 02:04:33,724 - kademia - INFO - Application started
2025-03-19 02:04:33,729 - kademia - INFO - Application started
2025-03-19 02:06:13,168 - kademia - INFO - Application started
2025-03-19 02:06:15,689 - kademia - INFO - Request started | c7d391f7-b80e-4aac-8aed-84711ed7294e | GET /
2025-03-19 02:06:15,696 - kademia - INFO - Request completed | c7d391f7-b80e-4aac-8aed-84711ed7294e | Status: 200 | Time: 0.006s
2025-03-19 02:06:15,911 - kademia - INFO - Request started | 92fe052a-8aa1-4c76-874d-db7590572436 | GET /favicon.ico
2025-03-19 02:06:15,913 - kademia - INFO - Request completed | 92fe052a-8aa1-4c76-874d-db7590572436 | Status: 404 | Time: 0.001s
2025-03-19 02:06:23,553 - kademia - INFO - Request started | da04cf6c-19d9-4191-afea-97c2f8b0e2ad | GET /docs
2025-03-19 02:06:23,556 - kademia - INFO - Request completed | da04cf6c-19d9-4191-afea-97c2f8b0e2ad | Status: 200 | Time: 0.001s
2025-03-19 02:06:23,748 - kademia - INFO - Request started | 4ae1e153-444a-4250-b317-9b66854909e7 | GET /openapi.json
2025-03-19 02:06:23,882 - kademia - INFO - Request completed | 4ae1e153-444a-4250-b317-9b66854909e7 | Status: 200 | Time: 0.133s
2025-03-19 02:06:37,596 - kademia - INFO - Request started | 6e91a108-63aa-4cbd-a451-33762629ae75 | POST /api/v1/students/academic_levels/
2025-03-19 02:06:37,916 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-19 02:06:37,916 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 02:06:37,918 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-19 02:06:37,919 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 02:06:37,919 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-19 02:06:37,920 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 02:06:37,922 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:06:37,925 - sqlalchemy.engine.Engine - INFO - INSERT INTO academic_levels (id, name, description, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING academic_levels.created_at, academic_levels.last_modified_at
2025-03-19 02:06:37,927 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] {'id': UUID('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'name': 'Jss1', 'description': 'First Level In The Secondary School System', 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 02:06:37,940 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 02:06:37,942 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:06:37,946 - sqlalchemy.engine.Engine - INFO - SELECT academic_levels.id, academic_levels.name, academic_levels.description, academic_levels."order", academic_levels.created_by, academic_levels.last_modified_by, academic_levels.created_at, academic_levels.last_modified_at, academic_levels.is_archived, academic_levels.archived_at, academic_levels.archive_reason, academic_levels.archived_by 
FROM academic_levels 
WHERE academic_levels.id = %(pk_1)s::UUID
2025-03-19 02:06:37,947 - sqlalchemy.engine.Engine - INFO - [generated in 0.00085s] {'pk_1': UUID('b7aeece1-55a8-41c2-bf8d-2f9d124366a1')}
2025-03-19 02:06:37,951 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:06:37,952 - kademia - INFO - Request completed | 6e91a108-63aa-4cbd-a451-33762629ae75 | Status: 201 | Time: 0.356s
2025-03-19 02:07:21,655 - kademia - INFO - Request started | 2166b1dd-09cf-4abb-bae0-6e79b53da15e | POST /api/v1/students/student_organization/
2025-03-19 02:07:21,658 - kademia - INFO - Request completed | 2166b1dd-09cf-4abb-bae0-6e79b53da15e | Status: 422 | Time: 0.002s
2025-03-19 02:07:56,200 - kademia - INFO - Request started | eb812b32-7676-47d4-89dc-d3b83b055488 | POST /api/v1/students/student_organization/
2025-03-19 02:07:56,202 - kademia - INFO - Request completed | eb812b32-7676-47d4-89dc-d3b83b055488 | Status: 422 | Time: 0.001s
2025-03-19 02:08:50,653 - kademia - INFO - Request started | f783c67c-01eb-43fd-814c-68f2140e1c87 | POST /api/v1/students/student_organization/
2025-03-19 02:08:50,660 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:08:50,663 - sqlalchemy.engine.Engine - INFO - INSERT INTO classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(supervisor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at
2025-03-19 02:08:50,665 - sqlalchemy.engine.Engine - INFO - [generated in 0.00123s] {'id': UUID('fc16463e-f327-4315-8ec8-2a45fa6da560'), 'level_id': UUID('b7aeece1-55a8-41c2-bf8d-2f9d124366a5'), 'code': 'A', 'supervisor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 02:08:50,679 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:08:50,682 - kademia - ERROR - Unhandled exception | f783c67c-01eb-43fd-814c-68f2140e1c87 | Error during during fk insertion of Academic Level with id:b7aeece1-55a8-41c2-bf8d-2f9d124366a5 during create operation. Detail Foreign key constraint violation during create operation. Detail: (psycopg2.errors.ForeignKeyViolation) insert or update on table "classes" violates foreign key constraint "fk_classes_academic_levels_level_id"
DETAIL:  Key (level_id)=(b7aeece1-55a8-41c2-bf8d-2f9d124366a5) is not present in table "academic_levels".

[SQL: INSERT INTO classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(supervisor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at]
[parameters: {'id': UUID('fc16463e-f327-4315-8ec8-2a45fa6da560'), 'level_id': UUID('b7aeece1-55a8-41c2-bf8d-2f9d124366a5'), 'code': 'A', 'supervisor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\classes.py", line 19, in create_class
    return class_crud.create_class(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\classes.py", line 30, in create_class
    new_class = self.factory.create_class(data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\classes.py", line 75, in create_class
    raise error_class(id=entity_id, detail=str(e), action='create')
app.core.errors.student_organisation_errors.RelatedLevelNotFoundError: Error during during fk insertion of Academic Level with id:b7aeece1-55a8-41c2-bf8d-2f9d124366a5 during create operation. Detail Foreign key constraint violation during create operation. Detail: (psycopg2.errors.ForeignKeyViolation) insert or update on table "classes" violates foreign key constraint "fk_classes_academic_levels_level_id"
DETAIL:  Key (level_id)=(b7aeece1-55a8-41c2-bf8d-2f9d124366a5) is not present in table "academic_levels".

[SQL: INSERT INTO classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(supervisor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at]
[parameters: {'id': UUID('fc16463e-f327-4315-8ec8-2a45fa6da560'), 'level_id': UUID('b7aeece1-55a8-41c2-bf8d-2f9d124366a5'), 'code': 'A', 'supervisor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 02:08:50,701 - kademia - WARNING - RelationshipError | f783c67c-01eb-43fd-814c-68f2140e1c87 | Error during during fk insertion of Academic Level with id:b7aeece1-55a8-41c2-bf8d-2f9d124366a5 during create operation. Detail Foreign key constraint violation during create operation. Detail: (psycopg2.errors.ForeignKeyViolation) insert or update on table "classes" violates foreign key constraint "fk_classes_academic_levels_level_id"
DETAIL:  Key (level_id)=(b7aeece1-55a8-41c2-bf8d-2f9d124366a5) is not present in table "academic_levels".

[SQL: INSERT INTO classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(supervisor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at]
[parameters: {'id': UUID('fc16463e-f327-4315-8ec8-2a45fa6da560'), 'level_id': UUID('b7aeece1-55a8-41c2-bf8d-2f9d124366a5'), 'code': 'A', 'supervisor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 02:10:08,547 - kademia - INFO - Request started | e9bd6a75-a832-410a-8a0c-7192d70672bd | POST /api/v1/students/student_organization/
2025-03-19 02:10:08,550 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:10:08,550 - sqlalchemy.engine.Engine - INFO - INSERT INTO classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(supervisor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at
2025-03-19 02:10:08,552 - sqlalchemy.engine.Engine - INFO - [cached since 77.89s ago] {'id': UUID('6d3b633d-519a-4307-b042-2248f9d11d97'), 'level_id': UUID('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'A', 'supervisor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 02:10:08,555 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 02:10:08,561 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:10:08,564 - sqlalchemy.engine.Engine - INFO - SELECT classes.id, classes.level_id, classes.code, classes.supervisor_id, classes.student_rep_id, classes.assistant_rep_id, classes."order", classes.created_by, classes.last_modified_by, classes.created_at, classes.last_modified_at, classes.is_archived, classes.archived_at, classes.archive_reason, classes.archived_by 
FROM classes 
WHERE classes.id = %(pk_1)s::UUID
2025-03-19 02:10:08,565 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] {'pk_1': UUID('6d3b633d-519a-4307-b042-2248f9d11d97')}
2025-03-19 02:10:08,568 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:10:08,571 - kademia - INFO - Request completed | e9bd6a75-a832-410a-8a0c-7192d70672bd | Status: 201 | Time: 0.023s
2025-03-19 02:10:47,896 - kademia - INFO - Application started
2025-03-19 02:11:22,376 - kademia - INFO - Request started | 4201829c-601d-45fc-ad20-576d5c677069 | POST /api/v1/students/student_organization/
2025-03-19 02:11:22,597 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-19 02:11:22,598 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 02:11:22,599 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-19 02:11:22,600 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 02:11:22,601 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-19 02:11:22,601 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 02:11:22,603 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:11:22,605 - sqlalchemy.engine.Engine - INFO - INSERT INTO classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(supervisor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at
2025-03-19 02:11:22,606 - sqlalchemy.engine.Engine - INFO - [generated in 0.00108s] {'id': UUID('bd47433c-97ba-4d7f-8422-a556e2e414a1'), 'level_id': UUID('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'A', 'supervisor_id': UUID('b7aeece1-55a8-41c2-bf8d-2f9d124366a0'), 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 02:11:22,610 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:11:22,612 - kademia - ERROR - Unhandled exception | 4201829c-601d-45fc-ad20-576d5c677069 | Duplicate class creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "uq_class_level_code"
detail:  key (level_id, code)=(b7aeece1-55a8-41c2-bf8d-2f9d124366a1, a) already exists.

[sql: insert into classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(level_id)s::uuid, %(code)s, %(supervisor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning classes.created_at, classes.last_modified_at]
[parameters: {'id': uuid('bd47433c-97ba-4d7f-8422-a556e2e414a1'), 'level_id': uuid('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'a', 'supervisor_id': uuid('b7aeece1-55a8-41c2-bf8d-2f9d124366a0'), 'student_rep_id': none, 'assistant_rep_id': none, 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\classes.py", line 19, in create_class
    return class_crud.create_class(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\classes.py", line 30, in create_class
    new_class = self.factory.create_class(data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\classes.py", line 55, in create_class
    raise DuplicateClassError(
app.core.errors.student_organisation_errors.DuplicateClassError: Duplicate class creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "uq_class_level_code"
detail:  key (level_id, code)=(b7aeece1-55a8-41c2-bf8d-2f9d124366a1, a) already exists.

[sql: insert into classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(level_id)s::uuid, %(code)s, %(supervisor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning classes.created_at, classes.last_modified_at]
[parameters: {'id': uuid('bd47433c-97ba-4d7f-8422-a556e2e414a1'), 'level_id': uuid('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'a', 'supervisor_id': uuid('b7aeece1-55a8-41c2-bf8d-2f9d124366a0'), 'student_rep_id': none, 'assistant_rep_id': none, 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 02:11:22,620 - kademia - WARNING - UniqueViolationError | 4201829c-601d-45fc-ad20-576d5c677069 | Duplicate class creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "uq_class_level_code"
detail:  key (level_id, code)=(b7aeece1-55a8-41c2-bf8d-2f9d124366a1, a) already exists.

[sql: insert into classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(level_id)s::uuid, %(code)s, %(supervisor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning classes.created_at, classes.last_modified_at]
[parameters: {'id': uuid('bd47433c-97ba-4d7f-8422-a556e2e414a1'), 'level_id': uuid('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'a', 'supervisor_id': uuid('b7aeece1-55a8-41c2-bf8d-2f9d124366a0'), 'student_rep_id': none, 'assistant_rep_id': none, 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 02:19:09,137 - kademia - INFO - Application started
2025-03-19 02:19:31,489 - kademia - INFO - Request started | 87255f67-b3f6-43ae-baca-7d78bd8ae56c | GET /docs
2025-03-19 02:19:31,490 - kademia - INFO - Request completed | 87255f67-b3f6-43ae-baca-7d78bd8ae56c | Status: 200 | Time: 0.001s
2025-03-19 02:19:31,598 - kademia - INFO - Request started | 2ba687ac-9d3a-4ad4-910f-c11eb7c9cc7f | GET /openapi.json
2025-03-19 02:19:31,688 - kademia - INFO - Request completed | 2ba687ac-9d3a-4ad4-910f-c11eb7c9cc7f | Status: 200 | Time: 0.090s
2025-03-19 02:19:57,362 - kademia - INFO - Request started | 713379e3-91a4-4fa4-980c-1a3c6c670d37 | POST /api/v1/students/student_organization/
2025-03-19 02:19:57,599 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-19 02:19:57,600 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 02:19:57,601 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-19 02:19:57,602 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 02:19:57,603 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-19 02:19:57,603 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 02:19:57,604 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:19:57,607 - sqlalchemy.engine.Engine - INFO - INSERT INTO classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(supervisor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at
2025-03-19 02:19:57,608 - sqlalchemy.engine.Engine - INFO - [generated in 0.00122s] {'id': UUID('508a1875-988b-4293-a59c-2dabfe809cc6'), 'level_id': UUID('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'A', 'supervisor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 02:19:57,612 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:19:57,613 - kademia - ERROR - Unhandled exception | 713379e3-91a4-4fa4-980c-1a3c6c670d37 | Duplicate class creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "uq_class_level_code"
detail:  key (level_id, code)=(b7aeece1-55a8-41c2-bf8d-2f9d124366a1, a) already exists.

[sql: insert into classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(level_id)s::uuid, %(code)s, %(supervisor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning classes.created_at, classes.last_modified_at]
[parameters: {'id': uuid('508a1875-988b-4293-a59c-2dabfe809cc6'), 'level_id': uuid('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'a', 'supervisor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\classes.py", line 19, in create_class
    return class_crud.create_class(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\classes.py", line 30, in create_class
    new_class = self.factory.create_class(data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\classes.py", line 55, in create_class
    raise DuplicateClassError(
app.core.errors.student_organisation_errors.DuplicateClassError: Duplicate class creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "uq_class_level_code"
detail:  key (level_id, code)=(b7aeece1-55a8-41c2-bf8d-2f9d124366a1, a) already exists.

[sql: insert into classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(level_id)s::uuid, %(code)s, %(supervisor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning classes.created_at, classes.last_modified_at]
[parameters: {'id': uuid('508a1875-988b-4293-a59c-2dabfe809cc6'), 'level_id': uuid('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'a', 'supervisor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 02:19:57,626 - kademia - WARNING - UniqueViolationError | 713379e3-91a4-4fa4-980c-1a3c6c670d37 | Duplicate class creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "uq_class_level_code"
detail:  key (level_id, code)=(b7aeece1-55a8-41c2-bf8d-2f9d124366a1, a) already exists.

[sql: insert into classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(level_id)s::uuid, %(code)s, %(supervisor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning classes.created_at, classes.last_modified_at]
[parameters: {'id': uuid('508a1875-988b-4293-a59c-2dabfe809cc6'), 'level_id': uuid('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'a', 'supervisor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 02:24:23,268 - kademia - INFO - Application started
2025-03-19 02:24:43,805 - kademia - INFO - Request started | 1ec407ed-4d5b-4c9b-8531-d7097d8c4065 | GET /docs
2025-03-19 02:24:43,806 - kademia - INFO - Request completed | 1ec407ed-4d5b-4c9b-8531-d7097d8c4065 | Status: 200 | Time: 0.001s
2025-03-19 02:24:43,966 - kademia - INFO - Request started | 14514901-a943-405e-8eef-38694a581224 | GET /openapi.json
2025-03-19 02:24:44,096 - kademia - INFO - Request completed | 14514901-a943-405e-8eef-38694a581224 | Status: 200 | Time: 0.130s
2025-03-19 02:25:27,221 - kademia - INFO - Request started | 0f534e58-74b6-450a-8f59-d64ca6bddb5c | POST /api/v1/students/student_organization/
2025-03-19 02:25:27,467 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-19 02:25:27,467 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 02:25:27,468 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-19 02:25:27,469 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 02:25:27,469 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-19 02:25:27,470 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 02:25:27,471 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:25:27,474 - sqlalchemy.engine.Engine - INFO - INSERT INTO classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(supervisor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at
2025-03-19 02:25:27,474 - sqlalchemy.engine.Engine - INFO - [generated in 0.00067s] {'id': UUID('ee0bee09-dd94-45d3-8e2c-52cc5390050a'), 'level_id': UUID('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'A', 'supervisor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 02:25:27,478 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:25:27,480 - kademia - ERROR - Unhandled exception | 0f534e58-74b6-450a-8f59-d64ca6bddb5c | Duplicate class creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "uq_class_level_code"
detail:  key (level_id, code)=(b7aeece1-55a8-41c2-bf8d-2f9d124366a1, a) already exists.

[sql: insert into classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(level_id)s::uuid, %(code)s, %(supervisor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning classes.created_at, classes.last_modified_at]
[parameters: {'id': uuid('ee0bee09-dd94-45d3-8e2c-52cc5390050a'), 'level_id': uuid('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'a', 'supervisor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\classes.py", line 19, in create_class
    return class_crud.create_class(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\classes.py", line 30, in create_class
    new_class = self.factory.create_class(data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\classes.py", line 55, in create_class
    raise DuplicateClassError(
app.core.errors.student_organisation_errors.DuplicateClassError: Duplicate class creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "uq_class_level_code"
detail:  key (level_id, code)=(b7aeece1-55a8-41c2-bf8d-2f9d124366a1, a) already exists.

[sql: insert into classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(level_id)s::uuid, %(code)s, %(supervisor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning classes.created_at, classes.last_modified_at]
[parameters: {'id': uuid('ee0bee09-dd94-45d3-8e2c-52cc5390050a'), 'level_id': uuid('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'a', 'supervisor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 02:25:27,487 - kademia - WARNING - UniqueViolationError | 0f534e58-74b6-450a-8f59-d64ca6bddb5c | Duplicate class creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "uq_class_level_code"
detail:  key (level_id, code)=(b7aeece1-55a8-41c2-bf8d-2f9d124366a1, a) already exists.

[sql: insert into classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(level_id)s::uuid, %(code)s, %(supervisor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning classes.created_at, classes.last_modified_at]
[parameters: {'id': uuid('ee0bee09-dd94-45d3-8e2c-52cc5390050a'), 'level_id': uuid('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'a', 'supervisor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 02:28:56,805 - kademia - INFO - Request started | 4fc49724-785a-47c4-adb8-95ca2102200d | POST /api/v1/students/student_organization/
2025-03-19 02:28:56,808 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:28:56,809 - sqlalchemy.engine.Engine - INFO - INSERT INTO classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(supervisor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at
2025-03-19 02:28:56,810 - sqlalchemy.engine.Engine - INFO - [cached since 209.3s ago] {'id': UUID('ae3fd2a2-015a-4a65-af10-240036166390'), 'level_id': UUID('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'B', 'supervisor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 02:28:56,812 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:28:56,814 - kademia - ERROR - Unhandled exception | 4fc49724-785a-47c4-adb8-95ca2102200d | Duplicate class creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "classes_order_key"
detail:  key ("order")=(1) already exists.

[sql: insert into classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(level_id)s::uuid, %(code)s, %(supervisor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning classes.created_at, classes.last_modified_at]
[parameters: {'id': uuid('ae3fd2a2-015a-4a65-af10-240036166390'), 'level_id': uuid('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'b', 'supervisor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\classes.py", line 19, in create_class
    return class_crud.create_class(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\classes.py", line 30, in create_class
    new_class = self.factory.create_class(data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\classes.py", line 58, in create_class
    raise DuplicateClassError(
app.core.errors.student_organisation_errors.DuplicateClassError: Duplicate class creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "classes_order_key"
detail:  key ("order")=(1) already exists.

[sql: insert into classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(level_id)s::uuid, %(code)s, %(supervisor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning classes.created_at, classes.last_modified_at]
[parameters: {'id': uuid('ae3fd2a2-015a-4a65-af10-240036166390'), 'level_id': uuid('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'b', 'supervisor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 02:28:56,871 - kademia - WARNING - UniqueViolationError | 4fc49724-785a-47c4-adb8-95ca2102200d | Duplicate class creation attempted: Unique constraint violation - Detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "classes_order_key"
detail:  key ("order")=(1) already exists.

[sql: insert into classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(id)s::uuid, %(level_id)s::uuid, %(code)s, %(supervisor_id)s::uuid, %(student_rep_id)s::uuid, %(assistant_rep_id)s::uuid, %(order)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning classes.created_at, classes.last_modified_at]
[parameters: {'id': uuid('ae3fd2a2-015a-4a65-af10-240036166390'), 'level_id': uuid('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'b', 'supervisor_id': none, 'student_rep_id': none, 'assistant_rep_id': none, 'order': 1, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 02:29:30,749 - kademia - INFO - Request started | e5445d4f-8d4f-4e4a-b907-aa64eb9868c9 | POST /api/v1/students/student_organization/
2025-03-19 02:29:30,751 - kademia - INFO - Request completed | e5445d4f-8d4f-4e4a-b907-aa64eb9868c9 | Status: 422 | Time: 0.002s
2025-03-19 02:29:39,802 - kademia - INFO - Request started | 71d6a6e7-bae0-44be-9611-4cdf22b71cad | POST /api/v1/students/student_organization/
2025-03-19 02:29:39,806 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:29:39,810 - sqlalchemy.engine.Engine - INFO - SELECT max(classes."order") AS max_1 
FROM classes 
WHERE classes.level_id = %(level_id_1)s::UUID
2025-03-19 02:29:39,811 - sqlalchemy.engine.Engine - INFO - [generated in 0.00074s] {'level_id_1': UUID('b7aeece1-55a8-41c2-bf8d-2f9d124366a1')}
2025-03-19 02:29:39,818 - sqlalchemy.engine.Engine - INFO - INSERT INTO classes (id, level_id, code, supervisor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(supervisor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at
2025-03-19 02:29:39,819 - sqlalchemy.engine.Engine - INFO - [cached since 252.3s ago] {'id': UUID('87159b49-3b94-40c0-b3ab-a7d190311b15'), 'level_id': UUID('b7aeece1-55a8-41c2-bf8d-2f9d124366a1'), 'code': 'B', 'supervisor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 2, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 02:29:39,837 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 02:29:39,841 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:29:39,844 - sqlalchemy.engine.Engine - INFO - SELECT classes.id, classes.level_id, classes.code, classes.supervisor_id, classes.student_rep_id, classes.assistant_rep_id, classes."order", classes.created_by, classes.last_modified_by, classes.created_at, classes.last_modified_at, classes.is_archived, classes.archived_at, classes.archive_reason, classes.archived_by 
FROM classes 
WHERE classes.id = %(pk_1)s::UUID
2025-03-19 02:29:39,845 - sqlalchemy.engine.Engine - INFO - [generated in 0.00064s] {'pk_1': UUID('87159b49-3b94-40c0-b3ab-a7d190311b15')}
2025-03-19 02:29:39,848 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:29:39,849 - kademia - INFO - Request completed | 71d6a6e7-bae0-44be-9611-4cdf22b71cad | Status: 201 | Time: 0.046s
2025-03-19 02:30:23,724 - kademia - INFO - Request started | 1cd500b8-1e81-42ce-a709-a1b8f54e2dd9 | GET /api/v1/students/student_organization/
2025-03-19 02:30:23,725 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:30:23,727 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = false ORDER BY classes."order" DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-19 02:30:23,728 - sqlalchemy.engine.Engine - INFO - [generated in 0.00083s] {'param_1': 50, 'param_2': 0}
2025-03-19 02:30:23,731 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:30:23,734 - kademia - INFO - Request completed | 1cd500b8-1e81-42ce-a709-a1b8f54e2dd9 | Status: 200 | Time: 0.010s
2025-03-19 02:31:31,606 - kademia - INFO - Application started
2025-03-19 02:31:35,106 - kademia - INFO - Request started | b8ad838c-9639-4c56-b970-ccaf6206e894 | GET /docs
2025-03-19 02:31:35,109 - kademia - INFO - Request completed | b8ad838c-9639-4c56-b970-ccaf6206e894 | Status: 200 | Time: 0.001s
2025-03-19 02:31:35,227 - kademia - INFO - Request started | 9f5940a2-eb34-4e7f-a859-57f769548d18 | GET /openapi.json
2025-03-19 02:31:35,312 - kademia - INFO - Request completed | 9f5940a2-eb34-4e7f-a859-57f769548d18 | Status: 200 | Time: 0.085s
2025-03-19 02:44:40,572 - kademia - INFO - Request started | 170792f6-a295-489c-b36b-7fed3ea0ea54 | GET /api/v1/students/student_organization/
2025-03-19 02:44:40,800 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-19 02:44:40,800 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 02:44:40,802 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-19 02:44:40,803 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 02:44:40,804 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-19 02:44:40,804 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-19 02:44:40,806 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:44:40,810 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = false ORDER BY classes."order" DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-19 02:44:40,811 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] {'param_1': 50, 'param_2': 0}
2025-03-19 02:44:40,817 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:44:40,820 - kademia - INFO - Request completed | 170792f6-a295-489c-b36b-7fed3ea0ea54 | Status: 200 | Time: 0.247s
2025-03-19 02:44:56,835 - kademia - INFO - Request started | cdd818b1-1df9-4e93-9f68-4e7691027364 | GET /api/v1/students/student_organization/6d3b633d-519a-4307-b042-2248f9d11d97
2025-03-19 02:44:56,839 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:44:56,840 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = false AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:44:56,841 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] {'id_1': UUID('6d3b633d-519a-4307-b042-2248f9d11d97'), 'param_1': 1}
2025-03-19 02:44:56,844 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:44:56,845 - kademia - INFO - Request completed | cdd818b1-1df9-4e93-9f68-4e7691027364 | Status: 200 | Time: 0.008s
2025-03-19 02:45:19,922 - kademia - INFO - Request started | be724abd-c3c2-4188-a8d0-174196158c8a | PUT /api/v1/students/student_organization/6d3b633d-519a-4307-b042-2248f9d11d97
2025-03-19 02:45:19,927 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:45:19,927 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = false AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:45:19,928 - sqlalchemy.engine.Engine - INFO - [cached since 23.09s ago] {'id_1': UUID('6d3b633d-519a-4307-b042-2248f9d11d97'), 'param_1': 1}
2025-03-19 02:45:19,935 - sqlalchemy.engine.Engine - INFO - UPDATE classes SET supervisor_id=%(supervisor_id)s::UUID, student_rep_id=%(student_rep_id)s::UUID, assistant_rep_id=%(assistant_rep_id)s::UUID, last_modified_at=now() WHERE classes.id = %(classes_id)s::UUID
2025-03-19 02:45:19,936 - sqlalchemy.engine.Engine - INFO - [generated in 0.00130s] {'supervisor_id': UUID('00000000-0000-0000-0000-000000000000'), 'student_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'assistant_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'classes_id': UUID('6d3b633d-519a-4307-b042-2248f9d11d97')}
2025-03-19 02:45:19,939 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:45:19,943 - kademia - ERROR - Unhandled exception | be724abd-c3c2-4188-a8d0-174196158c8a | Error during during fk insertion of Educator with id:00000000-0000-0000-0000-000000000000 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "classes" violates foreign key constraint "fk_classes_educators_mentor_id"
DETAIL:  Key (supervisor_id)=(00000000-0000-0000-0000-000000000000) is not present in table "educators".

[SQL: UPDATE classes SET supervisor_id=%(supervisor_id)s::UUID, student_rep_id=%(student_rep_id)s::UUID, assistant_rep_id=%(assistant_rep_id)s::UUID, last_modified_at=now() WHERE classes.id = %(classes_id)s::UUID]
[parameters: {'supervisor_id': UUID('00000000-0000-0000-0000-000000000000'), 'student_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'assistant_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'classes_id': UUID('6d3b633d-519a-4307-b042-2248f9d11d97')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\classes.py", line 36, in update_class
    return class_crud.update_class(class_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\classes.py", line 63, in update_class
    updated_class = self.factory.update_class(class_id, data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\classes.py", line 137, in update_class
    raise error_class(id=entity_id, detail=str(e), action='update')
app.core.errors.profile_errors.RelatedEducatorNotFoundError: Error during during fk insertion of Educator with id:00000000-0000-0000-0000-000000000000 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "classes" violates foreign key constraint "fk_classes_educators_mentor_id"
DETAIL:  Key (supervisor_id)=(00000000-0000-0000-0000-000000000000) is not present in table "educators".

[SQL: UPDATE classes SET supervisor_id=%(supervisor_id)s::UUID, student_rep_id=%(student_rep_id)s::UUID, assistant_rep_id=%(assistant_rep_id)s::UUID, last_modified_at=now() WHERE classes.id = %(classes_id)s::UUID]
[parameters: {'supervisor_id': UUID('00000000-0000-0000-0000-000000000000'), 'student_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'assistant_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'classes_id': UUID('6d3b633d-519a-4307-b042-2248f9d11d97')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 02:45:19,956 - kademia - WARNING - RelationshipError | be724abd-c3c2-4188-a8d0-174196158c8a | Error during during fk insertion of Educator with id:00000000-0000-0000-0000-000000000000 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "classes" violates foreign key constraint "fk_classes_educators_mentor_id"
DETAIL:  Key (supervisor_id)=(00000000-0000-0000-0000-000000000000) is not present in table "educators".

[SQL: UPDATE classes SET supervisor_id=%(supervisor_id)s::UUID, student_rep_id=%(student_rep_id)s::UUID, assistant_rep_id=%(assistant_rep_id)s::UUID, last_modified_at=now() WHERE classes.id = %(classes_id)s::UUID]
[parameters: {'supervisor_id': UUID('00000000-0000-0000-0000-000000000000'), 'student_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'assistant_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'classes_id': UUID('6d3b633d-519a-4307-b042-2248f9d11d97')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 02:46:26,581 - kademia - INFO - Request started | 6a21f179-8fb9-4354-8742-db7545637dea | PUT /api/v1/students/student_organization/6d3b633d-519a-4307-b042-2248f9d11d97
2025-03-19 02:46:26,585 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:46:26,585 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = false AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:46:26,586 - sqlalchemy.engine.Engine - INFO - [cached since 89.75s ago] {'id_1': UUID('6d3b633d-519a-4307-b042-2248f9d11d97'), 'param_1': 1}
2025-03-19 02:46:26,592 - sqlalchemy.engine.Engine - INFO - UPDATE classes SET student_rep_id=%(student_rep_id)s::UUID, assistant_rep_id=%(assistant_rep_id)s::UUID, last_modified_at=now() WHERE classes.id = %(classes_id)s::UUID
2025-03-19 02:46:26,593 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] {'student_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'assistant_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'classes_id': UUID('6d3b633d-519a-4307-b042-2248f9d11d97')}
2025-03-19 02:46:26,604 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:46:26,607 - kademia - ERROR - Unhandled exception | 6a21f179-8fb9-4354-8742-db7545637dea | Error during during fk insertion of student with id:00000000-0000-0000-0000-000000000000 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "classes" violates foreign key constraint "fk_classes_students_student_rep"
DETAIL:  Key (student_rep_id)=(00000000-0000-0000-0000-000000000000) is not present in table "students".

[SQL: UPDATE classes SET student_rep_id=%(student_rep_id)s::UUID, assistant_rep_id=%(assistant_rep_id)s::UUID, last_modified_at=now() WHERE classes.id = %(classes_id)s::UUID]
[parameters: {'student_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'assistant_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'classes_id': UUID('6d3b633d-519a-4307-b042-2248f9d11d97')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\classes.py", line 36, in update_class
    return class_crud.update_class(class_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\classes.py", line 63, in update_class
    updated_class = self.factory.update_class(class_id, data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\classes.py", line 137, in update_class
    raise error_class(id=entity_id, detail=str(e), action='update')
app.core.errors.profile_errors.RelatedStudentNotFoundError: Error during during fk insertion of student with id:00000000-0000-0000-0000-000000000000 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "classes" violates foreign key constraint "fk_classes_students_student_rep"
DETAIL:  Key (student_rep_id)=(00000000-0000-0000-0000-000000000000) is not present in table "students".

[SQL: UPDATE classes SET student_rep_id=%(student_rep_id)s::UUID, assistant_rep_id=%(assistant_rep_id)s::UUID, last_modified_at=now() WHERE classes.id = %(classes_id)s::UUID]
[parameters: {'student_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'assistant_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'classes_id': UUID('6d3b633d-519a-4307-b042-2248f9d11d97')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 02:46:26,613 - kademia - WARNING - RelationshipError | 6a21f179-8fb9-4354-8742-db7545637dea | Error during during fk insertion of student with id:00000000-0000-0000-0000-000000000000 during update operation. Detail Foreign key constraint violation during create operation. Detail: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(psycopg2.errors.ForeignKeyViolation) insert or update on table "classes" violates foreign key constraint "fk_classes_students_student_rep"
DETAIL:  Key (student_rep_id)=(00000000-0000-0000-0000-000000000000) is not present in table "students".

[SQL: UPDATE classes SET student_rep_id=%(student_rep_id)s::UUID, assistant_rep_id=%(assistant_rep_id)s::UUID, last_modified_at=now() WHERE classes.id = %(classes_id)s::UUID]
[parameters: {'student_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'assistant_rep_id': UUID('00000000-0000-0000-0000-000000000000'), 'classes_id': UUID('6d3b633d-519a-4307-b042-2248f9d11d97')}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-19 02:46:37,965 - kademia - INFO - Request started | 4d8a2ed9-176e-459c-bb4c-9ddf05dffb6a | PATCH /api/v1/students/student_organization/6d3b633d-519a-4307-b042-2248f9d11d97
2025-03-19 02:46:37,968 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:46:37,969 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = false AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:46:37,969 - sqlalchemy.engine.Engine - INFO - [cached since 101.1s ago] {'id_1': UUID('6d3b633d-519a-4307-b042-2248f9d11d97'), 'param_1': 1}
2025-03-19 02:46:37,974 - sqlalchemy.engine.Engine - INFO - UPDATE classes SET last_modified_at=now(), is_archived=%(is_archived)s, archived_at=%(archived_at)s, archive_reason=%(archive_reason)s, archived_by=%(archived_by)s::UUID WHERE classes.id = %(classes_id)s::UUID
2025-03-19 02:46:37,975 - sqlalchemy.engine.Engine - INFO - [generated in 0.00127s] {'is_archived': True, 'archived_at': datetime.datetime(2025, 3, 19, 2, 46, 37, 973684, tzinfo=datetime.timezone.utc), 'archive_reason': 'ERROR', 'archived_by': UUID('00000000-0000-0000-0000-000000000000'), 'classes_id': UUID('6d3b633d-519a-4307-b042-2248f9d11d97')}
2025-03-19 02:46:37,986 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 02:46:37,992 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:46:37,995 - sqlalchemy.engine.Engine - INFO - SELECT classes.id, classes.level_id, classes.code, classes.supervisor_id, classes.student_rep_id, classes.assistant_rep_id, classes."order", classes.created_by, classes.last_modified_by, classes.created_at, classes.last_modified_at, classes.is_archived, classes.archived_at, classes.archive_reason, classes.archived_by 
FROM classes 
WHERE classes.id = %(pk_1)s::UUID
2025-03-19 02:46:37,995 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] {'pk_1': UUID('6d3b633d-519a-4307-b042-2248f9d11d97')}
2025-03-19 02:46:37,997 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:46:37,997 - kademia - INFO - Request completed | 4d8a2ed9-176e-459c-bb4c-9ddf05dffb6a | Status: 204 | Time: 0.031s
2025-03-19 02:46:47,722 - kademia - INFO - Request started | 319dc9a7-8509-4b7e-b094-2a7c08aa0211 | GET /api/v1/students/student_organization/6d3b633d-519a-4307-b042-2248f9d11d97
2025-03-19 02:46:47,724 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:46:47,725 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = false AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:46:47,725 - sqlalchemy.engine.Engine - INFO - [cached since 110.9s ago] {'id_1': UUID('6d3b633d-519a-4307-b042-2248f9d11d97'), 'param_1': 1}
2025-03-19 02:46:47,727 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:46:47,729 - kademia - ERROR - Unhandled exception | 319dc9a7-8509-4b7e-b094-2a7c08aa0211 | Class with id:6d3b633d-519a-4307-b042-2248f9d11d97 not found. DETAIL: Classes not with id 6d3b633d-519a-4307-b042-2248f9d11d97 not found. DETAIL: Record not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\classes.py", line 30, in get_class
    return class_crud.get_class(class_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\classes.py", line 41, in get_class
    class_response = self.factory.get_class(class_id)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\classes.py", line 87, in get_class
    raise ClassNotFoundError(id=class_id, detail = str(e))
app.core.errors.student_organisation_errors.ClassNotFoundError: Class with id:6d3b633d-519a-4307-b042-2248f9d11d97 not found. DETAIL: Classes not with id 6d3b633d-519a-4307-b042-2248f9d11d97 not found. DETAIL: Record not found
2025-03-19 02:46:47,735 - kademia - WARNING - EntityNotFoundError | 319dc9a7-8509-4b7e-b094-2a7c08aa0211 | Class with id:6d3b633d-519a-4307-b042-2248f9d11d97 not found. DETAIL: Classes not with id 6d3b633d-519a-4307-b042-2248f9d11d97 not found. DETAIL: Record not found
2025-03-19 02:46:59,533 - kademia - INFO - Request started | 2020d948-e876-41ea-a7cf-5e728436e91e | GET /api/v1/archive/students/student_organization/
2025-03-19 02:46:59,535 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:46:59,536 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = true ORDER BY classes."order" DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-19 02:46:59,537 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] {'param_1': 50, 'param_2': 0}
2025-03-19 02:46:59,540 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:46:59,541 - kademia - INFO - Request completed | 2020d948-e876-41ea-a7cf-5e728436e91e | Status: 200 | Time: 0.009s
2025-03-19 02:47:08,754 - kademia - INFO - Request started | a125347a-22c2-4ffb-a8ea-2f381566f37f | GET /api/v1/archive/students/student_organization/6d3b633d-519a-4307-b042-2248f9d11d97
2025-03-19 02:47:08,756 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:47:08,757 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = true AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:47:08,759 - sqlalchemy.engine.Engine - INFO - [generated in 0.00159s] {'id_1': UUID('6d3b633d-519a-4307-b042-2248f9d11d97'), 'param_1': 1}
2025-03-19 02:47:08,763 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:47:08,764 - kademia - INFO - Request completed | a125347a-22c2-4ffb-a8ea-2f381566f37f | Status: 200 | Time: 0.010s
2025-03-19 02:47:18,954 - kademia - INFO - Request started | 92e1ced7-a08b-43a2-bf4f-0f56cef14b2e | PATCH /api/v1/archive/students/student_organization/6d3b633d-519a-4307-b042-2248f9d11d97
2025-03-19 02:47:18,955 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:47:18,956 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = true AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:47:18,957 - sqlalchemy.engine.Engine - INFO - [cached since 10.2s ago] {'id_1': UUID('6d3b633d-519a-4307-b042-2248f9d11d97'), 'param_1': 1}
2025-03-19 02:47:18,960 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = true AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:47:18,960 - sqlalchemy.engine.Engine - INFO - [cached since 10.2s ago] {'id_1': UUID('6d3b633d-519a-4307-b042-2248f9d11d97'), 'param_1': 1}
2025-03-19 02:47:18,964 - sqlalchemy.engine.Engine - INFO - UPDATE classes SET last_modified_at=now(), is_archived=%(is_archived)s WHERE classes.id = %(classes_id)s::UUID
2025-03-19 02:47:18,964 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] {'is_archived': False, 'classes_id': UUID('6d3b633d-519a-4307-b042-2248f9d11d97')}
2025-03-19 02:47:18,966 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 02:47:18,969 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:47:18,970 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.id = %(pk_1)s::UUID
2025-03-19 02:47:18,971 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] {'pk_1': UUID('6d3b633d-519a-4307-b042-2248f9d11d97')}
2025-03-19 02:47:18,977 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:47:18,978 - kademia - INFO - Request completed | 92e1ced7-a08b-43a2-bf4f-0f56cef14b2e | Status: 200 | Time: 0.024s
2025-03-19 02:47:29,633 - kademia - INFO - Request started | c92f2e43-b486-4e10-bc98-e6aad38d90fe | DELETE /api/v1/archive/students/student_organization/6d3b633d-519a-4307-b042-2248f9d11d97
2025-03-19 02:47:29,635 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:47:29,636 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = false AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:47:29,637 - sqlalchemy.engine.Engine - INFO - [cached since 152.8s ago] {'id_1': UUID('6d3b633d-519a-4307-b042-2248f9d11d97'), 'param_1': 1}
2025-03-19 02:47:29,646 - sqlalchemy.engine.Engine - INFO - SELECT students.student_id AS students_student_id, students.user_type AS students_user_type, students.access_level AS students_access_level, students.status AS students_status, students.date_of_birth AS students_date_of_birth, students.image_url AS students_image_url, students.class_id AS students_class_id, students.level_id AS students_level_id, students.department_id AS students_department_id, students.guardian_id AS students_guardian_id, students.is_repeating AS students_is_repeating, students.admission_date AS students_admission_date, students.date_left AS students_date_left, students.graduation_date AS students_graduation_date, students.id AS students_id, students.password_hash AS students_password_hash, students.first_name AS students_first_name, students.last_name AS students_last_name, students.gender AS students_gender, students.last_login AS students_last_login, students.deletion_eligible AS students_deletion_eligible, students.created_by AS students_created_by, students.last_modified_by AS students_last_modified_by, students.created_at AS students_created_at, students.last_modified_at AS students_last_modified_at, students.is_archived AS students_is_archived, students.archived_at AS students_archived_at, students.archive_reason AS students_archive_reason, students.archived_by AS students_archived_by 
FROM students 
WHERE %(param_1)s::UUID = students.class_id
2025-03-19 02:47:29,649 - sqlalchemy.engine.Engine - INFO - [generated in 0.00306s] {'param_1': UUID('6d3b633d-519a-4307-b042-2248f9d11d97')}
2025-03-19 02:47:29,653 - sqlalchemy.engine.Engine - INFO - DELETE FROM classes WHERE classes.id = %(id)s::UUID
2025-03-19 02:47:29,653 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] {'id': UUID('6d3b633d-519a-4307-b042-2248f9d11d97')}
2025-03-19 02:47:29,666 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 02:47:29,672 - kademia - INFO - Request completed | c92f2e43-b486-4e10-bc98-e6aad38d90fe | Status: 204 | Time: 0.039s
2025-03-19 02:48:05,526 - kademia - INFO - Request started | 19a8e5dc-9079-4cb1-bcf0-5220de7f314a | PATCH /api/v1/archive/students/student_organization/6d3b633d-519a-4307-b042-2248f9d11d97
2025-03-19 02:48:05,528 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:48:05,529 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = true AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:48:05,531 - sqlalchemy.engine.Engine - INFO - [cached since 56.77s ago] {'id_1': UUID('6d3b633d-519a-4307-b042-2248f9d11d97'), 'param_1': 1}
2025-03-19 02:48:05,533 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:48:05,534 - kademia - ERROR - Unhandled exception | 19a8e5dc-9079-4cb1-bcf0-5220de7f314a | Class with id:6d3b633d-519a-4307-b042-2248f9d11d97 not found. DETAIL: Class with id:6d3b633d-519a-4307-b042-2248f9d11d97 not found. DETAIL: Classes not with id 6d3b633d-519a-4307-b042-2248f9d11d97 not found. DETAIL: object not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\archived_classes.py", line 28, in restore_class
    return class_crud.restore_class(class_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\classes.py", line 114, in restore_class
    restored_class = self.factory.restore_class(class_id)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\classes.py", line 200, in restore_class
    raise ClassNotFoundError(id=class_id, detail = str(e))
app.core.errors.student_organisation_errors.ClassNotFoundError: Class with id:6d3b633d-519a-4307-b042-2248f9d11d97 not found. DETAIL: Class with id:6d3b633d-519a-4307-b042-2248f9d11d97 not found. DETAIL: Classes not with id 6d3b633d-519a-4307-b042-2248f9d11d97 not found. DETAIL: object not found
2025-03-19 02:48:05,544 - kademia - WARNING - EntityNotFoundError | 19a8e5dc-9079-4cb1-bcf0-5220de7f314a | Class with id:6d3b633d-519a-4307-b042-2248f9d11d97 not found. DETAIL: Class with id:6d3b633d-519a-4307-b042-2248f9d11d97 not found. DETAIL: Classes not with id 6d3b633d-519a-4307-b042-2248f9d11d97 not found. DETAIL: object not found
2025-03-19 02:48:36,422 - kademia - INFO - Request started | 7bd6ff19-9499-4d19-8385-d22cea0cdb68 | PATCH /api/v1/students/student_organization/87159b49-3b94-40c0-b3ab-a7d190311b15
2025-03-19 02:48:36,425 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:48:36,426 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = false AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:48:36,426 - sqlalchemy.engine.Engine - INFO - [cached since 219.6s ago] {'id_1': UUID('87159b49-3b94-40c0-b3ab-a7d190311b15'), 'param_1': 1}
2025-03-19 02:48:36,429 - sqlalchemy.engine.Engine - INFO - UPDATE classes SET last_modified_at=now(), is_archived=%(is_archived)s, archived_at=%(archived_at)s, archive_reason=%(archive_reason)s, archived_by=%(archived_by)s::UUID WHERE classes.id = %(classes_id)s::UUID
2025-03-19 02:48:36,429 - sqlalchemy.engine.Engine - INFO - [cached since 118.5s ago] {'is_archived': True, 'archived_at': datetime.datetime(2025, 3, 19, 2, 48, 36, 427751, tzinfo=datetime.timezone.utc), 'archive_reason': 'ERROR', 'archived_by': UUID('00000000-0000-0000-0000-000000000000'), 'classes_id': UUID('87159b49-3b94-40c0-b3ab-a7d190311b15')}
2025-03-19 02:48:36,431 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 02:48:36,434 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:48:36,434 - sqlalchemy.engine.Engine - INFO - SELECT classes.id, classes.level_id, classes.code, classes.supervisor_id, classes.student_rep_id, classes.assistant_rep_id, classes."order", classes.created_by, classes.last_modified_by, classes.created_at, classes.last_modified_at, classes.is_archived, classes.archived_at, classes.archive_reason, classes.archived_by 
FROM classes 
WHERE classes.id = %(pk_1)s::UUID
2025-03-19 02:48:36,437 - sqlalchemy.engine.Engine - INFO - [cached since 118.4s ago] {'pk_1': UUID('87159b49-3b94-40c0-b3ab-a7d190311b15')}
2025-03-19 02:48:36,438 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:48:36,439 - kademia - INFO - Request completed | 7bd6ff19-9499-4d19-8385-d22cea0cdb68 | Status: 204 | Time: 0.016s
2025-03-19 02:48:44,125 - kademia - INFO - Request started | 62bb0537-9361-48c6-8bba-4c3ebe8651a8 | GET /api/v1/students/student_organization/87159b49-3b94-40c0-b3ab-a7d190311b15
2025-03-19 02:48:44,127 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:48:44,127 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = false AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:48:44,128 - sqlalchemy.engine.Engine - INFO - [cached since 227.3s ago] {'id_1': UUID('87159b49-3b94-40c0-b3ab-a7d190311b15'), 'param_1': 1}
2025-03-19 02:48:44,130 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:48:44,131 - kademia - ERROR - Unhandled exception | 62bb0537-9361-48c6-8bba-4c3ebe8651a8 | Class with id:87159b49-3b94-40c0-b3ab-a7d190311b15 not found. DETAIL: Classes not with id 87159b49-3b94-40c0-b3ab-a7d190311b15 not found. DETAIL: Record not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\classes.py", line 30, in get_class
    return class_crud.get_class(class_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\classes.py", line 41, in get_class
    class_response = self.factory.get_class(class_id)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\classes.py", line 87, in get_class
    raise ClassNotFoundError(id=class_id, detail = str(e))
app.core.errors.student_organisation_errors.ClassNotFoundError: Class with id:87159b49-3b94-40c0-b3ab-a7d190311b15 not found. DETAIL: Classes not with id 87159b49-3b94-40c0-b3ab-a7d190311b15 not found. DETAIL: Record not found
2025-03-19 02:48:44,140 - kademia - WARNING - EntityNotFoundError | 62bb0537-9361-48c6-8bba-4c3ebe8651a8 | Class with id:87159b49-3b94-40c0-b3ab-a7d190311b15 not found. DETAIL: Classes not with id 87159b49-3b94-40c0-b3ab-a7d190311b15 not found. DETAIL: Record not found
2025-03-19 02:49:40,565 - kademia - INFO - Request started | 84b4001e-23a7-48c1-9037-242d0300c30d | PATCH /api/v1/students/student_organization/87159b49-3b94-40c0-b3ab-a7d190311b15
2025-03-19 02:49:40,568 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:49:40,569 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = false AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:49:40,570 - sqlalchemy.engine.Engine - INFO - [cached since 283.7s ago] {'id_1': UUID('87159b49-3b94-40c0-b3ab-a7d190311b15'), 'param_1': 1}
2025-03-19 02:49:40,571 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:49:40,573 - kademia - ERROR - Unhandled exception | 84b4001e-23a7-48c1-9037-242d0300c30d | Class with id:87159b49-3b94-40c0-b3ab-a7d190311b15 not found. DETAIL: Classes not with id 87159b49-3b94-40c0-b3ab-a7d190311b15 not found. DETAIL: object not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 81, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\student_organization\classes.py", line 42, in archive_class
    return class_crud.archive_class(class_id, reason.reason)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\student_organization\classes.py", line 74, in archive_class
    self.factory.archive_class(class_id, reason)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\student_organization\classes.py", line 153, in archive_class
    raise ClassNotFoundError(id=class_id, detail = str(e))
app.core.errors.student_organisation_errors.ClassNotFoundError: Class with id:87159b49-3b94-40c0-b3ab-a7d190311b15 not found. DETAIL: Classes not with id 87159b49-3b94-40c0-b3ab-a7d190311b15 not found. DETAIL: object not found
2025-03-19 02:49:40,577 - kademia - WARNING - EntityNotFoundError | 84b4001e-23a7-48c1-9037-242d0300c30d | Class with id:87159b49-3b94-40c0-b3ab-a7d190311b15 not found. DETAIL: Classes not with id 87159b49-3b94-40c0-b3ab-a7d190311b15 not found. DETAIL: object not found
2025-03-19 02:50:03,250 - kademia - INFO - Request started | a6858cd7-00fa-4430-99be-e222cd059032 | PATCH /api/v1/archive/students/student_organization/87159b49-3b94-40c0-b3ab-a7d190311b15
2025-03-19 02:50:03,252 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:50:03,252 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = true AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:50:03,253 - sqlalchemy.engine.Engine - INFO - [cached since 174.5s ago] {'id_1': UUID('87159b49-3b94-40c0-b3ab-a7d190311b15'), 'param_1': 1}
2025-03-19 02:50:03,256 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = true AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:50:03,257 - sqlalchemy.engine.Engine - INFO - [cached since 174.5s ago] {'id_1': UUID('87159b49-3b94-40c0-b3ab-a7d190311b15'), 'param_1': 1}
2025-03-19 02:50:03,261 - sqlalchemy.engine.Engine - INFO - UPDATE classes SET last_modified_at=now(), is_archived=%(is_archived)s WHERE classes.id = %(classes_id)s::UUID
2025-03-19 02:50:03,283 - sqlalchemy.engine.Engine - INFO - [cached since 164.3s ago] {'is_archived': False, 'classes_id': UUID('87159b49-3b94-40c0-b3ab-a7d190311b15')}
2025-03-19 02:50:03,288 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 02:50:03,294 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:50:03,295 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.id = %(pk_1)s::UUID
2025-03-19 02:50:03,300 - sqlalchemy.engine.Engine - INFO - [cached since 164.3s ago] {'pk_1': UUID('87159b49-3b94-40c0-b3ab-a7d190311b15')}
2025-03-19 02:50:03,302 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 02:50:03,303 - kademia - INFO - Request completed | a6858cd7-00fa-4430-99be-e222cd059032 | Status: 200 | Time: 0.053s
2025-03-19 02:50:12,002 - kademia - INFO - Request started | e1275db7-150f-423b-8abe-e2481623f73a | DELETE /api/v1/archive/students/student_organization/87159b49-3b94-40c0-b3ab-a7d190311b15
2025-03-19 02:50:12,004 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 02:50:12,005 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE classes.is_archived = false AND classes.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 02:50:12,005 - sqlalchemy.engine.Engine - INFO - [cached since 315.2s ago] {'id_1': UUID('87159b49-3b94-40c0-b3ab-a7d190311b15'), 'param_1': 1}
2025-03-19 02:50:12,008 - sqlalchemy.engine.Engine - INFO - SELECT students.student_id AS students_student_id, students.user_type AS students_user_type, students.access_level AS students_access_level, students.status AS students_status, students.date_of_birth AS students_date_of_birth, students.image_url AS students_image_url, students.class_id AS students_class_id, students.level_id AS students_level_id, students.department_id AS students_department_id, students.guardian_id AS students_guardian_id, students.is_repeating AS students_is_repeating, students.admission_date AS students_admission_date, students.date_left AS students_date_left, students.graduation_date AS students_graduation_date, students.id AS students_id, students.password_hash AS students_password_hash, students.first_name AS students_first_name, students.last_name AS students_last_name, students.gender AS students_gender, students.last_login AS students_last_login, students.deletion_eligible AS students_deletion_eligible, students.created_by AS students_created_by, students.last_modified_by AS students_last_modified_by, students.created_at AS students_created_at, students.last_modified_at AS students_last_modified_at, students.is_archived AS students_is_archived, students.archived_at AS students_archived_at, students.archive_reason AS students_archive_reason, students.archived_by AS students_archived_by 
FROM students 
WHERE %(param_1)s::UUID = students.class_id
2025-03-19 02:50:12,009 - sqlalchemy.engine.Engine - INFO - [cached since 162.4s ago] {'param_1': UUID('87159b49-3b94-40c0-b3ab-a7d190311b15')}
2025-03-19 02:50:12,012 - sqlalchemy.engine.Engine - INFO - DELETE FROM classes WHERE classes.id = %(id)s::UUID
2025-03-19 02:50:12,013 - sqlalchemy.engine.Engine - INFO - [cached since 162.4s ago] {'id': UUID('87159b49-3b94-40c0-b3ab-a7d190311b15')}
2025-03-19 02:50:12,015 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 02:50:12,019 - kademia - INFO - Request completed | e1275db7-150f-423b-8abe-e2481623f73a | Status: 204 | Time: 0.016s
2025-03-19 02:51:39,041 - kademia - INFO - Application started
2025-03-19 05:28:04,330 - kademia - INFO - Application started
2025-03-19 05:30:31,627 - kademia - INFO - Application started
2025-03-19 05:30:52,522 - kademia - INFO - Application started
2025-03-19 05:32:47,341 - kademia - INFO - Application started
2025-03-19 05:32:55,899 - kademia - INFO - Request started | 56ff4d65-a7f9-43c5-bd40-a18896dae70c | GET /docs
2025-03-19 05:32:55,901 - kademia - INFO - Request completed | 56ff4d65-a7f9-43c5-bd40-a18896dae70c | Status: 200 | Time: 0.001s
2025-03-19 05:32:56,023 - kademia - INFO - Request started | cc66e47a-dc38-4a5e-bebb-936b62832124 | GET /openapi.json
2025-03-19 05:32:56,173 - kademia - INFO - Request completed | cc66e47a-dc38-4a5e-bebb-936b62832124 | Status: 200 | Time: 0.149s
2025-03-19 05:33:50,837 - kademia - INFO - Application started
2025-03-19 05:33:52,918 - kademia - INFO - Request started | 40993d22-fcc1-418f-83cd-3498ffb4637f | GET /docs
2025-03-19 05:33:52,918 - kademia - INFO - Request completed | 40993d22-fcc1-418f-83cd-3498ffb4637f | Status: 200 | Time: 0.000s
2025-03-19 05:33:53,047 - kademia - INFO - Request started | f7fdbfcf-a7bf-40c2-8ebc-af2762bfc098 | GET /openapi.json
2025-03-19 05:33:53,200 - kademia - INFO - Request completed | f7fdbfcf-a7bf-40c2-8ebc-af2762bfc098 | Status: 200 | Time: 0.153s
2025-03-19 05:34:23,182 - kademia - INFO - Request started | afe97c63-c49a-4f79-aeeb-fa2a71622469 | POST /api/v1/token
2025-03-19 05:34:23,184 - kademia - INFO - Request completed | afe97c63-c49a-4f79-aeeb-fa2a71622469 | Status: 200 | Time: 0.002s
2025-03-19 05:37:57,289 - kademia - INFO - Application started
2025-03-19 05:39:26,534 - kademia - INFO - Request started | 5063d498-5b03-4c1f-ace2-fc38baaa9c30 | GET /docs
2025-03-19 05:39:26,537 - kademia - INFO - Request completed | 5063d498-5b03-4c1f-ace2-fc38baaa9c30 | Status: 200 | Time: 0.001s
2025-03-19 05:39:26,661 - kademia - INFO - Request started | f3bd1b42-961e-4490-880c-99e33f29e268 | GET /openapi.json
2025-03-19 05:39:26,805 - kademia - INFO - Request completed | f3bd1b42-961e-4490-880c-99e33f29e268 | Status: 200 | Time: 0.142s
2025-03-19 05:41:47,274 - kademia - INFO - Request started | 735b513d-ee19-4fd8-b4bd-c1eeb8eaff30 | GET /docs
2025-03-19 05:41:47,275 - kademia - INFO - Request completed | 735b513d-ee19-4fd8-b4bd-c1eeb8eaff30 | Status: 200 | Time: 0.000s
2025-03-19 05:41:47,536 - kademia - INFO - Request started | 8ac1b05b-b0a8-4a0c-9c24-5c87accc4863 | GET /openapi.json
2025-03-19 05:41:47,549 - kademia - INFO - Request completed | 8ac1b05b-b0a8-4a0c-9c24-5c87accc4863 | Status: 200 | Time: 0.007s
2025-03-19 05:41:58,604 - kademia - INFO - Request started | 71c760c1-b3e5-4dda-bd0c-ac6133a338aa | POST /api/v1/token
2025-03-19 05:41:58,606 - kademia - INFO - Request completed | 71c760c1-b3e5-4dda-bd0c-ac6133a338aa | Status: 200 | Time: 0.002s
2025-03-19 05:42:45,798 - kademia - INFO - Request started | a8d49e84-7409-4dbc-a5e1-cc16a57f3721 | GET /docs
2025-03-19 05:42:45,799 - kademia - INFO - Request completed | a8d49e84-7409-4dbc-a5e1-cc16a57f3721 | Status: 200 | Time: 0.000s
2025-03-19 05:42:45,945 - kademia - INFO - Request started | 7f889edc-c397-46f4-91d6-60faa4656ec5 | GET /openapi.json
2025-03-19 05:42:45,947 - kademia - INFO - Request completed | 7f889edc-c397-46f4-91d6-60faa4656ec5 | Status: 200 | Time: 0.002s
2025-03-19 05:45:15,676 - kademia - INFO - Request started | 86e54501-d7b1-4cbb-bac2-595bdd1a0a10 | GET /docs
2025-03-19 05:45:15,677 - kademia - INFO - Request completed | 86e54501-d7b1-4cbb-bac2-595bdd1a0a10 | Status: 200 | Time: 0.000s
2025-03-19 05:45:15,824 - kademia - INFO - Request started | 0ea4b995-cae6-4985-8ad9-727e88d6b3e8 | GET /openapi.json
2025-03-19 05:45:15,826 - kademia - INFO - Request completed | 0ea4b995-cae6-4985-8ad9-727e88d6b3e8 | Status: 200 | Time: 0.001s
2025-03-19 05:46:02,193 - kademia - INFO - Request started | 7a148997-610e-468a-9752-ae2c4fc91804 | GET /docs
2025-03-19 05:46:02,194 - kademia - INFO - Request completed | 7a148997-610e-468a-9752-ae2c4fc91804 | Status: 200 | Time: 0.000s
2025-03-19 05:46:02,332 - kademia - INFO - Request started | 0fc214a6-29b4-43ef-b8f6-4f4791333cfd | GET /openapi.json
2025-03-19 05:46:02,334 - kademia - INFO - Request completed | 0fc214a6-29b4-43ef-b8f6-4f4791333cfd | Status: 200 | Time: 0.001s
2025-03-19 05:46:39,298 - kademia - INFO - Application started
2025-03-19 05:46:46,231 - kademia - INFO - Request started | 436ee0e8-4337-4128-9f1f-a1186141e4d3 | GET /docs
2025-03-19 05:46:46,232 - kademia - INFO - Request completed | 436ee0e8-4337-4128-9f1f-a1186141e4d3 | Status: 200 | Time: 0.001s
2025-03-19 05:46:46,417 - kademia - INFO - Request started | 1e32631a-8859-476a-910b-23257bdf2f3e | GET /openapi.json
2025-03-19 05:46:46,540 - kademia - INFO - Request completed | 1e32631a-8859-476a-910b-23257bdf2f3e | Status: 200 | Time: 0.123s
2025-03-19 05:46:59,120 - kademia - INFO - Request started | cf6094ff-42e7-4ff2-a04c-1238850c610e | POST /api/v1/auth/token
2025-03-19 05:46:59,126 - kademia - INFO - Request completed | cf6094ff-42e7-4ff2-a04c-1238850c610e | Status: 200 | Time: 0.006s
2025-03-19 05:54:45,148 - kademia - INFO - Application started
2025-03-19 05:57:23,799 - kademia - INFO - Application started
2025-03-19 06:04:25,207 - kademia - INFO - Application started
2025-03-19 06:05:17,775 - kademia - INFO - Request started | 0828366d-0af9-46f0-aea2-d2dfc53a6f49 | GET /docs
2025-03-19 06:05:17,777 - kademia - INFO - Request completed | 0828366d-0af9-46f0-aea2-d2dfc53a6f49 | Status: 200 | Time: 0.001s
2025-03-19 06:05:17,930 - kademia - INFO - Request started | 5598f942-f293-4221-9ccf-5e543a17c15e | GET /openapi.json
2025-03-19 06:05:18,077 - kademia - INFO - Request completed | 5598f942-f293-4221-9ccf-5e543a17c15e | Status: 200 | Time: 0.146s
2025-03-19 06:05:35,656 - kademia - INFO - Request started | ace54c8a-6385-48a9-9f29-121dc2906838 | POST /api/v1/auth/token
2025-03-19 06:05:35,662 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 06:05:35,668 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.email_address = %(email_address_1)s 
 LIMIT %(param_1)s
2025-03-19 06:05:35,670 - sqlalchemy.engine.Engine - INFO - [generated in 0.00143s] {'email_address_1': 'string', 'param_1': 1}
2025-03-19 06:05:35,682 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 06:05:35,684 - kademia - INFO - Request completed | ace54c8a-6385-48a9-9f29-121dc2906838 | Status: 200 | Time: 0.027s
2025-03-19 06:06:12,387 - kademia - INFO - Request started | 255e6ef8-4ae4-4f98-8d35-1bd935b4d564 | GET /docs
2025-03-19 06:06:12,388 - kademia - INFO - Request completed | 255e6ef8-4ae4-4f98-8d35-1bd935b4d564 | Status: 200 | Time: 0.001s
2025-03-19 06:06:12,530 - kademia - INFO - Request started | 11ad2836-c3b2-4a67-803c-fe1ee128361a | GET /openapi.json
2025-03-19 06:06:12,533 - kademia - INFO - Request completed | 11ad2836-c3b2-4a67-803c-fe1ee128361a | Status: 200 | Time: 0.002s
2025-03-19 06:06:15,395 - kademia - INFO - Request started | 1989903d-e706-4cae-95d8-3de0b916ee75 | GET /docs
2025-03-19 06:06:15,396 - kademia - INFO - Request completed | 1989903d-e706-4cae-95d8-3de0b916ee75 | Status: 200 | Time: 0.000s
2025-03-19 06:06:15,482 - kademia - INFO - Request started | d8842aa9-0503-45d4-a1bd-facd6cac262f | GET /openapi.json
2025-03-19 06:06:15,485 - kademia - INFO - Request completed | d8842aa9-0503-45d4-a1bd-facd6cac262f | Status: 200 | Time: 0.003s
2025-03-19 06:08:09,079 - kademia - INFO - Application started
2025-03-19 06:08:11,832 - kademia - INFO - Request started | 639fe77f-ab21-44cf-9a05-6984b72ec89c | GET /docs
2025-03-19 06:08:11,834 - kademia - INFO - Request completed | 639fe77f-ab21-44cf-9a05-6984b72ec89c | Status: 200 | Time: 0.001s
2025-03-19 06:08:11,970 - kademia - INFO - Request started | a2c02eda-9a42-4877-a2dc-936185b4ac20 | GET /openapi.json
2025-03-19 06:08:12,040 - kademia - INFO - Request completed | a2c02eda-9a42-4877-a2dc-936185b4ac20 | Status: 200 | Time: 0.070s
2025-03-19 06:08:14,388 - kademia - INFO - Request started | cce4439b-3c27-4691-80ea-acf126b17872 | GET /docs
2025-03-19 06:08:14,390 - kademia - INFO - Request completed | cce4439b-3c27-4691-80ea-acf126b17872 | Status: 200 | Time: 0.000s
2025-03-19 06:08:14,491 - kademia - INFO - Request started | fc3abf7f-f763-4804-9235-bf83de154cab | GET /openapi.json
2025-03-19 06:08:14,495 - kademia - INFO - Request completed | fc3abf7f-f763-4804-9235-bf83de154cab | Status: 200 | Time: 0.004s
2025-03-19 06:08:46,815 - kademia - INFO - Request started | aac16d38-efc4-4f7a-9d36-69fb6ad11e23 | GET /docs
2025-03-19 06:08:46,816 - kademia - INFO - Request completed | aac16d38-efc4-4f7a-9d36-69fb6ad11e23 | Status: 200 | Time: 0.000s
2025-03-19 06:08:46,958 - kademia - INFO - Request started | 2ed39c01-f669-43b8-96be-02e79ed84296 | GET /openapi.json
2025-03-19 06:08:46,959 - kademia - INFO - Request completed | 2ed39c01-f669-43b8-96be-02e79ed84296 | Status: 200 | Time: 0.001s
2025-03-19 06:08:48,306 - kademia - INFO - Request started | 434389d8-257f-4dcb-87b7-6b8621fee4a0 | GET /docs
2025-03-19 06:08:48,307 - kademia - INFO - Request completed | 434389d8-257f-4dcb-87b7-6b8621fee4a0 | Status: 200 | Time: 0.001s
2025-03-19 06:08:48,428 - kademia - INFO - Request started | c21bab97-e1e0-4e8f-9e1a-95e7695e8771 | GET /openapi.json
2025-03-19 06:08:48,432 - kademia - INFO - Request completed | c21bab97-e1e0-4e8f-9e1a-95e7695e8771 | Status: 200 | Time: 0.003s
2025-03-19 06:11:48,820 - kademia - INFO - Application started
2025-03-19 06:11:49,473 - kademia - INFO - Request started | 307af7d4-fda7-41a5-bf26-ec02a436a258 | GET /
2025-03-19 06:11:49,476 - kademia - INFO - Request completed | 307af7d4-fda7-41a5-bf26-ec02a436a258 | Status: 200 | Time: 0.002s
2025-03-19 06:11:49,713 - kademia - INFO - Request started | c57011f3-4803-4160-a045-7bab5e2424b5 | GET /favicon.ico
2025-03-19 06:11:49,715 - kademia - INFO - Request completed | c57011f3-4803-4160-a045-7bab5e2424b5 | Status: 404 | Time: 0.001s
2025-03-19 06:11:56,555 - kademia - INFO - Request started | d6eb36cd-e061-4763-afc1-516fe9a7d294 | GET /
2025-03-19 06:11:56,556 - kademia - INFO - Request completed | d6eb36cd-e061-4763-afc1-516fe9a7d294 | Status: 200 | Time: 0.001s
2025-03-19 06:12:00,463 - kademia - INFO - Request started | 9a8aa401-975e-4e3a-a774-86133f590da6 | GET /docs
2025-03-19 06:12:00,464 - kademia - INFO - Request completed | 9a8aa401-975e-4e3a-a774-86133f590da6 | Status: 200 | Time: 0.000s
2025-03-19 06:12:00,676 - kademia - INFO - Request started | 37ac7278-67f7-4463-a4e1-18112be0bebc | GET /openapi.json
2025-03-19 06:12:00,871 - kademia - INFO - Request completed | 37ac7278-67f7-4463-a4e1-18112be0bebc | Status: 200 | Time: 0.195s
2025-03-19 06:13:03,656 - kademia - INFO - Request started | 50ea999f-955c-4d0e-9438-f474428bbb02 | POST /api/v1/staff/
2025-03-19 06:13:04,034 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 06:13:04,040 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-19 06:13:04,043 - sqlalchemy.engine.Engine - INFO - [generated in 0.00363s] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'Aina.Folu@Example.Com', 'address': '456 Allen Avenue, Lagos', 'phone': '08087654321', 'department_id': UUID('00000000-0000-0000-0000-000000000001'), 'role_id': UUID('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('609165b6-a1d6-4087-bf14-7de586e6d1ac'), 'password_hash': '$2b$12$ryvujImhTB50/BV5g9zTZeqTkrMjcQjxHYitN1r4m6./DnbHQ9PPW', 'first_name': 'Aina', 'last_name': 'Folu', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 06:13:04,049 - sqlalchemy.engine.Engine - INFO - INSERT INTO educators (id) VALUES (%(id)s::UUID)
2025-03-19 06:13:04,049 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] {'id': UUID('609165b6-a1d6-4087-bf14-7de586e6d1ac')}
2025-03-19 06:13:04,063 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 06:13:04,067 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 06:13:04,077 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-19 06:13:04,091 - sqlalchemy.engine.Engine - INFO - [generated in 0.01481s] {'pk_1': UUID('609165b6-a1d6-4087-bf14-7de586e6d1ac')}
2025-03-19 06:13:04,099 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 06:13:04,101 - kademia - INFO - Request completed | 50ea999f-955c-4d0e-9438-f474428bbb02 | Status: 201 | Time: 0.444s
2025-03-19 06:13:58,920 - kademia - INFO - Application started
2025-03-19 06:14:54,718 - kademia - INFO - Application started
2025-03-19 06:15:54,803 - kademia - INFO - Request started | 7c3ee9ad-b930-40fa-b00e-1b53a906cbd4 | DELETE /api/v1/staff/609165b6-a1d6-4087-bf14-7de586e6d1ac
2025-03-19 06:15:54,809 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 06:15:54,817 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 06:15:54,818 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] {'id_1': UUID('609165b6-a1d6-4087-bf14-7de586e6d1ac'), 'param_1': 1}
2025-03-19 06:15:54,830 - sqlalchemy.engine.Engine - INFO - SELECT educator_qualifications.id AS educator_qualifications_id, educator_qualifications.educator_id AS educator_qualifications_educator_id, educator_qualifications.name AS educator_qualifications_name, educator_qualifications.description AS educator_qualifications_description, educator_qualifications.created_by AS educator_qualifications_created_by, educator_qualifications.last_modified_by AS educator_qualifications_last_modified_by, educator_qualifications.created_at AS educator_qualifications_created_at, educator_qualifications.last_modified_at AS educator_qualifications_last_modified_at, educator_qualifications.is_archived AS educator_qualifications_is_archived, educator_qualifications.archived_at AS educator_qualifications_archived_at, educator_qualifications.archive_reason AS educator_qualifications_archive_reason, educator_qualifications.archived_by AS educator_qualifications_archived_by 
FROM educator_qualifications 
WHERE %(param_1)s::UUID = educator_qualifications.educator_id
2025-03-19 06:15:54,831 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] {'param_1': UUID('609165b6-a1d6-4087-bf14-7de586e6d1ac')}
2025-03-19 06:15:54,845 - sqlalchemy.engine.Engine - INFO - SELECT subject_educators.id AS subject_educators_id, subject_educators.subject_id AS subject_educators_subject_id, subject_educators.educator_id AS subject_educators_educator_id, subject_educators.level_id AS subject_educators_level_id, subject_educators.academic_year AS subject_educators_academic_year, subject_educators.term AS subject_educators_term, subject_educators.is_active AS subject_educators_is_active, subject_educators.date_assigned AS subject_educators_date_assigned, subject_educators.created_by AS subject_educators_created_by, subject_educators.last_modified_by AS subject_educators_last_modified_by, subject_educators.created_at AS subject_educators_created_at, subject_educators.last_modified_at AS subject_educators_last_modified_at, subject_educators.is_archived AS subject_educators_is_archived, subject_educators.archived_at AS subject_educators_archived_at, subject_educators.archive_reason AS subject_educators_archive_reason, subject_educators.archived_by AS subject_educators_archived_by 
FROM subject_educators 
WHERE %(param_1)s::UUID = subject_educators.educator_id
2025-03-19 06:15:54,846 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] {'param_1': UUID('609165b6-a1d6-4087-bf14-7de586e6d1ac')}
2025-03-19 06:15:54,855 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE %(param_1)s::UUID = student_departments.mentor_id
2025-03-19 06:15:54,855 - sqlalchemy.engine.Engine - INFO - [generated in 0.00096s] {'param_1': UUID('609165b6-a1d6-4087-bf14-7de586e6d1ac')}
2025-03-19 06:15:54,865 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE %(param_1)s::UUID = classes.supervisor_id
2025-03-19 06:15:54,866 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] {'param_1': UUID('609165b6-a1d6-4087-bf14-7de586e6d1ac')}
2025-03-19 06:15:54,875 - sqlalchemy.engine.Engine - INFO - SELECT access_level_changes.id AS access_level_changes_id, access_level_changes.staff_id AS access_level_changes_staff_id, access_level_changes.previous_level AS access_level_changes_previous_level, access_level_changes.new_level AS access_level_changes_new_level, access_level_changes.reason AS access_level_changes_reason, access_level_changes.changed_at AS access_level_changes_changed_at, access_level_changes.changed_by_id AS access_level_changes_changed_by_id 
FROM access_level_changes 
WHERE %(param_1)s::UUID = access_level_changes.staff_id
2025-03-19 06:15:54,877 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] {'param_1': UUID('609165b6-a1d6-4087-bf14-7de586e6d1ac')}
2025-03-19 06:15:54,884 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.created_by
2025-03-19 06:15:54,884 - sqlalchemy.engine.Engine - INFO - [generated in 0.00097s] {'param_1': UUID('609165b6-a1d6-4087-bf14-7de586e6d1ac')}
2025-03-19 06:15:54,889 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.last_modified_by
2025-03-19 06:15:54,889 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] {'param_1': UUID('609165b6-a1d6-4087-bf14-7de586e6d1ac')}
2025-03-19 06:15:54,894 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.archived_by
2025-03-19 06:15:54,894 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] {'param_1': UUID('609165b6-a1d6-4087-bf14-7de586e6d1ac')}
2025-03-19 06:15:54,898 - sqlalchemy.engine.Engine - INFO - DELETE FROM educators WHERE educators.id = %(id)s::UUID
2025-03-19 06:15:54,899 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] {'id': UUID('609165b6-a1d6-4087-bf14-7de586e6d1ac')}
2025-03-19 06:15:54,906 - sqlalchemy.engine.Engine - INFO - DELETE FROM staff WHERE staff.id = %(id)s::UUID
2025-03-19 06:15:54,907 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] {'id': UUID('609165b6-a1d6-4087-bf14-7de586e6d1ac')}
2025-03-19 06:15:54,908 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 06:15:54,912 - kademia - INFO - Request completed | 7c3ee9ad-b930-40fa-b00e-1b53a906cbd4 | Status: 204 | Time: 0.109s
2025-03-19 06:16:11,454 - kademia - INFO - Request started | 2b3b3d0e-2460-49d8-8bf4-07fb5a9ed06b | POST /api/v1/staff/
2025-03-19 06:16:11,752 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 06:16:11,754 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-19 06:16:11,756 - sqlalchemy.engine.Engine - INFO - [generated in 0.00167s] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'Aina.Folu@Example.Com', 'address': '456 Allen Avenue, Lagos', 'phone': '08087654321', 'department_id': UUID('00000000-0000-0000-0000-000000000001'), 'role_id': UUID('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('555898c3-bb19-4c60-9f91-7d0a5166c49b'), 'password_hash': '$2b$12$KMaBOyy6xEZUHAkrxbXlD.PeFjz4oVnaG0gofU96KIaQAsa9rI3bO', 'first_name': 'Aina', 'last_name': 'pIEG0%FvRa', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 06:16:11,760 - sqlalchemy.engine.Engine - INFO - INSERT INTO educators (id) VALUES (%(id)s::UUID)
2025-03-19 06:16:11,760 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] {'id': UUID('555898c3-bb19-4c60-9f91-7d0a5166c49b')}
2025-03-19 06:16:11,762 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 06:16:11,764 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 06:16:11,767 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-19 06:16:11,768 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] {'pk_1': UUID('555898c3-bb19-4c60-9f91-7d0a5166c49b')}
2025-03-19 06:16:11,771 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 06:16:11,772 - kademia - INFO - Request completed | 2b3b3d0e-2460-49d8-8bf4-07fb5a9ed06b | Status: 201 | Time: 0.318s
2025-03-19 06:17:52,187 - kademia - INFO - Request started | b4913d56-be0c-43e0-87e2-7f1e2a9c20b3 | POST /api/v1/auth/login
2025-03-19 06:17:52,193 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 06:17:52,196 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.email_address = %(email_address_1)s 
 LIMIT %(param_1)s
2025-03-19 06:17:52,197 - sqlalchemy.engine.Engine - INFO - [generated in 0.00113s] {'email_address_1': 'Aina.Folu@Example.Com', 'param_1': 1}
2025-03-19 06:17:52,458 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 06:17:52,459 - kademia - INFO - Request completed | b4913d56-be0c-43e0-87e2-7f1e2a9c20b3 | Status: 200 | Time: 0.273s
2025-03-19 06:57:34,087 - kademia - INFO - Application started
2025-03-19 06:58:28,434 - kademia - INFO - Application started
2025-03-19 07:00:10,071 - kademia - INFO - Application started
2025-03-19 07:01:45,360 - kademia - INFO - Application started
2025-03-19 07:07:45,644 - kademia - INFO - Application started
2025-03-19 07:09:56,520 - kademia - INFO - Application started
2025-03-19 07:10:16,752 - kademia - INFO - Application started
2025-03-19 07:10:28,540 - kademia - INFO - Application started
2025-03-19 07:11:27,755 - kademia - INFO - Application started
2025-03-19 07:21:56,459 - kademia - INFO - Application started
2025-03-19 07:22:59,256 - kademia - INFO - Application started
2025-03-19 07:23:22,979 - kademia - INFO - Application started
2025-03-19 07:23:53,977 - kademia - INFO - Application started
2025-03-19 07:24:09,189 - kademia - INFO - Application started
2025-03-19 07:25:18,548 - kademia - INFO - Application started
2025-03-19 07:25:38,508 - kademia - INFO - Application started
2025-03-19 07:27:51,189 - kademia - INFO - Application started
2025-03-19 07:28:09,526 - kademia - INFO - Application started
2025-03-19 07:28:34,150 - kademia - INFO - Application started
2025-03-19 07:30:54,638 - kademia - INFO - Application started
2025-03-19 07:32:58,256 - kademia - INFO - Application started
2025-03-19 07:33:28,418 - kademia - INFO - Application started
2025-03-19 07:36:27,433 - kademia - INFO - Application started
2025-03-19 07:37:08,562 - kademia - INFO - Application started
2025-03-19 07:37:31,611 - kademia - INFO - Application started
2025-03-19 07:38:41,323 - kademia - INFO - Application started
2025-03-19 07:40:44,874 - kademia - INFO - Application started
2025-03-19 07:43:15,544 - kademia - INFO - Application started
2025-03-19 07:43:35,365 - kademia - INFO - Application started
2025-03-19 07:47:31,318 - kademia - INFO - Application started
2025-03-19 07:48:20,121 - kademia - INFO - Application started
2025-03-19 07:48:46,915 - kademia - INFO - Application started
2025-03-19 07:50:50,450 - kademia - INFO - Application started
2025-03-19 07:52:00,341 - kademia - INFO - Application started
2025-03-19 07:53:28,464 - kademia - INFO - Application started
2025-03-19 07:54:59,467 - kademia - INFO - Application started
2025-03-19 07:56:20,030 - kademia - INFO - Application started
2025-03-19 07:58:05,210 - kademia - INFO - Application started
2025-03-19 07:58:21,516 - kademia - INFO - Application started
2025-03-19 07:58:55,649 - kademia - INFO - Application started
2025-03-19 07:59:08,001 - kademia - INFO - Application started
2025-03-19 07:59:23,405 - kademia - INFO - Application started
2025-03-19 07:59:27,285 - kademia - INFO - Application started
2025-03-19 08:00:45,499 - kademia - INFO - Application started
2025-03-19 08:02:01,213 - kademia - INFO - Application started
2025-03-19 08:02:08,202 - kademia - INFO - Application started
2025-03-19 08:04:59,469 - kademia - INFO - Application started
2025-03-19 08:05:18,411 - kademia - INFO - Application started
2025-03-19 08:06:04,577 - kademia - INFO - Application started
2025-03-19 08:11:00,632 - kademia - INFO - Application started
2025-03-19 08:12:02,560 - kademia - INFO - Application started
2025-03-19 08:12:31,095 - kademia - INFO - Application started
2025-03-19 08:13:29,067 - kademia - INFO - Application started
2025-03-19 08:19:03,846 - kademia - INFO - Application started
2025-03-19 08:21:04,613 - kademia - INFO - Application started
2025-03-19 08:38:41,545 - kademia - INFO - Application started
2025-03-19 09:22:07,316 - kademia - INFO - Application started
2025-03-19 09:22:58,355 - kademia - INFO - Application started
2025-03-19 09:23:40,335 - kademia - INFO - Request started | 9c722ac1-2455-439a-ac00-05a05318a98f | POST /api/v1/auth/login
2025-03-19 09:23:40,342 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 09:23:40,354 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.email_address = %(email_address_1)s 
 LIMIT %(param_1)s
2025-03-19 09:23:40,357 - sqlalchemy.engine.Engine - INFO - [generated in 0.00275s] {'email_address_1': 'Aina.Folu@Example.Com', 'param_1': 1}
2025-03-19 09:23:40,921 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 09:23:40,923 - kademia - INFO - Request completed | 9c722ac1-2455-439a-ac00-05a05318a98f | Status: 200 | Time: 0.588s
2025-03-19 09:23:42,191 - kademia - INFO - Request started | a26b5cec-64bd-48f1-9820-3f26d3c9e048 | GET /docs
2025-03-19 09:23:42,193 - kademia - INFO - Request completed | a26b5cec-64bd-48f1-9820-3f26d3c9e048 | Status: 200 | Time: 0.001s
2025-03-19 09:23:42,388 - kademia - INFO - Request started | e1badb29-6b44-47c9-a136-125b514696ec | GET /openapi.json
2025-03-19 09:23:42,540 - kademia - INFO - Request completed | e1badb29-6b44-47c9-a136-125b514696ec | Status: 200 | Time: 0.152s
2025-03-19 09:24:21,381 - kademia - INFO - Application started
2025-03-19 09:24:21,552 - kademia - INFO - Application started
2025-03-19 09:24:23,323 - kademia - INFO - Request started | d2349f52-656a-450e-be75-6ecc63789f84 | POST /api/v1/auth/login
2025-03-19 09:24:23,329 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 09:24:23,336 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.email_address = %(email_address_1)s 
 LIMIT %(param_1)s
2025-03-19 09:24:23,337 - sqlalchemy.engine.Engine - INFO - [generated in 0.00192s] {'email_address_1': 'aina.folu@example.com', 'param_1': 1}
2025-03-19 09:24:23,350 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 09:24:23,353 - kademia - INFO - Request completed | d2349f52-656a-450e-be75-6ecc63789f84 | Status: 401 | Time: 0.030s
2025-03-19 09:25:53,157 - kademia - INFO - Request started | 1416c3b5-39c8-4d93-abcb-33f754b33a49 | POST /api/v1/auth/login
2025-03-19 09:25:53,159 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 09:25:53,160 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.email_address = %(email_address_1)s 
 LIMIT %(param_1)s
2025-03-19 09:25:53,161 - sqlalchemy.engine.Engine - INFO - [cached since 89.83s ago] {'email_address_1': 'Aina.Folu@Example.Com', 'param_1': 1}
2025-03-19 09:25:53,572 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 09:25:53,573 - kademia - ERROR - Unhandled exception | 1416c3b5-39c8-4d93-abcb-33f754b33a49 | 'bool' object has no attribute 'email'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 88, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\auth\staff_auth.py", line 32, in login
    'email': staff.email,
             ^^^^^^^^^^^
AttributeError: 'bool' object has no attribute 'email'
2025-03-19 09:25:53,593 - kademia - ERROR - Unhandled exception | 1416c3b5-39c8-4d93-abcb-33f754b33a49 | 'bool' object has no attribute 'email'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 88, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\auth\staff_auth.py", line 32, in login
    'email': staff.email,
             ^^^^^^^^^^^
AttributeError: 'bool' object has no attribute 'email'
2025-03-19 09:26:53,498 - kademia - INFO - Application started
2025-03-19 09:26:53,699 - kademia - INFO - Application started
2025-03-19 09:27:11,111 - kademia - INFO - Request started | 054dc2bc-f72b-4897-8922-f6373a1f67ad | GET /docs
2025-03-19 09:27:11,112 - kademia - INFO - Request completed | 054dc2bc-f72b-4897-8922-f6373a1f67ad | Status: 200 | Time: 0.001s
2025-03-19 09:27:11,246 - kademia - INFO - Request started | edd9e4b4-339c-4c08-91ed-c6945e30ced8 | GET /openapi.json
2025-03-19 09:27:11,420 - kademia - INFO - Request completed | edd9e4b4-339c-4c08-91ed-c6945e30ced8 | Status: 200 | Time: 0.173s
2025-03-19 09:27:25,001 - kademia - INFO - Request started | a318227d-f645-449b-adff-6b171f5a4b79 | POST /api/v1/auth/login
2025-03-19 09:27:25,005 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 09:27:25,010 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.email_address = %(email_address_1)s 
 LIMIT %(param_1)s
2025-03-19 09:27:25,011 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] {'email_address_1': 'Aina.Folu@Example.Com', 'param_1': 1}
2025-03-19 09:27:25,481 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 09:27:25,484 - kademia - ERROR - Unhandled exception | a318227d-f645-449b-adff-6b171f5a4b79 | 'bool' object has no attribute 'email_address'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 88, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\auth\staff_auth.py", line 32, in login
    'email': staff.email_address,
             ^^^^^^^^^^^^^^^^^^^
AttributeError: 'bool' object has no attribute 'email_address'
2025-03-19 09:27:25,507 - kademia - ERROR - Unhandled exception | a318227d-f645-449b-adff-6b171f5a4b79 | 'bool' object has no attribute 'email_address'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 88, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\auth\staff_auth.py", line 32, in login
    'email': staff.email_address,
             ^^^^^^^^^^^^^^^^^^^
AttributeError: 'bool' object has no attribute 'email_address'
2025-03-19 09:28:09,822 - kademia - INFO - Application started
2025-03-19 09:28:10,011 - kademia - INFO - Application started
2025-03-19 09:28:17,234 - kademia - INFO - Request started | 35a38374-1051-4c29-88a6-58395b16c923 | GET /docs
2025-03-19 09:28:17,236 - kademia - INFO - Request completed | 35a38374-1051-4c29-88a6-58395b16c923 | Status: 200 | Time: 0.001s
2025-03-19 09:28:17,350 - kademia - INFO - Request started | bbbd733e-aed1-455a-9791-6602feabfa67 | GET /openapi.json
2025-03-19 09:28:17,541 - kademia - INFO - Request completed | bbbd733e-aed1-455a-9791-6602feabfa67 | Status: 200 | Time: 0.191s
2025-03-19 09:28:56,709 - kademia - INFO - Request started | 8327e5c1-1252-4d78-964a-e85d159d2c59 | POST /api/v1/auth/login
2025-03-19 09:28:56,714 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 09:28:56,720 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.email_address = %(email_address_1)s 
 LIMIT %(param_1)s
2025-03-19 09:28:56,720 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] {'email_address_1': 'Aina.Folu@Example.Com', 'param_1': 1}
2025-03-19 09:28:57,270 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 09:28:57,272 - kademia - ERROR - Unhandled exception | 8327e5c1-1252-4d78-964a-e85d159d2c59 | 'bool' object has no attribute 'uid'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 88, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\auth\staff_auth.py", line 33, in login
    'user_uid': str(staff.uid)
                    ^^^^^^^^^
AttributeError: 'bool' object has no attribute 'uid'
2025-03-19 09:28:57,288 - kademia - ERROR - Unhandled exception | 8327e5c1-1252-4d78-964a-e85d159d2c59 | 'bool' object has no attribute 'uid'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 88, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\auth\staff_auth.py", line 33, in login
    'user_uid': str(staff.uid)
                    ^^^^^^^^^
AttributeError: 'bool' object has no attribute 'uid'
2025-03-19 09:29:28,414 - kademia - INFO - Application started
2025-03-19 09:29:28,592 - kademia - INFO - Application started
2025-03-19 09:29:31,564 - kademia - INFO - Request started | d4a931a3-3778-4dd1-b400-0c7e6925303d | GET /docs
2025-03-19 09:29:31,566 - kademia - INFO - Request completed | d4a931a3-3778-4dd1-b400-0c7e6925303d | Status: 200 | Time: 0.001s
2025-03-19 09:29:31,802 - kademia - INFO - Request started | 50ccdae3-aac9-4a99-a89a-c8eb8821a510 | GET /openapi.json
2025-03-19 09:29:32,008 - kademia - INFO - Request completed | 50ccdae3-aac9-4a99-a89a-c8eb8821a510 | Status: 200 | Time: 0.206s
2025-03-19 09:29:44,376 - kademia - INFO - Request started | 992aa42a-2f88-4538-bb35-874293845460 | POST /api/v1/auth/login
2025-03-19 09:29:44,380 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 09:29:44,387 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.email_address = %(email_address_1)s 
 LIMIT %(param_1)s
2025-03-19 09:29:44,388 - sqlalchemy.engine.Engine - INFO - [generated in 0.00120s] {'email_address_1': 'Aina.Folu@Example.Com', 'param_1': 1}
2025-03-19 09:29:44,806 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 09:29:44,808 - kademia - ERROR - Unhandled exception | 992aa42a-2f88-4538-bb35-874293845460 | 'StaffLogin' object has no attribute 'uid'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 88, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\auth\staff_auth.py", line 33, in login
    'user_uid': str(login_data.uid)
                    ^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\pydantic\main.py", line 892, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'StaffLogin' object has no attribute 'uid'
2025-03-19 09:29:44,828 - kademia - ERROR - Unhandled exception | 992aa42a-2f88-4538-bb35-874293845460 | 'StaffLogin' object has no attribute 'uid'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 88, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\auth\staff_auth.py", line 33, in login
    'user_uid': str(login_data.uid)
                    ^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\pydantic\main.py", line 892, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'StaffLogin' object has no attribute 'uid'
2025-03-19 09:32:23,776 - kademia - INFO - Application started
2025-03-19 09:32:23,980 - kademia - INFO - Application started
2025-03-19 09:32:32,812 - kademia - INFO - Request started | 9ce95dcb-529e-45ec-8f87-2eda10045ca3 | GET /docs
2025-03-19 09:32:32,813 - kademia - INFO - Request completed | 9ce95dcb-529e-45ec-8f87-2eda10045ca3 | Status: 200 | Time: 0.001s
2025-03-19 09:32:33,011 - kademia - INFO - Request started | 98581007-1151-4af3-b7bd-972e6610e84f | GET /openapi.json
2025-03-19 09:32:33,227 - kademia - INFO - Request completed | 98581007-1151-4af3-b7bd-972e6610e84f | Status: 200 | Time: 0.214s
2025-03-19 09:32:46,669 - kademia - INFO - Request started | ef8e5ca4-a1c6-4930-857c-b3b5d8624d98 | POST /api/v1/auth/login
2025-03-19 09:32:46,674 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 09:32:46,678 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.email_address = %(email_address_1)s 
 LIMIT %(param_1)s
2025-03-19 09:32:46,679 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] {'email_address_1': 'Aina.Folu@Example.Com', 'param_1': 1}
2025-03-19 09:32:47,107 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 09:32:47,109 - kademia - INFO - Request completed | ef8e5ca4-a1c6-4930-857c-b3b5d8624d98 | Status: 200 | Time: 0.438s
2025-03-19 10:09:12,138 - kademia - INFO - Application started
2025-03-19 10:09:12,379 - kademia - INFO - Application started
2025-03-19 10:16:08,628 - kademia - INFO - Application started
2025-03-19 10:17:37,608 - kademia - INFO - Request started | 345b0dad-360e-4152-a78d-99d451f3a215 | GET /
2025-03-19 10:17:37,610 - kademia - INFO - Request completed | 345b0dad-360e-4152-a78d-99d451f3a215 | Status: 200 | Time: 0.002s
2025-03-19 10:17:37,842 - kademia - INFO - Request started | c76cf0a8-133d-4019-9d24-aac2fa6519e9 | GET /favicon.ico
2025-03-19 10:17:37,844 - kademia - INFO - Request completed | c76cf0a8-133d-4019-9d24-aac2fa6519e9 | Status: 404 | Time: 0.001s
2025-03-19 10:17:46,155 - kademia - INFO - Application started
2025-03-19 10:17:46,167 - kademia - INFO - Request started | fb541e84-3bfc-4cc6-8d45-e1ae3682b56a | GET /docs
2025-03-19 10:17:46,167 - kademia - INFO - Request completed | fb541e84-3bfc-4cc6-8d45-e1ae3682b56a | Status: 200 | Time: 0.000s
2025-03-19 10:17:46,323 - kademia - INFO - Request started | 9d04c50c-1605-46bd-9712-1347e190974b | GET /openapi.json
2025-03-19 10:17:46,498 - kademia - INFO - Request completed | 9d04c50c-1605-46bd-9712-1347e190974b | Status: 200 | Time: 0.173s
2025-03-19 10:18:19,541 - kademia - INFO - Request started | 485ceef5-c168-4acb-a5c3-debb71585c0a | DELETE /api/v1/staff/555898c3-bb19-4c60-9f91-7d0a5166c49b
2025-03-19 10:18:19,544 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 10:18:19,548 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-19 10:18:19,549 - sqlalchemy.engine.Engine - INFO - [generated in 0.00108s] {'id_1': UUID('555898c3-bb19-4c60-9f91-7d0a5166c49b'), 'param_1': 1}
2025-03-19 10:18:19,566 - sqlalchemy.engine.Engine - INFO - SELECT educator_qualifications.id AS educator_qualifications_id, educator_qualifications.educator_id AS educator_qualifications_educator_id, educator_qualifications.name AS educator_qualifications_name, educator_qualifications.description AS educator_qualifications_description, educator_qualifications.created_by AS educator_qualifications_created_by, educator_qualifications.last_modified_by AS educator_qualifications_last_modified_by, educator_qualifications.created_at AS educator_qualifications_created_at, educator_qualifications.last_modified_at AS educator_qualifications_last_modified_at, educator_qualifications.is_archived AS educator_qualifications_is_archived, educator_qualifications.archived_at AS educator_qualifications_archived_at, educator_qualifications.archive_reason AS educator_qualifications_archive_reason, educator_qualifications.archived_by AS educator_qualifications_archived_by 
FROM educator_qualifications 
WHERE %(param_1)s::UUID = educator_qualifications.educator_id
2025-03-19 10:18:19,572 - sqlalchemy.engine.Engine - INFO - [generated in 0.00644s] {'param_1': UUID('555898c3-bb19-4c60-9f91-7d0a5166c49b')}
2025-03-19 10:18:19,584 - sqlalchemy.engine.Engine - INFO - SELECT subject_educators.id AS subject_educators_id, subject_educators.subject_id AS subject_educators_subject_id, subject_educators.educator_id AS subject_educators_educator_id, subject_educators.level_id AS subject_educators_level_id, subject_educators.academic_year AS subject_educators_academic_year, subject_educators.term AS subject_educators_term, subject_educators.is_active AS subject_educators_is_active, subject_educators.date_assigned AS subject_educators_date_assigned, subject_educators.created_by AS subject_educators_created_by, subject_educators.last_modified_by AS subject_educators_last_modified_by, subject_educators.created_at AS subject_educators_created_at, subject_educators.last_modified_at AS subject_educators_last_modified_at, subject_educators.is_archived AS subject_educators_is_archived, subject_educators.archived_at AS subject_educators_archived_at, subject_educators.archive_reason AS subject_educators_archive_reason, subject_educators.archived_by AS subject_educators_archived_by 
FROM subject_educators 
WHERE %(param_1)s::UUID = subject_educators.educator_id
2025-03-19 10:18:19,585 - sqlalchemy.engine.Engine - INFO - [generated in 0.00137s] {'param_1': UUID('555898c3-bb19-4c60-9f91-7d0a5166c49b')}
2025-03-19 10:18:19,595 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE %(param_1)s::UUID = student_departments.mentor_id
2025-03-19 10:18:19,596 - sqlalchemy.engine.Engine - INFO - [generated in 0.00127s] {'param_1': UUID('555898c3-bb19-4c60-9f91-7d0a5166c49b')}
2025-03-19 10:18:19,605 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE %(param_1)s::UUID = classes.supervisor_id
2025-03-19 10:18:19,606 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] {'param_1': UUID('555898c3-bb19-4c60-9f91-7d0a5166c49b')}
2025-03-19 10:18:19,617 - sqlalchemy.engine.Engine - INFO - SELECT access_level_changes.id AS access_level_changes_id, access_level_changes.staff_id AS access_level_changes_staff_id, access_level_changes.previous_level AS access_level_changes_previous_level, access_level_changes.new_level AS access_level_changes_new_level, access_level_changes.reason AS access_level_changes_reason, access_level_changes.changed_at AS access_level_changes_changed_at, access_level_changes.changed_by_id AS access_level_changes_changed_by_id 
FROM access_level_changes 
WHERE %(param_1)s::UUID = access_level_changes.staff_id
2025-03-19 10:18:19,618 - sqlalchemy.engine.Engine - INFO - [generated in 0.00120s] {'param_1': UUID('555898c3-bb19-4c60-9f91-7d0a5166c49b')}
2025-03-19 10:18:19,626 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.created_by
2025-03-19 10:18:19,628 - sqlalchemy.engine.Engine - INFO - [generated in 0.00203s] {'param_1': UUID('555898c3-bb19-4c60-9f91-7d0a5166c49b')}
2025-03-19 10:18:19,632 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.last_modified_by
2025-03-19 10:18:19,633 - sqlalchemy.engine.Engine - INFO - [generated in 0.00119s] {'param_1': UUID('555898c3-bb19-4c60-9f91-7d0a5166c49b')}
2025-03-19 10:18:19,637 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.archived_by
2025-03-19 10:18:19,638 - sqlalchemy.engine.Engine - INFO - [generated in 0.00138s] {'param_1': UUID('555898c3-bb19-4c60-9f91-7d0a5166c49b')}
2025-03-19 10:18:19,645 - sqlalchemy.engine.Engine - INFO - DELETE FROM educators WHERE educators.id = %(id)s::UUID
2025-03-19 10:18:19,645 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] {'id': UUID('555898c3-bb19-4c60-9f91-7d0a5166c49b')}
2025-03-19 10:18:19,656 - sqlalchemy.engine.Engine - INFO - DELETE FROM staff WHERE staff.id = %(id)s::UUID
2025-03-19 10:18:19,656 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] {'id': UUID('555898c3-bb19-4c60-9f91-7d0a5166c49b')}
2025-03-19 10:18:19,660 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 10:18:19,666 - kademia - INFO - Request completed | 485ceef5-c168-4acb-a5c3-debb71585c0a | Status: 204 | Time: 0.125s
2025-03-19 10:18:45,082 - kademia - INFO - Request started | 68280463-7d4b-40f4-a271-64217cab6699 | POST /api/v1/staff/
2025-03-19 10:18:45,684 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 10:18:45,688 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-19 10:18:45,689 - sqlalchemy.engine.Engine - INFO - [generated in 0.00188s] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'aina.folu@example.com', 'address': '456 Allen Avenue, Lagos', 'phone': '08087654321', 'department_id': UUID('00000000-0000-0000-0000-000000000001'), 'role_id': UUID('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('0dc12a6d-80ca-481b-84fe-991cc5a3db4e'), 'password_hash': '$2b$12$px6jLMjulmGgZEGO8HM8UekOzwX.5lwZEBxKdMildHStSFyQDo56K', 'first_name': 'Aina', 'last_name': 'ASDduP1ud2', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 10:18:45,695 - sqlalchemy.engine.Engine - INFO - INSERT INTO educators (id) VALUES (%(id)s::UUID)
2025-03-19 10:18:45,695 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] {'id': UUID('0dc12a6d-80ca-481b-84fe-991cc5a3db4e')}
2025-03-19 10:18:45,699 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 10:18:45,705 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 10:18:45,709 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-19 10:18:45,711 - sqlalchemy.engine.Engine - INFO - [generated in 0.00172s] {'pk_1': UUID('0dc12a6d-80ca-481b-84fe-991cc5a3db4e')}
2025-03-19 10:18:45,718 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 10:18:45,720 - kademia - INFO - Request completed | 68280463-7d4b-40f4-a271-64217cab6699 | Status: 201 | Time: 0.638s
2025-03-19 10:19:19,231 - kademia - INFO - Request started | 7995f683-166f-4bd9-a065-8aab0dfec223 | POST /api/v1/staff/
2025-03-19 10:19:19,782 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 10:19:19,784 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-19 10:19:19,785 - sqlalchemy.engine.Engine - INFO - [cached since 34.1s ago] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'aina.ceemos@example.com', 'address': '456 Allen Avenue, Lagos', 'phone': '08087654371', 'department_id': UUID('00000000-0000-0000-0000-000000000001'), 'role_id': UUID('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('8288f484-4b4b-45cb-8244-24da1355dd9a'), 'password_hash': '$2b$12$p6iH1GjionM4uPZ8.dSNH.AwcViMHSxVinks8nAX.IVdjYoxdYeJW', 'first_name': 'Ceemos', 'last_name': 'M!W9oJFDh0', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-19 10:19:19,789 - sqlalchemy.engine.Engine - INFO - INSERT INTO educators (id) VALUES (%(id)s::UUID)
2025-03-19 10:19:19,791 - sqlalchemy.engine.Engine - INFO - [cached since 34.1s ago] {'id': UUID('8288f484-4b4b-45cb-8244-24da1355dd9a')}
2025-03-19 10:19:19,793 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-19 10:19:19,799 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-19 10:19:19,800 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-19 10:19:19,802 - sqlalchemy.engine.Engine - INFO - [cached since 34.09s ago] {'pk_1': UUID('8288f484-4b4b-45cb-8244-24da1355dd9a')}
2025-03-19 10:19:19,807 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-19 10:19:19,809 - kademia - INFO - Request completed | 7995f683-166f-4bd9-a065-8aab0dfec223 | Status: 201 | Time: 0.578s
2025-03-19 10:20:57,967 - kademia - INFO - Application started
