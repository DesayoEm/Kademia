2025-03-22 08:40:33,467 - kademia - INFO - Application started
2025-03-22 08:40:42,269 - kademia - INFO - Request started | 89172883-5eb5-4ff6-b46d-a06338afaa0f | GET /
2025-03-22 08:40:42,270 - kademia - INFO - Request completed | 89172883-5eb5-4ff6-b46d-a06338afaa0f | Status: 200 | Time: 0.001s
2025-03-22 08:40:42,471 - kademia - INFO - Request started | b8786a66-97f4-4f70-aeb7-f07539a2f187 | GET /favicon.ico
2025-03-22 08:40:42,472 - kademia - INFO - Request completed | b8786a66-97f4-4f70-aeb7-f07539a2f187 | Status: 404 | Time: 0.001s
2025-03-22 08:40:51,409 - kademia - INFO - Request started | 48712ce9-244a-4475-b379-4e7637d9ddb2 | GET /docs
2025-03-22 08:40:51,414 - kademia - INFO - Request completed | 48712ce9-244a-4475-b379-4e7637d9ddb2 | Status: 200 | Time: 0.001s
2025-03-22 08:40:51,858 - kademia - INFO - Request started | 9af1acc4-39e5-4de2-b7f0-10bd03351313 | GET /openapi.json
2025-03-22 08:40:51,973 - kademia - INFO - Request completed | 9af1acc4-39e5-4de2-b7f0-10bd03351313 | Status: 200 | Time: 0.114s
2025-03-22 19:06:00,744 - kademia - INFO - Application started
2025-03-22 19:06:04,382 - kademia - INFO - Request started | 639b07f7-c864-4000-a664-0b69a987613f | GET /docs
2025-03-22 19:06:04,384 - kademia - INFO - Request completed | 639b07f7-c864-4000-a664-0b69a987613f | Status: 200 | Time: 0.002s
2025-03-22 19:06:04,778 - kademia - INFO - Request started | fd748088-2b2e-4a25-b715-30f4a54f8794 | GET /openapi.json
2025-03-22 19:06:05,018 - kademia - INFO - Request completed | fd748088-2b2e-4a25-b715-30f4a54f8794 | Status: 200 | Time: 0.238s
2025-03-22 19:09:40,078 - kademia - INFO - Application started
2025-03-22 19:09:46,482 - kademia - INFO - Request started | a2aa9595-72b1-4033-8979-5c836c3290a8 | GET /docs
2025-03-22 19:09:46,484 - kademia - INFO - Request completed | a2aa9595-72b1-4033-8979-5c836c3290a8 | Status: 200 | Time: 0.002s
2025-03-22 19:09:46,673 - kademia - INFO - Request started | 8f2e07b0-6ef1-4ef2-9047-daf5f7871202 | GET /openapi.json
2025-03-22 19:09:46,931 - kademia - INFO - Request completed | 8f2e07b0-6ef1-4ef2-9047-daf5f7871202 | Status: 200 | Time: 0.257s
2025-03-22 19:10:05,798 - kademia - INFO - Request started | 16821224-d31a-4028-bf05-1c02b380b6dc | POST /api/v1/admin/staff/
2025-03-22 19:10:06,230 - kademia - ERROR - Unhandled exception | 16821224-d31a-4028-bf05-1c02b380b6dc | 'StaffCreate' object has no attribute 'availability'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 65, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 44, in create_staff_instance
    "availability": data.availability,
                    ^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\pydantic\main.py", line 892, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'StaffCreate' object has no attribute 'availability'
2025-03-22 19:10:06,260 - kademia - ERROR - Unhandled exception | 16821224-d31a-4028-bf05-1c02b380b6dc | 'StaffCreate' object has no attribute 'availability'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 65, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 44, in create_staff_instance
    "availability": data.availability,
                    ^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\pydantic\main.py", line 892, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'StaffCreate' object has no attribute 'availability'
2025-03-22 19:10:41,179 - kademia - INFO - Application started
2025-03-22 19:10:41,188 - kademia - INFO - Request started | 49cdb8d0-1b57-4f99-8df4-f092ed9f0f12 | GET /docs
2025-03-22 19:10:41,190 - kademia - INFO - Request completed | 49cdb8d0-1b57-4f99-8df4-f092ed9f0f12 | Status: 200 | Time: 0.001s
2025-03-22 19:10:41,362 - kademia - INFO - Request started | 6d42e547-4dcb-41f8-a160-7a2a8acc3f43 | GET /openapi.json
2025-03-22 19:10:41,530 - kademia - INFO - Request completed | 6d42e547-4dcb-41f8-a160-7a2a8acc3f43 | Status: 200 | Time: 0.165s
2025-03-22 19:11:02,831 - kademia - INFO - Request started | 03a4d005-9bb0-4726-8242-9bee449bd00b | POST /api/v1/admin/staff/
2025-03-22 19:11:03,351 - kademia - ERROR - Unhandled exception | 03a4d005-9bb0-4726-8242-9bee449bd00b | UserValidator.validate_staff_email() missing 1 required positional argument: 'value'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 64, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 44, in create_staff_instance
    "email_address": self.validator.validate_staff_email(data.email_address),
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: UserValidator.validate_staff_email() missing 1 required positional argument: 'value'
2025-03-22 19:11:03,384 - kademia - ERROR - Unhandled exception | 03a4d005-9bb0-4726-8242-9bee449bd00b | UserValidator.validate_staff_email() missing 1 required positional argument: 'value'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 64, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 44, in create_staff_instance
    "email_address": self.validator.validate_staff_email(data.email_address),
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: UserValidator.validate_staff_email() missing 1 required positional argument: 'value'
2025-03-22 19:12:28,972 - kademia - INFO - Application started
2025-03-22 19:12:28,981 - kademia - INFO - Request started | 05eb9371-6c1a-4e84-bbb8-59171d78e888 | GET /docs
2025-03-22 19:12:28,982 - kademia - INFO - Request completed | 05eb9371-6c1a-4e84-bbb8-59171d78e888 | Status: 200 | Time: 0.001s
2025-03-22 19:12:29,177 - kademia - INFO - Request started | ef0b3089-6d63-4cac-affd-c1526d06943d | GET /openapi.json
2025-03-22 19:12:29,364 - kademia - INFO - Request completed | ef0b3089-6d63-4cac-affd-c1526d06943d | Status: 200 | Time: 0.187s
2025-03-22 19:12:38,070 - kademia - INFO - Request started | f47f2cf1-00fe-4232-89d5-20929243b762 | POST /api/v1/admin/staff/
2025-03-22 19:12:39,019 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 19:12:39,020 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:12:39,022 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 19:12:39,023 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:12:39,024 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 19:12:39,025 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:12:39,026 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:12:39,034 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-22 19:12:39,035 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'aina.folu@example.com', 'address': '456 Allen Avenue, Lagos', 'phone': '08087654321', 'department_id': UUID('00000000-0000-0000-0000-000000000001'), 'role_id': UUID('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('d1c00a80-0614-4398-b4b1-ed452a505a69'), 'password_hash': '$2b$12$AjH5ReKvpR6kDXCH/RpJ/ODOCPNsVuFvv68s8DCMukzVHDO4FFnf2', 'first_name': 'Aina', 'last_name': 'Folu', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 19:12:39,042 - sqlalchemy.engine.Engine - INFO - INSERT INTO educators (id) VALUES (%(id)s::UUID)
2025-03-22 19:12:39,042 - sqlalchemy.engine.Engine - INFO - [generated in 0.00071s] {'id': UUID('d1c00a80-0614-4398-b4b1-ed452a505a69')}
2025-03-22 19:12:39,051 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 19:12:39,054 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:12:39,063 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 19:12:39,065 - sqlalchemy.engine.Engine - INFO - [generated in 0.00181s] {'pk_1': UUID('d1c00a80-0614-4398-b4b1-ed452a505a69')}
2025-03-22 19:12:39,072 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 19:12:39,075 - kademia - INFO - Request completed | f47f2cf1-00fe-4232-89d5-20929243b762 | Status: 201 | Time: 1.003s
2025-03-22 19:13:06,823 - kademia - INFO - Request started | c077b25a-6adf-4e49-9b97-7db1fbec9aee | POST /api/v1/admin/staff/
2025-03-22 19:13:07,278 - kademia - ERROR - Unhandled exception | c077b25a-6adf-4e49-9b97-7db1fbec9aee | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 64, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 45, in create_staff_instance
    "address": self.validator.validate_address(data.address),
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 31, in validate_address
    raise TextTooShortError(entry=value, domain=self.domain, min_length=12)
app.core.errors.input_validation_errors.TextTooShortError
2025-03-22 19:13:07,294 - kademia - WARNING - TextTooShortError | c077b25a-6adf-4e49-9b97-7db1fbec9aee | Domain: USER PROFILE-- Input attempted with short text: 456y                                     
2025-03-22 19:13:41,485 - kademia - INFO - Request started | 1478f7cd-fe4a-4617-96a1-d442a77f3424 | POST /api/v1/admin/staff/
2025-03-22 19:13:41,991 - kademia - ERROR - Unhandled exception | 1478f7cd-fe4a-4617-96a1-d442a77f3424 | DateError.__init__() missing 1 required positional argument: 'date_input'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 64, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 49, in create_staff_instance
    "date_joined": self.validator.validate_date(data.date_joined),
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 72, in validate_date
    raise DateError
TypeError: DateError.__init__() missing 1 required positional argument: 'date_input'
2025-03-22 19:13:42,000 - kademia - ERROR - Unhandled exception | 1478f7cd-fe4a-4617-96a1-d442a77f3424 | DateError.__init__() missing 1 required positional argument: 'date_input'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 64, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 49, in create_staff_instance
    "date_joined": self.validator.validate_date(data.date_joined),
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 72, in validate_date
    raise DateError
TypeError: DateError.__init__() missing 1 required positional argument: 'date_input'
2025-03-22 19:15:33,717 - kademia - INFO - Application started
2025-03-22 19:15:33,725 - kademia - INFO - Request started | 55797454-e2df-4a70-a98e-340a7632ed6f | GET /docs
2025-03-22 19:15:33,727 - kademia - INFO - Request completed | 55797454-e2df-4a70-a98e-340a7632ed6f | Status: 200 | Time: 0.000s
2025-03-22 19:15:33,943 - kademia - INFO - Request started | 76bc58a1-a64e-4591-9edc-3d50dd0fc968 | GET /openapi.json
2025-03-22 19:15:34,198 - kademia - INFO - Request completed | 76bc58a1-a64e-4591-9edc-3d50dd0fc968 | Status: 200 | Time: 0.253s
2025-03-22 19:15:53,501 - kademia - INFO - Request started | e43439c1-4176-4f27-9219-d475a72f973e | POST /api/v1/admin/staff/
2025-03-22 19:15:54,020 - kademia - ERROR - Unhandled exception | e43439c1-4176-4f27-9219-d475a72f973e | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 64, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 49, in create_staff_instance
    "date_joined": self.validator.validate_date(data.date_joined),
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 72, in validate_date
    raise DateError(date_input=date_input, domain = self.domain)
app.core.errors.input_validation_errors.DateError
2025-03-22 19:15:54,038 - kademia - WARNING - DateError | e43439c1-4176-4f27-9219-d475a72f973e | Domain: USER PROFILE-- Input attempted with future date: 2026-01-15
2025-03-22 19:16:20,852 - kademia - INFO - Request started | 3bd84d48-179d-421d-bd56-71069dd57623 | POST /api/v1/admin/staff/
2025-03-22 19:16:21,384 - kademia - ERROR - Unhandled exception | 3bd84d48-179d-421d-bd56-71069dd57623 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 64, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 44, in create_staff_instance
    "email_address": self.validator.validate_staff_email(data.email_address),
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 42, in validate_staff_email
    raise TextTooShortError(entry=value, domain=self.domain, min_length=12)
app.core.errors.input_validation_errors.TextTooShortError
2025-03-22 19:16:21,393 - kademia - WARNING - TextTooShortError | 3bd84d48-179d-421d-bd56-71069dd57623 | Domain: USER PROFILE-- Input attempted with short text: aina
2025-03-22 19:16:33,686 - kademia - INFO - Request started | eccb48de-44c0-4f43-b7ad-13913c3f29d9 | POST /api/v1/admin/staff/
2025-03-22 19:16:33,689 - kademia - ERROR - Unhandled exception | eccb48de-44c0-4f43-b7ad-13913c3f29d9 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 64, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 39, in create_staff_instance
    "first_name": self.validator.validate_name(data.first_name),
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 20, in validate_name
    raise InvalidCharacterError(entry=value, domain=self.domain)
app.core.errors.input_validation_errors.InvalidCharacterError
2025-03-22 19:16:33,695 - kademia - WARNING - InvalidCharacterError | eccb48de-44c0-4f43-b7ad-13913c3f29d9 | Domain: USER PROFILE-- Input attempted with invalid character: Ain23a
2025-03-22 19:16:40,993 - kademia - INFO - Request started | 1bd7eed7-f3ef-4117-80ba-3873650d5a47 | POST /api/v1/admin/staff/
2025-03-22 19:16:41,944 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 19:16:41,944 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:16:41,946 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 19:16:41,947 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:16:41,948 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 19:16:41,949 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:16:41,952 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:16:41,965 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-22 19:16:41,966 - sqlalchemy.engine.Engine - INFO - [generated in 0.00189s] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'aina.folu@example.com', 'address': '456 Allen Avenue, Lagos', 'phone': '08087654321', 'department_id': UUID('00000000-0000-0000-0000-000000000001'), 'role_id': UUID('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('6eddb192-93c6-4e20-ae43-4b8ff5bf5180'), 'password_hash': '$2b$12$rSwofqB1hbQEzu/a2j67FeznhEUuRoHjWCgtKPhX295dUQ5lcVjhe', 'first_name': 'Aa', 'last_name': 'Folu', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 19:16:41,981 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 19:16:41,984 - kademia - ERROR - Unhandled exception | 1bd7eed7-f3ef-4117-80ba-3873650d5a47 | Duplicate staff creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "staff_email_address_key"
detail:  key (email_address)=(aina.folu@example.com) already exists.

[sql: insert into staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::uuid, %(role_id)s::uuid, %(date_joined)s, %(date_left)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning staff.created_at, staff.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'staff', 'status': 'active', 'availability': 'available', 'staff_type': 'educator', 'image_url': none, 'email_address': 'aina.folu@example.com', 'address': '456 allen avenue, lagos', 'phone': '08087654321', 'department_id': uuid('00000000-0000-0000-0000-000000000001'), 'role_id': uuid('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': none, 'id': uuid('6eddb192-93c6-4e20-ae43-4b8ff5bf5180'), 'password_hash': '$2b$12$rswofqb1hbqezu/a2j67feznheuurohjwcgtkphx295duq5lcvjhe', 'first_name': 'aa', 'last_name': 'folu', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 74, in create_staff
    raise DuplicateStaffError(
app.core.errors.user_profile_errors.DuplicateStaffError: Duplicate staff creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "staff_email_address_key"
detail:  key (email_address)=(aina.folu@example.com) already exists.

[sql: insert into staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::uuid, %(role_id)s::uuid, %(date_joined)s, %(date_left)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning staff.created_at, staff.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'staff', 'status': 'active', 'availability': 'available', 'staff_type': 'educator', 'image_url': none, 'email_address': 'aina.folu@example.com', 'address': '456 allen avenue, lagos', 'phone': '08087654321', 'department_id': uuid('00000000-0000-0000-0000-000000000001'), 'role_id': uuid('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': none, 'id': uuid('6eddb192-93c6-4e20-ae43-4b8ff5bf5180'), 'password_hash': '$2b$12$rswofqb1hbqezu/a2j67feznheuurohjwcgtkphx295duq5lcvjhe', 'first_name': 'aa', 'last_name': 'folu', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 19:16:41,998 - kademia - WARNING - UniqueViolationError | 1bd7eed7-f3ef-4117-80ba-3873650d5a47 | Duplicate staff creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "staff_email_address_key"
detail:  key (email_address)=(aina.folu@example.com) already exists.

[sql: insert into staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::uuid, %(role_id)s::uuid, %(date_joined)s, %(date_left)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning staff.created_at, staff.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'staff', 'status': 'active', 'availability': 'available', 'staff_type': 'educator', 'image_url': none, 'email_address': 'aina.folu@example.com', 'address': '456 allen avenue, lagos', 'phone': '08087654321', 'department_id': uuid('00000000-0000-0000-0000-000000000001'), 'role_id': uuid('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': none, 'id': uuid('6eddb192-93c6-4e20-ae43-4b8ff5bf5180'), 'password_hash': '$2b$12$rswofqb1hbqezu/a2j67feznheuurohjwcgtkphx295duq5lcvjhe', 'first_name': 'aa', 'last_name': 'folu', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 19:17:01,823 - kademia - INFO - Request started | 43689f78-e63e-44a6-aee7-0b2f448fb8d5 | POST /api/v1/admin/staff/
2025-03-22 19:17:01,825 - kademia - ERROR - Unhandled exception | 43689f78-e63e-44a6-aee7-0b2f448fb8d5 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 64, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 39, in create_staff_instance
    "first_name": self.validator.validate_name(data.first_name),
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 18, in validate_name
    raise TextTooShortError(entry = value, domain = self.domain, min_length = 2)
app.core.errors.input_validation_errors.TextTooShortError
2025-03-22 19:17:01,831 - kademia - WARNING - TextTooShortError | 43689f78-e63e-44a6-aee7-0b2f448fb8d5 | Domain: USER PROFILE-- Input attempted with short text: a
2025-03-22 19:17:39,048 - kademia - INFO - Request started | afa2f2fe-7ee2-4a1b-a50a-2bad4dc61a18 | POST /api/v1/admin/staff/
2025-03-22 19:17:39,609 - kademia - ERROR - Unhandled exception | afa2f2fe-7ee2-4a1b-a50a-2bad4dc61a18 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 64, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 46, in create_staff_instance
    "phone": self.validator.validate_phone(data.phone),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 64, in validate_phone
    raise InvalidPhoneError(entry=value)
app.core.errors.input_validation_errors.InvalidPhoneError
2025-03-22 19:17:39,618 - kademia - WARNING - InvalidPhoneError | afa2f2fe-7ee2-4a1b-a50a-2bad4dc61a18 | Phone number entry attempted with invalid format: 080876543sf21
2025-03-22 19:18:52,402 - kademia - INFO - Application started
2025-03-22 19:18:52,414 - kademia - INFO - Request started | 13b24806-5f53-4ca7-869b-e5a116524b57 | GET /docs
2025-03-22 19:18:52,415 - kademia - INFO - Request completed | 13b24806-5f53-4ca7-869b-e5a116524b57 | Status: 200 | Time: 0.001s
2025-03-22 19:18:52,598 - kademia - INFO - Request started | 3943acc0-fa77-470d-97eb-d2885e5b3707 | GET /openapi.json
2025-03-22 19:18:52,787 - kademia - INFO - Request completed | 3943acc0-fa77-470d-97eb-d2885e5b3707 | Status: 200 | Time: 0.189s
2025-03-22 19:19:21,710 - kademia - INFO - Request started | 79b3742a-ac91-4819-9c8f-dd7fb98cd5fc | POST /api/v1/admin/staff/
2025-03-22 19:19:22,814 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 19:19:22,814 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:19:22,818 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 19:19:22,819 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:19:22,820 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 19:19:22,823 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:19:22,824 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:19:22,838 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-22 19:19:22,839 - sqlalchemy.engine.Engine - INFO - [generated in 0.00188s] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'aina.folu@example.com', 'address': '456 Allen Avenue, Lagos', 'phone': '+2348087654321', 'department_id': UUID('00000000-0000-0000-0000-000000000001'), 'role_id': UUID('00000000-0000-0000-0000-000000000008'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('227f8662-6467-466e-98ce-58c4f0958701'), 'password_hash': '$2b$12$WLcxTQiOn2uy2n.EFBsi4.m.VfoPFGHxY34XS6XNlqdvMImFEsDTK', 'first_name': 'Aina', 'last_name': 'Folu', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 19:19:22,847 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 19:19:22,851 - kademia - ERROR - Unhandled exception | 79b3742a-ac91-4819-9c8f-dd7fb98cd5fc | Duplicate staff creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "staff_email_address_key"
detail:  key (email_address)=(aina.folu@example.com) already exists.

[sql: insert into staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::uuid, %(role_id)s::uuid, %(date_joined)s, %(date_left)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning staff.created_at, staff.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'staff', 'status': 'active', 'availability': 'available', 'staff_type': 'educator', 'image_url': none, 'email_address': 'aina.folu@example.com', 'address': '456 allen avenue, lagos', 'phone': '+2348087654321', 'department_id': uuid('00000000-0000-0000-0000-000000000001'), 'role_id': uuid('00000000-0000-0000-0000-000000000008'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': none, 'id': uuid('227f8662-6467-466e-98ce-58c4f0958701'), 'password_hash': '$2b$12$wlcxtqion2uy2n.efbsi4.m.vfopfghxy34xs6xnlqdvmimfesdtk', 'first_name': 'aina', 'last_name': 'folu', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 74, in create_staff
    raise DuplicateStaffError(
app.core.errors.user_profile_errors.DuplicateStaffError: Duplicate staff creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "staff_email_address_key"
detail:  key (email_address)=(aina.folu@example.com) already exists.

[sql: insert into staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::uuid, %(role_id)s::uuid, %(date_joined)s, %(date_left)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning staff.created_at, staff.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'staff', 'status': 'active', 'availability': 'available', 'staff_type': 'educator', 'image_url': none, 'email_address': 'aina.folu@example.com', 'address': '456 allen avenue, lagos', 'phone': '+2348087654321', 'department_id': uuid('00000000-0000-0000-0000-000000000001'), 'role_id': uuid('00000000-0000-0000-0000-000000000008'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': none, 'id': uuid('227f8662-6467-466e-98ce-58c4f0958701'), 'password_hash': '$2b$12$wlcxtqion2uy2n.efbsi4.m.vfopfghxy34xs6xnlqdvmimfesdtk', 'first_name': 'aina', 'last_name': 'folu', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 19:19:22,884 - kademia - WARNING - UniqueViolationError | 79b3742a-ac91-4819-9c8f-dd7fb98cd5fc | Duplicate staff creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "staff_email_address_key"
detail:  key (email_address)=(aina.folu@example.com) already exists.

[sql: insert into staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::uuid, %(role_id)s::uuid, %(date_joined)s, %(date_left)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning staff.created_at, staff.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'staff', 'status': 'active', 'availability': 'available', 'staff_type': 'educator', 'image_url': none, 'email_address': 'aina.folu@example.com', 'address': '456 allen avenue, lagos', 'phone': '+2348087654321', 'department_id': uuid('00000000-0000-0000-0000-000000000001'), 'role_id': uuid('00000000-0000-0000-0000-000000000008'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': none, 'id': uuid('227f8662-6467-466e-98ce-58c4f0958701'), 'password_hash': '$2b$12$wlcxtqion2uy2n.efbsi4.m.vfopfghxy34xs6xnlqdvmimfesdtk', 'first_name': 'aina', 'last_name': 'folu', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 19:19:38,533 - kademia - INFO - Request started | d6bb7908-1763-482c-a58d-cf4d0db2059d | POST /api/v1/admin/staff/
2025-03-22 19:19:38,957 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:19:38,959 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-22 19:19:38,960 - sqlalchemy.engine.Engine - INFO - [cached since 16.12s ago] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'aina.fodlu@example.com', 'address': '456 Allen Avenue, Lagos', 'phone': '+2348087654321', 'department_id': UUID('00000000-0000-0000-0000-000000000001'), 'role_id': UUID('00000000-0000-0000-0000-000000000008'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('3afffd0c-84a2-4923-a748-d26edcd97ab4'), 'password_hash': '$2b$12$uedQ.V.1tIB.s.Kl1eHQCeJLTjy3oVH9owqP7NJgrh8WpD3JhRjwe', 'first_name': 'Aina', 'last_name': 'Folu', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 19:19:38,964 - sqlalchemy.engine.Engine - INFO - INSERT INTO educators (id) VALUES (%(id)s::UUID)
2025-03-22 19:19:38,965 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] {'id': UUID('3afffd0c-84a2-4923-a748-d26edcd97ab4')}
2025-03-22 19:19:38,975 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 19:19:38,983 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:19:38,995 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 19:19:39,003 - sqlalchemy.engine.Engine - INFO - [generated in 0.00750s] {'pk_1': UUID('3afffd0c-84a2-4923-a748-d26edcd97ab4')}
2025-03-22 19:19:39,018 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 19:19:39,024 - kademia - INFO - Request completed | d6bb7908-1763-482c-a58d-cf4d0db2059d | Status: 201 | Time: 0.490s
2025-03-22 19:28:58,734 - kademia - INFO - Application started
2025-03-22 19:30:01,979 - kademia - INFO - Application started
2025-03-22 19:30:03,926 - kademia - INFO - Request started | a9b9933f-4aa6-4dbd-993d-6d0a8649381a | GET /docs
2025-03-22 19:30:03,928 - kademia - INFO - Request completed | a9b9933f-4aa6-4dbd-993d-6d0a8649381a | Status: 200 | Time: 0.001s
2025-03-22 19:30:04,110 - kademia - INFO - Request started | 3435123b-db7c-4a38-8e4c-512217b989f6 | GET /openapi.json
2025-03-22 19:30:04,240 - kademia - INFO - Request completed | 3435123b-db7c-4a38-8e4c-512217b989f6 | Status: 200 | Time: 0.129s
2025-03-22 19:32:09,104 - kademia - INFO - Application started
2025-03-22 19:32:12,010 - kademia - INFO - Request started | 09d985f6-24a3-4acf-89e8-9d202696240c | GET /docs
2025-03-22 19:32:12,012 - kademia - INFO - Request completed | 09d985f6-24a3-4acf-89e8-9d202696240c | Status: 200 | Time: 0.001s
2025-03-22 19:32:12,254 - kademia - INFO - Request started | 17b1d99f-2a88-468d-a8c4-c252abc32ea6 | GET /openapi.json
2025-03-22 19:32:12,483 - kademia - INFO - Request completed | 17b1d99f-2a88-468d-a8c4-c252abc32ea6 | Status: 200 | Time: 0.228s
2025-03-22 19:32:23,049 - kademia - INFO - Request started | 86465652-77ff-4ece-83ee-283891831134 | POST /api/v1/admin/staff/
2025-03-22 19:32:23,595 - kademia - ERROR - Unhandled exception | 86465652-77ff-4ece-83ee-283891831134 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 64, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 46, in create_staff_instance
    "phone": self.validator.validate_phone(data.phone),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 74, in validate_phone
    raise InvalidPhoneError(entry=value)
app.core.errors.input_validation_errors.InvalidPhoneError
2025-03-22 19:32:23,608 - kademia - WARNING - InvalidPhoneError | 86465652-77ff-4ece-83ee-283891831134 | Phone number entry attempted with invalid format: 08087654321
2025-03-22 19:32:39,733 - kademia - INFO - Request started | 638ecb3e-1c22-4dca-abe3-0ceacd00dc43 | POST /api/v1/admin/staff/
2025-03-22 19:32:40,660 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 19:32:40,660 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:32:40,663 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 19:32:40,664 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:32:40,667 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 19:32:40,668 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:32:40,670 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:32:40,679 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-22 19:32:40,681 - sqlalchemy.engine.Engine - INFO - [generated in 0.00220s] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'aina.folu@example.com', 'address': '456 Allen Avenue, Lagos', 'phone': '+2348087654321', 'department_id': UUID('00000000-0000-0000-0000-000000000001'), 'role_id': UUID('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('0d7bb89a-b58a-4472-b012-37ab5f98d904'), 'password_hash': '$2b$12$BKJadiXLAgpI8YZyQnsuNeKoRe9TIbYpEk9PbWbD5syqI8novsc/W', 'first_name': 'Aina', 'last_name': 'Folu', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 19:32:40,687 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 19:32:40,690 - kademia - ERROR - Unhandled exception | 638ecb3e-1c22-4dca-abe3-0ceacd00dc43 | Duplicate staff creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "staff_email_address_key"
detail:  key (email_address)=(aina.folu@example.com) already exists.

[sql: insert into staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::uuid, %(role_id)s::uuid, %(date_joined)s, %(date_left)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning staff.created_at, staff.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'staff', 'status': 'active', 'availability': 'available', 'staff_type': 'educator', 'image_url': none, 'email_address': 'aina.folu@example.com', 'address': '456 allen avenue, lagos', 'phone': '+2348087654321', 'department_id': uuid('00000000-0000-0000-0000-000000000001'), 'role_id': uuid('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': none, 'id': uuid('0d7bb89a-b58a-4472-b012-37ab5f98d904'), 'password_hash': '$2b$12$bkjadixlagpi8yzyqnsunekore9tibypek9pbwbd5syqi8novsc/w', 'first_name': 'aina', 'last_name': 'folu', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 74, in create_staff
    raise DuplicateStaffError(
app.core.errors.user_profile_errors.DuplicateStaffError: Duplicate staff creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "staff_email_address_key"
detail:  key (email_address)=(aina.folu@example.com) already exists.

[sql: insert into staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::uuid, %(role_id)s::uuid, %(date_joined)s, %(date_left)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning staff.created_at, staff.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'staff', 'status': 'active', 'availability': 'available', 'staff_type': 'educator', 'image_url': none, 'email_address': 'aina.folu@example.com', 'address': '456 allen avenue, lagos', 'phone': '+2348087654321', 'department_id': uuid('00000000-0000-0000-0000-000000000001'), 'role_id': uuid('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': none, 'id': uuid('0d7bb89a-b58a-4472-b012-37ab5f98d904'), 'password_hash': '$2b$12$bkjadixlagpi8yzyqnsunekore9tibypek9pbwbd5syqi8novsc/w', 'first_name': 'aina', 'last_name': 'folu', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 19:32:40,704 - kademia - WARNING - UniqueViolationError | 638ecb3e-1c22-4dca-abe3-0ceacd00dc43 | Duplicate staff creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "staff_email_address_key"
detail:  key (email_address)=(aina.folu@example.com) already exists.

[sql: insert into staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::uuid, %(role_id)s::uuid, %(date_joined)s, %(date_left)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning staff.created_at, staff.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'staff', 'status': 'active', 'availability': 'available', 'staff_type': 'educator', 'image_url': none, 'email_address': 'aina.folu@example.com', 'address': '456 allen avenue, lagos', 'phone': '+2348087654321', 'department_id': uuid('00000000-0000-0000-0000-000000000001'), 'role_id': uuid('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': none, 'id': uuid('0d7bb89a-b58a-4472-b012-37ab5f98d904'), 'password_hash': '$2b$12$bkjadixlagpi8yzyqnsunekore9tibypek9pbwbd5syqi8novsc/w', 'first_name': 'aina', 'last_name': 'folu', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 19:33:02,673 - kademia - INFO - Request started | 9a420624-0299-4bbb-9fb7-190aba504f6b | POST /api/v1/admin/staff/
2025-03-22 19:33:03,237 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:33:03,240 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-22 19:33:03,241 - sqlalchemy.engine.Engine - INFO - [cached since 22.56s ago] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'aina.folu@examhhkjple.com', 'address': '456 Allen Avenue, Lagos', 'phone': '+2348087654321', 'department_id': UUID('00000000-0000-0000-0000-000000000009'), 'role_id': UUID('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('b9f1619b-723d-499b-897c-3e5d083c2405'), 'password_hash': '$2b$12$yj4UwnUPJXzr0XGfBvjg6OzrouPGboel.IawxkwiTSSpY0FBYBNgS', 'first_name': 'Aina', 'last_name': 'Folu', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 19:33:03,246 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 19:33:03,248 - kademia - ERROR - Unhandled exception | 9a420624-0299-4bbb-9fb7-190aba504f6b | Duplicate staff creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "staff_phone_key"
detail:  key (phone)=(+2348087654321) already exists.

[sql: insert into staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::uuid, %(role_id)s::uuid, %(date_joined)s, %(date_left)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning staff.created_at, staff.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'staff', 'status': 'active', 'availability': 'available', 'staff_type': 'educator', 'image_url': none, 'email_address': 'aina.folu@examhhkjple.com', 'address': '456 allen avenue, lagos', 'phone': '+2348087654321', 'department_id': uuid('00000000-0000-0000-0000-000000000009'), 'role_id': uuid('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': none, 'id': uuid('b9f1619b-723d-499b-897c-3e5d083c2405'), 'password_hash': '$2b$12$yj4uwnupjxzr0xgfbvjg6ozroupgboel.iawxkwitsspy0fbybngs', 'first_name': 'aina', 'last_name': 'folu', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 71, in create_staff
    raise DuplicateStaffError(
app.core.errors.user_profile_errors.DuplicateStaffError: Duplicate staff creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "staff_phone_key"
detail:  key (phone)=(+2348087654321) already exists.

[sql: insert into staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::uuid, %(role_id)s::uuid, %(date_joined)s, %(date_left)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning staff.created_at, staff.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'staff', 'status': 'active', 'availability': 'available', 'staff_type': 'educator', 'image_url': none, 'email_address': 'aina.folu@examhhkjple.com', 'address': '456 allen avenue, lagos', 'phone': '+2348087654321', 'department_id': uuid('00000000-0000-0000-0000-000000000009'), 'role_id': uuid('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': none, 'id': uuid('b9f1619b-723d-499b-897c-3e5d083c2405'), 'password_hash': '$2b$12$yj4uwnupjxzr0xgfbvjg6ozroupgboel.iawxkwitsspy0fbybngs', 'first_name': 'aina', 'last_name': 'folu', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 19:33:03,267 - kademia - WARNING - UniqueViolationError | 9a420624-0299-4bbb-9fb7-190aba504f6b | Duplicate staff creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "staff_phone_key"
detail:  key (phone)=(+2348087654321) already exists.

[sql: insert into staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::uuid, %(role_id)s::uuid, %(date_joined)s, %(date_left)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning staff.created_at, staff.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'staff', 'status': 'active', 'availability': 'available', 'staff_type': 'educator', 'image_url': none, 'email_address': 'aina.folu@examhhkjple.com', 'address': '456 allen avenue, lagos', 'phone': '+2348087654321', 'department_id': uuid('00000000-0000-0000-0000-000000000009'), 'role_id': uuid('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': none, 'id': uuid('b9f1619b-723d-499b-897c-3e5d083c2405'), 'password_hash': '$2b$12$yj4uwnupjxzr0xgfbvjg6ozroupgboel.iawxkwitsspy0fbybngs', 'first_name': 'aina', 'last_name': 'folu', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 19:33:13,810 - kademia - INFO - Request started | 0a02f1a7-904e-46d8-b9a3-a4094d3f0fe4 | POST /api/v1/admin/staff/
2025-03-22 19:33:14,310 - kademia - ERROR - Unhandled exception | 0a02f1a7-904e-46d8-b9a3-a4094d3f0fe4 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 97, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 64, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 46, in create_staff_instance
    "phone": self.validator.validate_phone(data.phone),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 74, in validate_phone
    raise InvalidPhoneError(entry=value)
app.core.errors.input_validation_errors.InvalidPhoneError
2025-03-22 19:33:14,320 - kademia - WARNING - InvalidPhoneError | 0a02f1a7-904e-46d8-b9a3-a4094d3f0fe4 | Phone number entry attempted with invalid format: +2348087654y21
2025-03-22 19:33:28,390 - kademia - INFO - Request started | 18f036c3-d92b-4d1d-8524-b6bdc3e1c708 | POST /api/v1/admin/staff/
2025-03-22 19:33:28,911 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:33:28,912 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-22 19:33:28,914 - sqlalchemy.engine.Engine - INFO - [cached since 48.24s ago] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'aina.folu@examhhkjple.com', 'address': '456 Allen Avenue, Lagos', 'phone': '+2348087650021', 'department_id': UUID('00000000-0000-0000-0000-000000000009'), 'role_id': UUID('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('16b259b1-809c-4dac-9aa0-25a7d3e9300c'), 'password_hash': '$2b$12$QL4D/LQtutzsomoeHJy0WOgQllmix6P8FoWjoEsLjBPR4o7gS.PlW', 'first_name': 'Aina', 'last_name': 'Folu', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 19:33:28,919 - sqlalchemy.engine.Engine - INFO - INSERT INTO educators (id) VALUES (%(id)s::UUID)
2025-03-22 19:33:28,919 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] {'id': UUID('16b259b1-809c-4dac-9aa0-25a7d3e9300c')}
2025-03-22 19:33:28,931 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 19:33:28,939 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:33:28,948 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 19:33:28,949 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] {'pk_1': UUID('16b259b1-809c-4dac-9aa0-25a7d3e9300c')}
2025-03-22 19:33:28,956 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 19:33:28,958 - kademia - INFO - Request completed | 18f036c3-d92b-4d1d-8524-b6bdc3e1c708 | Status: 201 | Time: 0.567s
2025-03-22 19:34:06,868 - kademia - INFO - Request started | 30026df8-744b-421f-9607-250256538e6b | POST /api/v1/admin/staff/
2025-03-22 19:34:07,364 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:34:07,365 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-22 19:34:07,367 - sqlalchemy.engine.Engine - INFO - [cached since 86.69s ago] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'aina.folkklu@examhhkjple.com', 'address': '456 Allen Avenue, Lagos', 'phone': '+2348087656621', 'department_id': UUID('00000000-0000-0000-0000-000000000009'), 'role_id': UUID('00000000-0000-0000-0000-000000000009'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('0e5fe5bc-0112-463a-9186-618943a08073'), 'password_hash': '$2b$12$7bO3cjyXBDB/7g249XtCmemhKgm/SQ8lImM7pAXYckfQhYuTgEVfi', 'first_name': 'Aina', 'last_name': 'Folu', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 19:34:07,371 - sqlalchemy.engine.Engine - INFO - INSERT INTO educators (id) VALUES (%(id)s::UUID)
2025-03-22 19:34:07,372 - sqlalchemy.engine.Engine - INFO - [cached since 38.45s ago] {'id': UUID('0e5fe5bc-0112-463a-9186-618943a08073')}
2025-03-22 19:34:07,373 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 19:34:07,375 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:34:07,376 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 19:34:07,377 - sqlalchemy.engine.Engine - INFO - [cached since 38.43s ago] {'pk_1': UUID('0e5fe5bc-0112-463a-9186-618943a08073')}
2025-03-22 19:34:07,380 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 19:34:07,381 - kademia - INFO - Request completed | 30026df8-744b-421f-9607-250256538e6b | Status: 201 | Time: 0.512s
2025-03-22 19:35:11,567 - kademia - INFO - Application started
2025-03-22 19:36:14,106 - kademia - INFO - Request started | 01a5d5fc-8f9e-4eb3-9e22-3d3446c609f4 | DELETE /api/v1/admin/staff/d1c00a80-0614-4398-b4b1-ed452a505a69
2025-03-22 19:36:14,483 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 19:36:14,483 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:36:14,485 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 19:36:14,486 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:36:14,488 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 19:36:14,488 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:36:14,490 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:36:14,497 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 19:36:14,498 - sqlalchemy.engine.Engine - INFO - [generated in 0.00123s] {'id_1': UUID('d1c00a80-0614-4398-b4b1-ed452a505a69'), 'param_1': 1}
2025-03-22 19:36:14,514 - sqlalchemy.engine.Engine - INFO - SELECT educator_qualifications.id AS educator_qualifications_id, educator_qualifications.educator_id AS educator_qualifications_educator_id, educator_qualifications.name AS educator_qualifications_name, educator_qualifications.description AS educator_qualifications_description, educator_qualifications.created_by AS educator_qualifications_created_by, educator_qualifications.last_modified_by AS educator_qualifications_last_modified_by, educator_qualifications.created_at AS educator_qualifications_created_at, educator_qualifications.last_modified_at AS educator_qualifications_last_modified_at, educator_qualifications.is_archived AS educator_qualifications_is_archived, educator_qualifications.archived_at AS educator_qualifications_archived_at, educator_qualifications.archive_reason AS educator_qualifications_archive_reason, educator_qualifications.archived_by AS educator_qualifications_archived_by 
FROM educator_qualifications 
WHERE %(param_1)s::UUID = educator_qualifications.educator_id
2025-03-22 19:36:14,515 - sqlalchemy.engine.Engine - INFO - [generated in 0.00110s] {'param_1': UUID('d1c00a80-0614-4398-b4b1-ed452a505a69')}
2025-03-22 19:36:14,526 - sqlalchemy.engine.Engine - INFO - SELECT subject_educators.id AS subject_educators_id, subject_educators.subject_id AS subject_educators_subject_id, subject_educators.educator_id AS subject_educators_educator_id, subject_educators.level_id AS subject_educators_level_id, subject_educators.academic_year AS subject_educators_academic_year, subject_educators.term AS subject_educators_term, subject_educators.is_active AS subject_educators_is_active, subject_educators.date_assigned AS subject_educators_date_assigned, subject_educators.created_by AS subject_educators_created_by, subject_educators.last_modified_by AS subject_educators_last_modified_by, subject_educators.created_at AS subject_educators_created_at, subject_educators.last_modified_at AS subject_educators_last_modified_at, subject_educators.is_archived AS subject_educators_is_archived, subject_educators.archived_at AS subject_educators_archived_at, subject_educators.archive_reason AS subject_educators_archive_reason, subject_educators.archived_by AS subject_educators_archived_by 
FROM subject_educators 
WHERE %(param_1)s::UUID = subject_educators.educator_id
2025-03-22 19:36:14,527 - sqlalchemy.engine.Engine - INFO - [generated in 0.00101s] {'param_1': UUID('d1c00a80-0614-4398-b4b1-ed452a505a69')}
2025-03-22 19:36:14,534 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.code AS student_departments_code, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE %(param_1)s::UUID = student_departments.mentor_id
2025-03-22 19:36:14,535 - sqlalchemy.engine.Engine - INFO - [generated in 0.00103s] {'param_1': UUID('d1c00a80-0614-4398-b4b1-ed452a505a69')}
2025-03-22 19:36:14,546 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE %(param_1)s::UUID = classes.supervisor_id
2025-03-22 19:36:14,548 - sqlalchemy.engine.Engine - INFO - [generated in 0.00103s] {'param_1': UUID('d1c00a80-0614-4398-b4b1-ed452a505a69')}
2025-03-22 19:36:14,557 - sqlalchemy.engine.Engine - INFO - SELECT access_level_changes.id AS access_level_changes_id, access_level_changes.staff_id AS access_level_changes_staff_id, access_level_changes.previous_level AS access_level_changes_previous_level, access_level_changes.new_level AS access_level_changes_new_level, access_level_changes.reason AS access_level_changes_reason, access_level_changes.changed_at AS access_level_changes_changed_at, access_level_changes.changed_by_id AS access_level_changes_changed_by_id 
FROM access_level_changes 
WHERE %(param_1)s::UUID = access_level_changes.staff_id
2025-03-22 19:36:14,558 - sqlalchemy.engine.Engine - INFO - [generated in 0.00091s] {'param_1': UUID('d1c00a80-0614-4398-b4b1-ed452a505a69')}
2025-03-22 19:36:14,564 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.created_by
2025-03-22 19:36:14,567 - sqlalchemy.engine.Engine - INFO - [generated in 0.00200s] {'param_1': UUID('d1c00a80-0614-4398-b4b1-ed452a505a69')}
2025-03-22 19:36:14,571 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.last_modified_by
2025-03-22 19:36:14,573 - sqlalchemy.engine.Engine - INFO - [generated in 0.00184s] {'param_1': UUID('d1c00a80-0614-4398-b4b1-ed452a505a69')}
2025-03-22 19:36:14,577 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.archived_by
2025-03-22 19:36:14,588 - sqlalchemy.engine.Engine - INFO - [generated in 0.01151s] {'param_1': UUID('d1c00a80-0614-4398-b4b1-ed452a505a69')}
2025-03-22 19:36:14,594 - sqlalchemy.engine.Engine - INFO - DELETE FROM educators WHERE educators.id = %(id)s::UUID
2025-03-22 19:36:14,594 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] {'id': UUID('d1c00a80-0614-4398-b4b1-ed452a505a69')}
2025-03-22 19:36:14,606 - sqlalchemy.engine.Engine - INFO - DELETE FROM staff WHERE staff.id = %(id)s::UUID
2025-03-22 19:36:14,607 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] {'id': UUID('d1c00a80-0614-4398-b4b1-ed452a505a69')}
2025-03-22 19:36:14,608 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 19:36:14,612 - kademia - INFO - Request completed | 01a5d5fc-8f9e-4eb3-9e22-3d3446c609f4 | Status: 204 | Time: 0.506s
2025-03-22 19:36:28,202 - kademia - INFO - Request started | 328e0932-2a93-49de-ad84-ba6df1c7de04 | DELETE /api/v1/admin/staff/3afffd0c-84a2-4923-a748-d26edcd97ab4
2025-03-22 19:36:28,206 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:36:28,207 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 19:36:28,209 - sqlalchemy.engine.Engine - INFO - [cached since 13.71s ago] {'id_1': UUID('3afffd0c-84a2-4923-a748-d26edcd97ab4'), 'param_1': 1}
2025-03-22 19:36:28,214 - sqlalchemy.engine.Engine - INFO - SELECT educator_qualifications.id AS educator_qualifications_id, educator_qualifications.educator_id AS educator_qualifications_educator_id, educator_qualifications.name AS educator_qualifications_name, educator_qualifications.description AS educator_qualifications_description, educator_qualifications.created_by AS educator_qualifications_created_by, educator_qualifications.last_modified_by AS educator_qualifications_last_modified_by, educator_qualifications.created_at AS educator_qualifications_created_at, educator_qualifications.last_modified_at AS educator_qualifications_last_modified_at, educator_qualifications.is_archived AS educator_qualifications_is_archived, educator_qualifications.archived_at AS educator_qualifications_archived_at, educator_qualifications.archive_reason AS educator_qualifications_archive_reason, educator_qualifications.archived_by AS educator_qualifications_archived_by 
FROM educator_qualifications 
WHERE %(param_1)s::UUID = educator_qualifications.educator_id
2025-03-22 19:36:28,216 - sqlalchemy.engine.Engine - INFO - [cached since 13.7s ago] {'param_1': UUID('3afffd0c-84a2-4923-a748-d26edcd97ab4')}
2025-03-22 19:36:28,219 - sqlalchemy.engine.Engine - INFO - SELECT subject_educators.id AS subject_educators_id, subject_educators.subject_id AS subject_educators_subject_id, subject_educators.educator_id AS subject_educators_educator_id, subject_educators.level_id AS subject_educators_level_id, subject_educators.academic_year AS subject_educators_academic_year, subject_educators.term AS subject_educators_term, subject_educators.is_active AS subject_educators_is_active, subject_educators.date_assigned AS subject_educators_date_assigned, subject_educators.created_by AS subject_educators_created_by, subject_educators.last_modified_by AS subject_educators_last_modified_by, subject_educators.created_at AS subject_educators_created_at, subject_educators.last_modified_at AS subject_educators_last_modified_at, subject_educators.is_archived AS subject_educators_is_archived, subject_educators.archived_at AS subject_educators_archived_at, subject_educators.archive_reason AS subject_educators_archive_reason, subject_educators.archived_by AS subject_educators_archived_by 
FROM subject_educators 
WHERE %(param_1)s::UUID = subject_educators.educator_id
2025-03-22 19:36:28,221 - sqlalchemy.engine.Engine - INFO - [cached since 13.69s ago] {'param_1': UUID('3afffd0c-84a2-4923-a748-d26edcd97ab4')}
2025-03-22 19:36:28,224 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.code AS student_departments_code, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE %(param_1)s::UUID = student_departments.mentor_id
2025-03-22 19:36:28,225 - sqlalchemy.engine.Engine - INFO - [cached since 13.69s ago] {'param_1': UUID('3afffd0c-84a2-4923-a748-d26edcd97ab4')}
2025-03-22 19:36:28,239 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE %(param_1)s::UUID = classes.supervisor_id
2025-03-22 19:36:28,240 - sqlalchemy.engine.Engine - INFO - [cached since 13.69s ago] {'param_1': UUID('3afffd0c-84a2-4923-a748-d26edcd97ab4')}
2025-03-22 19:36:28,244 - sqlalchemy.engine.Engine - INFO - SELECT access_level_changes.id AS access_level_changes_id, access_level_changes.staff_id AS access_level_changes_staff_id, access_level_changes.previous_level AS access_level_changes_previous_level, access_level_changes.new_level AS access_level_changes_new_level, access_level_changes.reason AS access_level_changes_reason, access_level_changes.changed_at AS access_level_changes_changed_at, access_level_changes.changed_by_id AS access_level_changes_changed_by_id 
FROM access_level_changes 
WHERE %(param_1)s::UUID = access_level_changes.staff_id
2025-03-22 19:36:28,245 - sqlalchemy.engine.Engine - INFO - [cached since 13.69s ago] {'param_1': UUID('3afffd0c-84a2-4923-a748-d26edcd97ab4')}
2025-03-22 19:36:28,250 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.created_by
2025-03-22 19:36:28,252 - sqlalchemy.engine.Engine - INFO - [cached since 13.69s ago] {'param_1': UUID('3afffd0c-84a2-4923-a748-d26edcd97ab4')}
2025-03-22 19:36:28,255 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.last_modified_by
2025-03-22 19:36:28,267 - sqlalchemy.engine.Engine - INFO - [cached since 13.7s ago] {'param_1': UUID('3afffd0c-84a2-4923-a748-d26edcd97ab4')}
2025-03-22 19:36:28,270 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.archived_by
2025-03-22 19:36:28,272 - sqlalchemy.engine.Engine - INFO - [cached since 13.69s ago] {'param_1': UUID('3afffd0c-84a2-4923-a748-d26edcd97ab4')}
2025-03-22 19:36:28,278 - sqlalchemy.engine.Engine - INFO - DELETE FROM educators WHERE educators.id = %(id)s::UUID
2025-03-22 19:36:28,279 - sqlalchemy.engine.Engine - INFO - [cached since 13.69s ago] {'id': UUID('3afffd0c-84a2-4923-a748-d26edcd97ab4')}
2025-03-22 19:36:28,282 - sqlalchemy.engine.Engine - INFO - DELETE FROM staff WHERE staff.id = %(id)s::UUID
2025-03-22 19:36:28,283 - sqlalchemy.engine.Engine - INFO - [cached since 13.68s ago] {'id': UUID('3afffd0c-84a2-4923-a748-d26edcd97ab4')}
2025-03-22 19:36:28,285 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 19:36:28,373 - kademia - INFO - Request completed | 328e0932-2a93-49de-ad84-ba6df1c7de04 | Status: 204 | Time: 0.171s
2025-03-22 19:36:46,592 - kademia - INFO - Request started | 49597db5-b2d8-46e4-8fe3-31c8a163db4d | DELETE /api/v1/admin/staff/16b259b1-809c-4dac-9aa0-25a7d3e9300c
2025-03-22 19:36:46,594 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:36:46,596 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 19:36:46,598 - sqlalchemy.engine.Engine - INFO - [cached since 32.1s ago] {'id_1': UUID('16b259b1-809c-4dac-9aa0-25a7d3e9300c'), 'param_1': 1}
2025-03-22 19:36:46,603 - sqlalchemy.engine.Engine - INFO - SELECT educator_qualifications.id AS educator_qualifications_id, educator_qualifications.educator_id AS educator_qualifications_educator_id, educator_qualifications.name AS educator_qualifications_name, educator_qualifications.description AS educator_qualifications_description, educator_qualifications.created_by AS educator_qualifications_created_by, educator_qualifications.last_modified_by AS educator_qualifications_last_modified_by, educator_qualifications.created_at AS educator_qualifications_created_at, educator_qualifications.last_modified_at AS educator_qualifications_last_modified_at, educator_qualifications.is_archived AS educator_qualifications_is_archived, educator_qualifications.archived_at AS educator_qualifications_archived_at, educator_qualifications.archive_reason AS educator_qualifications_archive_reason, educator_qualifications.archived_by AS educator_qualifications_archived_by 
FROM educator_qualifications 
WHERE %(param_1)s::UUID = educator_qualifications.educator_id
2025-03-22 19:36:46,605 - sqlalchemy.engine.Engine - INFO - [cached since 32.09s ago] {'param_1': UUID('16b259b1-809c-4dac-9aa0-25a7d3e9300c')}
2025-03-22 19:36:46,608 - sqlalchemy.engine.Engine - INFO - SELECT subject_educators.id AS subject_educators_id, subject_educators.subject_id AS subject_educators_subject_id, subject_educators.educator_id AS subject_educators_educator_id, subject_educators.level_id AS subject_educators_level_id, subject_educators.academic_year AS subject_educators_academic_year, subject_educators.term AS subject_educators_term, subject_educators.is_active AS subject_educators_is_active, subject_educators.date_assigned AS subject_educators_date_assigned, subject_educators.created_by AS subject_educators_created_by, subject_educators.last_modified_by AS subject_educators_last_modified_by, subject_educators.created_at AS subject_educators_created_at, subject_educators.last_modified_at AS subject_educators_last_modified_at, subject_educators.is_archived AS subject_educators_is_archived, subject_educators.archived_at AS subject_educators_archived_at, subject_educators.archive_reason AS subject_educators_archive_reason, subject_educators.archived_by AS subject_educators_archived_by 
FROM subject_educators 
WHERE %(param_1)s::UUID = subject_educators.educator_id
2025-03-22 19:36:46,610 - sqlalchemy.engine.Engine - INFO - [cached since 32.08s ago] {'param_1': UUID('16b259b1-809c-4dac-9aa0-25a7d3e9300c')}
2025-03-22 19:36:46,613 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.code AS student_departments_code, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE %(param_1)s::UUID = student_departments.mentor_id
2025-03-22 19:36:46,615 - sqlalchemy.engine.Engine - INFO - [cached since 32.08s ago] {'param_1': UUID('16b259b1-809c-4dac-9aa0-25a7d3e9300c')}
2025-03-22 19:36:46,617 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE %(param_1)s::UUID = classes.supervisor_id
2025-03-22 19:36:46,619 - sqlalchemy.engine.Engine - INFO - [cached since 32.07s ago] {'param_1': UUID('16b259b1-809c-4dac-9aa0-25a7d3e9300c')}
2025-03-22 19:36:46,622 - sqlalchemy.engine.Engine - INFO - SELECT access_level_changes.id AS access_level_changes_id, access_level_changes.staff_id AS access_level_changes_staff_id, access_level_changes.previous_level AS access_level_changes_previous_level, access_level_changes.new_level AS access_level_changes_new_level, access_level_changes.reason AS access_level_changes_reason, access_level_changes.changed_at AS access_level_changes_changed_at, access_level_changes.changed_by_id AS access_level_changes_changed_by_id 
FROM access_level_changes 
WHERE %(param_1)s::UUID = access_level_changes.staff_id
2025-03-22 19:36:46,623 - sqlalchemy.engine.Engine - INFO - [cached since 32.07s ago] {'param_1': UUID('16b259b1-809c-4dac-9aa0-25a7d3e9300c')}
2025-03-22 19:36:46,626 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.created_by
2025-03-22 19:36:46,628 - sqlalchemy.engine.Engine - INFO - [cached since 32.06s ago] {'param_1': UUID('16b259b1-809c-4dac-9aa0-25a7d3e9300c')}
2025-03-22 19:36:46,632 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.last_modified_by
2025-03-22 19:36:46,634 - sqlalchemy.engine.Engine - INFO - [cached since 32.06s ago] {'param_1': UUID('16b259b1-809c-4dac-9aa0-25a7d3e9300c')}
2025-03-22 19:36:46,638 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.archived_by
2025-03-22 19:36:46,647 - sqlalchemy.engine.Engine - INFO - [cached since 32.07s ago] {'param_1': UUID('16b259b1-809c-4dac-9aa0-25a7d3e9300c')}
2025-03-22 19:36:46,651 - sqlalchemy.engine.Engine - INFO - DELETE FROM educators WHERE educators.id = %(id)s::UUID
2025-03-22 19:36:46,652 - sqlalchemy.engine.Engine - INFO - [cached since 32.06s ago] {'id': UUID('16b259b1-809c-4dac-9aa0-25a7d3e9300c')}
2025-03-22 19:36:46,656 - sqlalchemy.engine.Engine - INFO - DELETE FROM staff WHERE staff.id = %(id)s::UUID
2025-03-22 19:36:46,658 - sqlalchemy.engine.Engine - INFO - [cached since 32.05s ago] {'id': UUID('16b259b1-809c-4dac-9aa0-25a7d3e9300c')}
2025-03-22 19:36:46,660 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 19:36:46,666 - kademia - INFO - Request completed | 49597db5-b2d8-46e4-8fe3-31c8a163db4d | Status: 204 | Time: 0.074s
2025-03-22 19:37:05,557 - kademia - INFO - Request started | 81c3241e-1110-4857-b7b5-d7ae758ab60f | DELETE /api/v1/admin/staff/0e5fe5bc-0112-463a-9186-618943a08073
2025-03-22 19:37:05,560 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:37:05,560 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 19:37:05,561 - sqlalchemy.engine.Engine - INFO - [cached since 51.06s ago] {'id_1': UUID('0e5fe5bc-0112-463a-9186-618943a08073'), 'param_1': 1}
2025-03-22 19:37:05,565 - sqlalchemy.engine.Engine - INFO - SELECT educator_qualifications.id AS educator_qualifications_id, educator_qualifications.educator_id AS educator_qualifications_educator_id, educator_qualifications.name AS educator_qualifications_name, educator_qualifications.description AS educator_qualifications_description, educator_qualifications.created_by AS educator_qualifications_created_by, educator_qualifications.last_modified_by AS educator_qualifications_last_modified_by, educator_qualifications.created_at AS educator_qualifications_created_at, educator_qualifications.last_modified_at AS educator_qualifications_last_modified_at, educator_qualifications.is_archived AS educator_qualifications_is_archived, educator_qualifications.archived_at AS educator_qualifications_archived_at, educator_qualifications.archive_reason AS educator_qualifications_archive_reason, educator_qualifications.archived_by AS educator_qualifications_archived_by 
FROM educator_qualifications 
WHERE %(param_1)s::UUID = educator_qualifications.educator_id
2025-03-22 19:37:05,566 - sqlalchemy.engine.Engine - INFO - [cached since 51.05s ago] {'param_1': UUID('0e5fe5bc-0112-463a-9186-618943a08073')}
2025-03-22 19:37:05,568 - sqlalchemy.engine.Engine - INFO - SELECT subject_educators.id AS subject_educators_id, subject_educators.subject_id AS subject_educators_subject_id, subject_educators.educator_id AS subject_educators_educator_id, subject_educators.level_id AS subject_educators_level_id, subject_educators.academic_year AS subject_educators_academic_year, subject_educators.term AS subject_educators_term, subject_educators.is_active AS subject_educators_is_active, subject_educators.date_assigned AS subject_educators_date_assigned, subject_educators.created_by AS subject_educators_created_by, subject_educators.last_modified_by AS subject_educators_last_modified_by, subject_educators.created_at AS subject_educators_created_at, subject_educators.last_modified_at AS subject_educators_last_modified_at, subject_educators.is_archived AS subject_educators_is_archived, subject_educators.archived_at AS subject_educators_archived_at, subject_educators.archive_reason AS subject_educators_archive_reason, subject_educators.archived_by AS subject_educators_archived_by 
FROM subject_educators 
WHERE %(param_1)s::UUID = subject_educators.educator_id
2025-03-22 19:37:05,570 - sqlalchemy.engine.Engine - INFO - [cached since 51.04s ago] {'param_1': UUID('0e5fe5bc-0112-463a-9186-618943a08073')}
2025-03-22 19:37:05,572 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.code AS student_departments_code, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE %(param_1)s::UUID = student_departments.mentor_id
2025-03-22 19:37:05,573 - sqlalchemy.engine.Engine - INFO - [cached since 51.04s ago] {'param_1': UUID('0e5fe5bc-0112-463a-9186-618943a08073')}
2025-03-22 19:37:05,575 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE %(param_1)s::UUID = classes.supervisor_id
2025-03-22 19:37:05,576 - sqlalchemy.engine.Engine - INFO - [cached since 51.03s ago] {'param_1': UUID('0e5fe5bc-0112-463a-9186-618943a08073')}
2025-03-22 19:37:05,578 - sqlalchemy.engine.Engine - INFO - SELECT access_level_changes.id AS access_level_changes_id, access_level_changes.staff_id AS access_level_changes_staff_id, access_level_changes.previous_level AS access_level_changes_previous_level, access_level_changes.new_level AS access_level_changes_new_level, access_level_changes.reason AS access_level_changes_reason, access_level_changes.changed_at AS access_level_changes_changed_at, access_level_changes.changed_by_id AS access_level_changes_changed_by_id 
FROM access_level_changes 
WHERE %(param_1)s::UUID = access_level_changes.staff_id
2025-03-22 19:37:05,580 - sqlalchemy.engine.Engine - INFO - [cached since 51.02s ago] {'param_1': UUID('0e5fe5bc-0112-463a-9186-618943a08073')}
2025-03-22 19:37:05,583 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.created_by
2025-03-22 19:37:05,585 - sqlalchemy.engine.Engine - INFO - [cached since 51.02s ago] {'param_1': UUID('0e5fe5bc-0112-463a-9186-618943a08073')}
2025-03-22 19:37:05,589 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.last_modified_by
2025-03-22 19:37:05,591 - sqlalchemy.engine.Engine - INFO - [cached since 51.02s ago] {'param_1': UUID('0e5fe5bc-0112-463a-9186-618943a08073')}
2025-03-22 19:37:05,594 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.archived_by
2025-03-22 19:37:05,603 - sqlalchemy.engine.Engine - INFO - [cached since 51.03s ago] {'param_1': UUID('0e5fe5bc-0112-463a-9186-618943a08073')}
2025-03-22 19:37:05,609 - sqlalchemy.engine.Engine - INFO - DELETE FROM educators WHERE educators.id = %(id)s::UUID
2025-03-22 19:37:05,610 - sqlalchemy.engine.Engine - INFO - [cached since 51.02s ago] {'id': UUID('0e5fe5bc-0112-463a-9186-618943a08073')}
2025-03-22 19:37:05,613 - sqlalchemy.engine.Engine - INFO - DELETE FROM staff WHERE staff.id = %(id)s::UUID
2025-03-22 19:37:05,614 - sqlalchemy.engine.Engine - INFO - [cached since 51.01s ago] {'id': UUID('0e5fe5bc-0112-463a-9186-618943a08073')}
2025-03-22 19:37:05,616 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 19:37:05,622 - kademia - INFO - Request completed | 81c3241e-1110-4857-b7b5-d7ae758ab60f | Status: 204 | Time: 0.066s
2025-03-22 19:44:18,269 - kademia - INFO - Application started
2025-03-22 19:46:10,790 - kademia - INFO - Application started
2025-03-22 19:47:34,972 - kademia - INFO - Request started | 5f7a2540-ec14-42cb-9eab-e8ad63b21183 | GET /docs
2025-03-22 19:47:34,974 - kademia - INFO - Request completed | 5f7a2540-ec14-42cb-9eab-e8ad63b21183 | Status: 200 | Time: 0.002s
2025-03-22 19:47:35,285 - kademia - INFO - Request started | dcfe365a-84fe-4686-a81c-639fb2a1df24 | GET /openapi.json
2025-03-22 19:47:35,441 - kademia - INFO - Request completed | dcfe365a-84fe-4686-a81c-639fb2a1df24 | Status: 200 | Time: 0.156s
2025-03-22 19:47:46,294 - kademia - INFO - Request started | bb55543e-99fa-4885-90a1-be307baa5bf8 | POST /api/v1/admin/staff/
2025-03-22 19:47:47,453 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 19:47:47,454 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:47:47,457 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 19:47:47,458 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:47:47,459 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 19:47:47,460 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 19:47:47,463 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:47:47,473 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-22 19:47:47,474 - sqlalchemy.engine.Engine - INFO - [generated in 0.00409s] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'aina.folu@example.com', 'address': '456 Allen Avenue, Lagos', 'phone': '+2348056794345', 'department_id': UUID('00000000-0000-0000-0000-000000000001'), 'role_id': UUID('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('083a8cb4-3248-45d6-a8f1-2f1309d10486'), 'password_hash': '$2b$12$WbybMvEj/j4BFDmxST7tZ.da7MEBx6AUfTM5f/xY8Tkg424hCT9lm', 'first_name': 'Aina', 'last_name': 'Folu', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 19:47:47,481 - sqlalchemy.engine.Engine - INFO - INSERT INTO educators (id) VALUES (%(id)s::UUID)
2025-03-22 19:47:47,483 - sqlalchemy.engine.Engine - INFO - [generated in 0.00114s] {'id': UUID('083a8cb4-3248-45d6-a8f1-2f1309d10486')}
2025-03-22 19:47:47,492 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 19:47:47,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 19:47:47,507 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 19:47:47,509 - sqlalchemy.engine.Engine - INFO - [generated in 0.00143s] {'pk_1': UUID('083a8cb4-3248-45d6-a8f1-2f1309d10486')}
2025-03-22 19:47:47,517 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 19:47:47,519 - kademia - INFO - Request completed | bb55543e-99fa-4885-90a1-be307baa5bf8 | Status: 201 | Time: 1.224s
2025-03-22 20:27:48,268 - kademia - INFO - Request started | 23254394-9cef-47bb-99f9-c361e1b083d8 | POST /api/v1/admin/staff/
2025-03-22 20:27:48,274 - kademia - INFO - Request completed | 23254394-9cef-47bb-99f9-c361e1b083d8 | Status: 422 | Time: 0.005s
2025-03-22 20:35:11,570 - kademia - INFO - Application started
2025-03-22 20:35:40,640 - kademia - INFO - Application started
2025-03-22 20:35:41,399 - kademia - INFO - Request started | 897550b9-b254-4970-9f32-6358d957687c | GET /docs
2025-03-22 20:35:41,401 - kademia - INFO - Request completed | 897550b9-b254-4970-9f32-6358d957687c | Status: 200 | Time: 0.002s
2025-03-22 20:35:41,690 - kademia - INFO - Request started | 8418dab2-914f-46b9-b7d1-92e47e3b9e05 | GET /openapi.json
2025-03-22 20:35:41,813 - kademia - INFO - Request completed | 8418dab2-914f-46b9-b7d1-92e47e3b9e05 | Status: 200 | Time: 0.122s
2025-03-22 20:36:23,712 - kademia - INFO - Application started
2025-03-22 20:36:25,940 - kademia - INFO - Request started | c3494d80-47aa-46fe-8657-c0cc8bb43e35 | GET /docs
2025-03-22 20:36:25,942 - kademia - INFO - Request completed | c3494d80-47aa-46fe-8657-c0cc8bb43e35 | Status: 200 | Time: 0.002s
2025-03-22 20:36:26,100 - kademia - INFO - Request started | 21f92f14-e15d-4961-9ad9-22cdeb9ba1c5 | GET /openapi.json
2025-03-22 20:36:26,196 - kademia - INFO - Request completed | 21f92f14-e15d-4961-9ad9-22cdeb9ba1c5 | Status: 200 | Time: 0.095s
2025-03-22 20:38:40,092 - kademia - INFO - Application started
2025-03-22 20:38:41,550 - kademia - INFO - Request started | ca37fb3e-bf1b-4834-b9ce-5da01f7bc0f0 | GET /docs
2025-03-22 20:38:41,551 - kademia - INFO - Request completed | ca37fb3e-bf1b-4834-b9ce-5da01f7bc0f0 | Status: 200 | Time: 0.001s
2025-03-22 20:38:41,708 - kademia - INFO - Request started | ae8dcf85-e6ee-4d0e-897a-5b35a2520e3b | GET /openapi.json
2025-03-22 20:38:41,823 - kademia - INFO - Request completed | ae8dcf85-e6ee-4d0e-897a-5b35a2520e3b | Status: 200 | Time: 0.115s
2025-03-22 20:39:15,338 - kademia - INFO - Request started | 3ed6d174-4f6a-4293-b4c6-d639b092cdcf | POST /api/v1/admin/staff/
2025-03-22 20:39:15,347 - kademia - INFO - Request completed | 3ed6d174-4f6a-4293-b4c6-d639b092cdcf | Status: 422 | Time: 0.007s
2025-03-22 20:40:06,037 - kademia - INFO - Application started
2025-03-22 20:40:10,356 - kademia - INFO - Request started | 9a4a1e6a-4cde-45cd-9e0f-1e5f9b43d098 | GET /docs
2025-03-22 20:40:10,357 - kademia - INFO - Request completed | 9a4a1e6a-4cde-45cd-9e0f-1e5f9b43d098 | Status: 200 | Time: 0.001s
2025-03-22 20:40:10,515 - kademia - INFO - Request started | 8c6ed319-36eb-4a39-a4b7-ef91d2441eac | GET /openapi.json
2025-03-22 20:40:10,675 - kademia - INFO - Request completed | 8c6ed319-36eb-4a39-a4b7-ef91d2441eac | Status: 200 | Time: 0.159s
2025-03-22 20:40:28,491 - kademia - INFO - Request started | eb17033d-8ed8-49ac-8f2a-173671bee6e8 | POST /api/v1/admin/staff/
2025-03-22 20:40:29,129 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 20:40:29,129 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 20:40:29,131 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 20:40:29,132 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 20:40:29,133 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 20:40:29,133 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 20:40:29,134 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 20:40:29,140 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-22 20:40:29,141 - sqlalchemy.engine.Engine - INFO - [generated in 0.00126s] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'ainea.folu@example.com', 'address': '456 Allen Avenue, Lagos', 'phone': '+2348056394345', 'department_id': UUID('00000000-0000-0000-0000-000000000001'), 'role_id': UUID('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('88022286-ff3c-46df-80b1-c204228793d2'), 'password_hash': '$2b$12$qIQsoJT9S46JIm.QdbHmMOkgSSXQZDtKQqnpMeEncVaK7lGJ3l/9O', 'first_name': 'Aiena', 'last_name': 'Folu', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 20:40:29,148 - sqlalchemy.engine.Engine - INFO - INSERT INTO educators (id) VALUES (%(id)s::UUID)
2025-03-22 20:40:29,148 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] {'id': UUID('88022286-ff3c-46df-80b1-c204228793d2')}
2025-03-22 20:40:29,156 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 20:40:29,160 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 20:40:29,168 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 20:40:29,169 - sqlalchemy.engine.Engine - INFO - [generated in 0.00129s] {'pk_1': UUID('88022286-ff3c-46df-80b1-c204228793d2')}
2025-03-22 20:40:29,174 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 20:40:29,177 - kademia - INFO - Request completed | eb17033d-8ed8-49ac-8f2a-173671bee6e8 | Status: 201 | Time: 0.685s
2025-03-22 20:40:55,975 - kademia - INFO - Request started | a989a532-9c29-4ee9-a006-012d13a47bbe | POST /api/v1/admin/staff/
2025-03-22 20:40:55,979 - kademia - INFO - Request completed | a989a532-9c29-4ee9-a006-012d13a47bbe | Status: 422 | Time: 0.004s
2025-03-22 22:23:11,425 - kademia - INFO - Application started
2025-03-22 22:23:18,526 - kademia - INFO - Request started | 050e2875-6302-43b3-8746-f870427560b4 | GET /
2025-03-22 22:23:18,541 - kademia - INFO - Request completed | 050e2875-6302-43b3-8746-f870427560b4 | Status: 200 | Time: 0.006s
2025-03-22 22:23:19,025 - kademia - INFO - Request started | fb20316e-fca6-4529-9c28-2001c8ea920c | GET /favicon.ico
2025-03-22 22:23:19,064 - kademia - INFO - Request completed | fb20316e-fca6-4529-9c28-2001c8ea920c | Status: 404 | Time: 0.001s
2025-03-22 22:23:21,721 - kademia - INFO - Request started | 0e517e9a-de79-475a-9e90-5bd5495944bb | GET /docs
2025-03-22 22:23:21,721 - kademia - INFO - Request completed | 0e517e9a-de79-475a-9e90-5bd5495944bb | Status: 200 | Time: 0.000s
2025-03-22 22:23:21,952 - kademia - INFO - Request started | d7a50872-4fda-4ab5-a1dc-46cba222914b | GET /openapi.json
2025-03-22 22:23:22,114 - kademia - INFO - Request completed | d7a50872-4fda-4ab5-a1dc-46cba222914b | Status: 200 | Time: 0.162s
2025-03-22 22:24:05,524 - kademia - INFO - Request started | 90959554-3e88-42ab-af1d-ae43c4988b3d | POST /api/v1/admin/staff/
2025-03-22 22:24:06,400 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 22:24:06,402 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:24:06,404 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 22:24:06,404 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:24:06,407 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 22:24:06,408 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:24:06,409 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:24:06,421 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-22 22:24:06,423 - sqlalchemy.engine.Engine - INFO - [generated in 0.00571s] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'aina.folu@example.com', 'address': '456 Allen Avenue, Lagos', 'phone': '+2348056794345', 'department_id': UUID('00000000-0000-0000-0000-000000000001'), 'role_id': UUID('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'password_hash': '$2b$12$0YmcPBpJdMIei0Q7/Q1Do.uOJ9EHDYyn62qFSiECq0LOCH7RMWD/2', 'first_name': 'Aina', 'last_name': 'Folu', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 22:24:06,432 - sqlalchemy.engine.Engine - INFO - INSERT INTO educators (id) VALUES (%(id)s::UUID)
2025-03-22 22:24:06,433 - sqlalchemy.engine.Engine - INFO - [generated in 0.00165s] {'id': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:24:06,453 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:24:06,453 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:24:06,468 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 22:24:06,471 - sqlalchemy.engine.Engine - INFO - [generated in 0.00190s] {'pk_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:24:06,477 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:24:06,477 - kademia - INFO - Request completed | 90959554-3e88-42ab-af1d-ae43c4988b3d | Status: 201 | Time: 0.953s
2025-03-22 22:24:44,813 - kademia - INFO - Request started | e1290e72-61cb-40df-b3dc-d8c0d46896b0 | GET /api/v1/admin/staff/
2025-03-22 22:24:44,816 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:24:44,816 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false ORDER BY staff.last_name DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-22 22:24:44,821 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] {'param_1': 50, 'param_2': 0}
2025-03-22 22:24:44,825 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:24:44,825 - kademia - INFO - Request completed | e1290e72-61cb-40df-b3dc-d8c0d46896b0 | Status: 200 | Time: 0.009s
2025-03-22 22:25:17,552 - kademia - INFO - Request started | 25a1f97d-a0b8-4579-9f15-ddc8f5e6c8c2 | GET /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:25:17,554 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:25:17,557 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:25:17,558 - sqlalchemy.engine.Engine - INFO - [generated in 0.00123s] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:25:17,560 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:25:17,560 - kademia - INFO - Request completed | 25a1f97d-a0b8-4579-9f15-ddc8f5e6c8c2 | Status: 200 | Time: 0.007s
2025-03-22 22:26:24,174 - kademia - INFO - Request started | 536b6cfb-a392-48bc-83c0-64a35d961fd2 | PUT /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:26:24,176 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:26:24,176 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:26:24,180 - sqlalchemy.engine.Engine - INFO - [cached since 66.62s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:26:24,184 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:26:24,184 - sqlalchemy.engine.Engine - INFO - [cached since 66.63s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:26:24,190 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:26:24,192 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:26:24,192 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 22:26:24,195 - sqlalchemy.engine.Engine - INFO - [cached since 137.7s ago] {'pk_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:26:24,200 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:26:24,200 - kademia - INFO - Request completed | 536b6cfb-a392-48bc-83c0-64a35d961fd2 | Status: 200 | Time: 0.026s
2025-03-22 22:26:38,481 - kademia - INFO - Request started | 01f10f03-df82-4305-b5e0-9742105c732f | PUT /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:26:38,483 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:26:38,484 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:26:38,484 - sqlalchemy.engine.Engine - INFO - [cached since 80.93s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:26:38,491 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:26:38,491 - sqlalchemy.engine.Engine - INFO - [cached since 80.94s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:26:38,495 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:26:38,495 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:26:38,498 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 22:26:38,499 - sqlalchemy.engine.Engine - INFO - [cached since 152s ago] {'pk_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:26:38,501 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:26:38,503 - kademia - INFO - Request completed | 01f10f03-df82-4305-b5e0-9742105c732f | Status: 200 | Time: 0.022s
2025-03-22 22:27:07,084 - kademia - INFO - Request started | 380f4b54-19a7-4cc3-a917-0a9aa044aec9 | PUT /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:27:07,086 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:27:07,086 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:27:07,088 - sqlalchemy.engine.Engine - INFO - [cached since 109.5s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:27:07,094 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:27:07,096 - sqlalchemy.engine.Engine - INFO - [cached since 109.5s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:27:07,097 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:27:07,100 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:27:07,101 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 22:27:07,102 - sqlalchemy.engine.Engine - INFO - [cached since 180.6s ago] {'pk_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:27:07,105 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:27:07,108 - kademia - INFO - Request completed | 380f4b54-19a7-4cc3-a917-0a9aa044aec9 | Status: 200 | Time: 0.023s
2025-03-22 22:28:47,071 - kademia - INFO - Request started | fc266464-818c-4af2-b227-efc88d301c01 | GET /docs
2025-03-22 22:28:47,071 - kademia - INFO - Request completed | fc266464-818c-4af2-b227-efc88d301c01 | Status: 200 | Time: 0.000s
2025-03-22 22:28:47,267 - kademia - INFO - Request started | d97485e4-dee7-4c0d-a91d-430284fa42a1 | GET /openapi.json
2025-03-22 22:28:47,272 - kademia - INFO - Request completed | d97485e4-dee7-4c0d-a91d-430284fa42a1 | Status: 200 | Time: 0.004s
2025-03-22 22:29:16,440 - kademia - INFO - Request started | 7178fbda-e352-4020-922c-ab4aeb38b52f | PUT /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:29:16,445 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:29:16,445 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:29:16,445 - sqlalchemy.engine.Engine - INFO - [cached since 238.9s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:29:16,452 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:29:16,455 - sqlalchemy.engine.Engine - INFO - [cached since 238.9s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:29:16,457 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:29:16,459 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:29:16,460 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 22:29:16,461 - sqlalchemy.engine.Engine - INFO - [cached since 310s ago] {'pk_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:29:16,465 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:29:16,466 - kademia - INFO - Request completed | 7178fbda-e352-4020-922c-ab4aeb38b52f | Status: 200 | Time: 0.027s
2025-03-22 22:30:09,307 - kademia - INFO - Request started | 34bc2023-2bea-4f4a-af79-36a2e071fc1c | GET /docs
2025-03-22 22:30:09,309 - kademia - INFO - Request completed | 34bc2023-2bea-4f4a-af79-36a2e071fc1c | Status: 200 | Time: 0.003s
2025-03-22 22:30:09,510 - kademia - INFO - Request started | 86018370-0490-4501-9fd5-a3ab6c53a6f9 | GET /openapi.json
2025-03-22 22:30:09,515 - kademia - INFO - Request completed | 86018370-0490-4501-9fd5-a3ab6c53a6f9 | Status: 200 | Time: 0.004s
2025-03-22 22:31:14,629 - kademia - INFO - Request started | fea419b0-7017-4931-9094-1ba6002c3f11 | PUT /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:31:14,630 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:31:14,630 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:31:14,634 - sqlalchemy.engine.Engine - INFO - [cached since 357.1s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:31:14,639 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:31:14,640 - sqlalchemy.engine.Engine - INFO - [cached since 357.1s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:31:14,642 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:31:14,644 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:31:14,645 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 22:31:14,645 - sqlalchemy.engine.Engine - INFO - [cached since 428.2s ago] {'pk_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:31:14,649 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:31:14,652 - kademia - INFO - Request completed | fea419b0-7017-4931-9094-1ba6002c3f11 | Status: 200 | Time: 0.023s
2025-03-22 22:37:10,383 - kademia - INFO - Application started
2025-03-22 22:37:14,264 - kademia - INFO - Request started | 358ae0c1-cbd7-4261-818b-db38255732f6 | GET /docs
2025-03-22 22:37:14,268 - kademia - INFO - Request completed | 358ae0c1-cbd7-4261-818b-db38255732f6 | Status: 200 | Time: 0.004s
2025-03-22 22:37:14,469 - kademia - INFO - Request started | c465780b-86e5-4ac9-b4fa-e4fd147a5b90 | GET /openapi.json
2025-03-22 22:37:14,601 - kademia - INFO - Request completed | c465780b-86e5-4ac9-b4fa-e4fd147a5b90 | Status: 200 | Time: 0.131s
2025-03-22 22:37:37,773 - kademia - INFO - Request started | be776957-f971-4879-9b87-fc5e90075ff7 | PUT /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:37:38,214 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 22:37:38,215 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:37:38,217 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 22:37:38,217 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:37:38,220 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 22:37:38,221 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:37:38,222 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:37:38,230 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:37:38,232 - sqlalchemy.engine.Engine - INFO - [generated in 0.00127s] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:37:38,245 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:37:38,247 - kademia - ERROR - Unhandled exception | be776957-f971-4879-9b87-fc5e90075ff7 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 40, in update_staff
    return staff_crud.update_staff(staff_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 63, in update_staff
    updated_staff = self.factory.update_staff(staff_id, data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 138, in update_staff
    existing.last_name = self.validator.validate_address(data.pop('address'))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 31, in validate_address
    raise TextTooShortError(entry=value, domain=self.domain, min_length=12)
app.core.errors.input_validation_errors.TextTooShortError
2025-03-22 22:37:38,279 - kademia - WARNING - TextTooShortError | be776957-f971-4879-9b87-fc5e90075ff7 | Domain: USER PROFILE-- Input attempted with short text: 45
2025-03-22 22:37:52,814 - kademia - INFO - Request started | b24714e8-0748-44d5-845e-2ca83334bcef | PUT /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:37:52,818 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:37:52,818 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:37:52,821 - sqlalchemy.engine.Engine - INFO - [cached since 14.59s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:37:52,830 - sqlalchemy.engine.Engine - INFO - UPDATE staff SET department_id=%(department_id)s::UUID, first_name=%(first_name)s, last_name=%(last_name)s, last_modified_at=now() WHERE staff.id = %(staff_id)s::UUID
2025-03-22 22:37:52,830 - sqlalchemy.engine.Engine - INFO - [generated in 0.00091s] {'department_id': UUID('00000000-0000-0000-0000-000000000006'), 'first_name': 'aina.kincaid@example.com', 'last_name': '456 Allen Avenue, Lagos', 'staff_id': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:37:52,839 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:37:52,839 - sqlalchemy.engine.Engine - INFO - [cached since 14.61s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:37:52,842 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:37:52,842 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:37:52,849 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 22:37:52,852 - sqlalchemy.engine.Engine - INFO - [generated in 0.00123s] {'pk_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:37:52,857 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:37:52,863 - kademia - ERROR - Unhandled exception | b24714e8-0748-44d5-845e-2ca83334bcef | 1 validation error for StaffResponse
  Input should be a valid dictionary or instance of StaffResponse [type=model_type, input_value=Educator(name=aina.kincai...456 Allen Avenue, Lagos), input_type=Educator]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 40, in update_staff
    return staff_crud.update_staff(staff_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 64, in update_staff
    return StaffResponse.model_validate(updated_staff)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for StaffResponse
  Input should be a valid dictionary or instance of StaffResponse [type=model_type, input_value=Educator(name=aina.kincai...456 Allen Avenue, Lagos), input_type=Educator]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
2025-03-22 22:37:52,873 - kademia - ERROR - Unhandled exception | b24714e8-0748-44d5-845e-2ca83334bcef | 1 validation error for StaffResponse
  Input should be a valid dictionary or instance of StaffResponse [type=model_type, input_value=Educator(name=aina.kincai...456 Allen Avenue, Lagos), input_type=Educator]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 40, in update_staff
    return staff_crud.update_staff(staff_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 64, in update_staff
    return StaffResponse.model_validate(updated_staff)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for StaffResponse
  Input should be a valid dictionary or instance of StaffResponse [type=model_type, input_value=Educator(name=aina.kincai...456 Allen Avenue, Lagos), input_type=Educator]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
2025-03-22 22:39:54,796 - kademia - INFO - Application started
2025-03-22 22:39:59,823 - kademia - INFO - Request started | 212353d2-f982-489e-b969-2c6668665fd3 | GET /docs
2025-03-22 22:39:59,824 - kademia - INFO - Request completed | 212353d2-f982-489e-b969-2c6668665fd3 | Status: 200 | Time: 0.001s
2025-03-22 22:40:00,023 - kademia - INFO - Request started | 044daba6-f5cd-4b97-a619-d1c996e89d66 | GET /openapi.json
2025-03-22 22:40:00,289 - kademia - INFO - Request completed | 044daba6-f5cd-4b97-a619-d1c996e89d66 | Status: 200 | Time: 0.266s
2025-03-22 22:40:18,859 - kademia - INFO - Request started | 69b5a10e-3ab4-47ed-9ac5-9cf05b98c8f6 | PUT /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:40:19,262 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 22:40:19,263 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:40:19,263 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 22:40:19,265 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:40:19,265 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 22:40:19,265 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:40:19,269 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:40:19,276 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:40:19,278 - sqlalchemy.engine.Engine - INFO - [generated in 0.00119s] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:40:19,290 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:40:19,290 - kademia - ERROR - Unhandled exception | 69b5a10e-3ab4-47ed-9ac5-9cf05b98c8f6 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 40, in update_staff
    return staff_crud.update_staff(staff_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 63, in update_staff
    updated_staff = self.factory.update_staff(staff_id, data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 134, in update_staff
    existing.first_name = self.validator.validate_staff_email(data.pop('email_address'))
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 42, in validate_staff_email
    raise TextTooShortError(entry=value, domain=self.domain, min_length=12)
app.core.errors.input_validation_errors.TextTooShortError
2025-03-22 22:40:19,303 - kademia - WARNING - TextTooShortError | 69b5a10e-3ab4-47ed-9ac5-9cf05b98c8f6 | Domain: USER PROFILE-- Input attempted with short text: am
2025-03-22 22:40:29,207 - kademia - INFO - Request started | 7cb5a3f6-0c53-4cf1-9636-433b21688c92 | PUT /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:40:29,210 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:40:29,210 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:40:29,210 - sqlalchemy.engine.Engine - INFO - [cached since 9.937s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:40:29,210 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:40:29,218 - kademia - ERROR - Unhandled exception | 7cb5a3f6-0c53-4cf1-9636-433b21688c92 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 40, in update_staff
    return staff_crud.update_staff(staff_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 63, in update_staff
    updated_staff = self.factory.update_staff(staff_id, data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 130, in update_staff
    existing.first_name = self.validator.validate_name(data.pop('first_name'))
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 20, in validate_name
    raise InvalidCharacterError(entry=value, domain=self.domain)
app.core.errors.input_validation_errors.InvalidCharacterError
2025-03-22 22:40:29,223 - kademia - WARNING - InvalidCharacterError | 7cb5a3f6-0c53-4cf1-9636-433b21688c92 | Domain: USER PROFILE-- Input attempted with invalid character: Sa2ilver
2025-03-22 22:40:41,386 - kademia - INFO - Request started | a61a03a7-74c2-4b8c-8c54-0623fa104acd | PUT /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:40:41,394 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:40:41,394 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:40:41,394 - sqlalchemy.engine.Engine - INFO - [cached since 22.12s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:40:41,403 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:40:41,404 - kademia - ERROR - Unhandled exception | a61a03a7-74c2-4b8c-8c54-0623fa104acd | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 40, in update_staff
    return staff_crud.update_staff(staff_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 63, in update_staff
    updated_staff = self.factory.update_staff(staff_id, data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 136, in update_staff
    existing.last_name = self.validator.validate_phone(data.pop('phone'))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 74, in validate_phone
    raise InvalidPhoneError(entry=value)
app.core.errors.input_validation_errors.InvalidPhoneError
2025-03-22 22:40:41,411 - kademia - WARNING - InvalidPhoneError | a61a03a7-74c2-4b8c-8c54-0623fa104acd | Phone number entry attempted with invalid format: 2348056794506
2025-03-22 22:41:19,388 - kademia - INFO - Application started
2025-03-22 22:41:31,781 - kademia - INFO - Request started | 79b1fb22-47b9-432b-943e-580b7bc29c69 | PUT /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:41:32,340 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 22:41:32,342 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:41:32,345 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 22:41:32,345 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:41:32,345 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 22:41:32,345 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:41:32,345 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:41:32,358 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:41:32,359 - sqlalchemy.engine.Engine - INFO - [generated in 0.00145s] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:41:32,379 - sqlalchemy.engine.Engine - INFO - UPDATE staff SET department_id=%(department_id)s::UUID, last_modified_at=now() WHERE staff.id = %(staff_id)s::UUID
2025-03-22 22:41:32,379 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] {'department_id': UUID('00000000-0000-0000-0000-000000000009'), 'staff_id': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:41:32,383 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:41:32,384 - sqlalchemy.engine.Engine - INFO - [cached since 0.02684s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:41:32,388 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:41:32,396 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:41:32,401 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 22:41:32,403 - sqlalchemy.engine.Engine - INFO - [generated in 0.00230s] {'pk_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:41:32,412 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:41:32,413 - kademia - INFO - Request completed | 79b1fb22-47b9-432b-943e-580b7bc29c69 | Status: 200 | Time: 0.631s
2025-03-22 22:42:32,192 - kademia - INFO - Request started | a930702e-3d4d-4c57-8bd4-dd517b344a91 | PATCH /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:42:32,195 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:42:32,195 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:42:32,195 - sqlalchemy.engine.Engine - INFO - [cached since 59.84s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:42:32,204 - sqlalchemy.engine.Engine - INFO - UPDATE staff SET last_modified_at=now(), is_archived=%(is_archived)s, archived_at=%(archived_at)s, archive_reason=%(archive_reason)s, archived_by=%(archived_by)s::UUID WHERE staff.id = %(staff_id)s::UUID
2025-03-22 22:42:32,205 - sqlalchemy.engine.Engine - INFO - [generated in 0.00094s] {'is_archived': True, 'archived_at': datetime.datetime(2025, 3, 22, 22, 42, 32, 195647, tzinfo=datetime.timezone.utc), 'archive_reason': 'ERROR', 'archived_by': UUID('00000000-0000-0000-0000-000000000000'), 'staff_id': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:42:32,205 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:42:32,211 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:42:32,212 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 22:42:32,214 - sqlalchemy.engine.Engine - INFO - [cached since 59.81s ago] {'pk_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:42:32,217 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:42:32,217 - kademia - INFO - Request completed | a930702e-3d4d-4c57-8bd4-dd517b344a91 | Status: 204 | Time: 0.025s
2025-03-22 22:42:41,166 - kademia - INFO - Request started | ad688e58-c9fb-44ae-9792-85d25b7904c9 | PUT /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:42:41,169 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:42:41,169 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:42:41,169 - sqlalchemy.engine.Engine - INFO - [cached since 68.81s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:42:41,169 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:42:41,175 - kademia - ERROR - Unhandled exception | ad688e58-c9fb-44ae-9792-85d25b7904c9 | Staff with id:21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. Detail Staff not with id 21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. DETAIL: Record not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 40, in update_staff
    return staff_crud.update_staff(staff_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 63, in update_staff
    updated_staff = self.factory.update_staff(staff_id, data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 127, in update_staff
    existing = self.get_staff(staff_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 105, in get_staff
    raise StaffNotFoundError(id=staff_id, detail = str(e))
app.core.errors.user_profile_errors.StaffNotFoundError: Staff with id:21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. Detail Staff not with id 21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. DETAIL: Record not found
2025-03-22 22:42:41,186 - kademia - WARNING - EntityNotFoundError | ad688e58-c9fb-44ae-9792-85d25b7904c9 | Staff with id:21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. Detail Staff not with id 21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. DETAIL: Record not found
2025-03-22 22:42:52,505 - kademia - INFO - Request started | c2aef6b2-6130-4627-b027-ad2f934019d1 | GET /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:42:52,505 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:42:52,508 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:42:52,508 - sqlalchemy.engine.Engine - INFO - [cached since 80.15s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:42:52,508 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:42:52,508 - kademia - ERROR - Unhandled exception | c2aef6b2-6130-4627-b027-ad2f934019d1 | Staff with id:21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. Detail Staff not with id 21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. DETAIL: Record not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 33, in get_staff
    return staff_crud.get_staff(staff_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 41, in get_staff
    staff = self.factory.get_staff(staff_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 105, in get_staff
    raise StaffNotFoundError(id=staff_id, detail = str(e))
app.core.errors.user_profile_errors.StaffNotFoundError: Staff with id:21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. Detail Staff not with id 21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. DETAIL: Record not found
2025-03-22 22:42:52,520 - kademia - WARNING - EntityNotFoundError | c2aef6b2-6130-4627-b027-ad2f934019d1 | Staff with id:21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. Detail Staff not with id 21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. DETAIL: Record not found
2025-03-22 22:43:05,242 - kademia - INFO - Request started | d333d7e4-38cd-45e0-bed4-c615302a0204 | GET /api/v1/admin/staff/
2025-03-22 22:43:05,249 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:43:05,252 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false ORDER BY staff.last_name DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-22 22:43:05,252 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] {'param_1': 50, 'param_2': 0}
2025-03-22 22:43:05,257 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:43:05,257 - kademia - INFO - Request completed | d333d7e4-38cd-45e0-bed4-c615302a0204 | Status: 200 | Time: 0.015s
2025-03-22 22:43:18,335 - kademia - INFO - Request started | d8cb0c78-ec11-4043-bb12-6bde4e884ea0 | POST /api/v1/admin/staff/
2025-03-22 22:43:18,786 - kademia - ERROR - Unhandled exception | d8cb0c78-ec11-4043-bb12-6bde4e884ea0 | 'StaffCreate' object has no attribute 'status'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 65, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 43, in create_staff_instance
    "status": data.status,
              ^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\pydantic\main.py", line 892, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'StaffCreate' object has no attribute 'status'
2025-03-22 22:43:18,786 - kademia - ERROR - Unhandled exception | d8cb0c78-ec11-4043-bb12-6bde4e884ea0 | 'StaffCreate' object has no attribute 'status'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 65, in create_staff
    new_staff = create_staff_instance(staff_data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 43, in create_staff_instance
    "status": data.status,
              ^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\pydantic\main.py", line 892, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'StaffCreate' object has no attribute 'status'
2025-03-22 22:43:55,231 - kademia - INFO - Application started
2025-03-22 22:43:55,252 - kademia - INFO - Request started | 8109d047-f73f-4146-8a13-4d5b98b4871c | GET /docs
2025-03-22 22:43:55,252 - kademia - INFO - Request completed | 8109d047-f73f-4146-8a13-4d5b98b4871c | Status: 200 | Time: 0.000s
2025-03-22 22:43:55,437 - kademia - INFO - Request started | 738cd7a4-f52d-4f30-803c-e8cd9adb6179 | GET /openapi.json
2025-03-22 22:43:55,607 - kademia - INFO - Request completed | 738cd7a4-f52d-4f30-803c-e8cd9adb6179 | Status: 200 | Time: 0.170s
2025-03-22 22:44:07,340 - kademia - INFO - Request started | 7455e02c-c495-45cb-b4cd-10e9127a9c6a | POST /api/v1/admin/staff/
2025-03-22 22:44:08,954 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 22:44:08,954 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:44:08,954 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 22:44:08,954 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:44:08,962 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 22:44:08,962 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:44:08,962 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:44:08,976 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-22 22:44:08,977 - sqlalchemy.engine.Engine - INFO - [generated in 0.00177s] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'aina.folu@example.com', 'address': '456 Allen Avenue, Lagos', 'phone': '+2348056794345', 'department_id': UUID('00000000-0000-0000-0000-000000000001'), 'role_id': UUID('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('342f9663-0b41-4bed-b18b-cc3286785149'), 'password_hash': '$2b$12$Aips/djdIH7mBYI16GJ5heNK0P6aopMw7cQgEdeqgOtLLecggFMZ.', 'first_name': 'Aina', 'last_name': 'Folu', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 22:44:08,990 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:44:08,993 - kademia - ERROR - Unhandled exception | 7455e02c-c495-45cb-b4cd-10e9127a9c6a | Duplicate staff creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "staff_email_address_key"
detail:  key (email_address)=(aina.folu@example.com) already exists.

[sql: insert into staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::uuid, %(role_id)s::uuid, %(date_joined)s, %(date_left)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning staff.created_at, staff.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'staff', 'status': 'active', 'availability': 'available', 'staff_type': 'educator', 'image_url': none, 'email_address': 'aina.folu@example.com', 'address': '456 allen avenue, lagos', 'phone': '+2348056794345', 'department_id': uuid('00000000-0000-0000-0000-000000000001'), 'role_id': uuid('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': none, 'id': uuid('342f9663-0b41-4bed-b18b-cc3286785149'), 'password_hash': '$2b$12$aips/djdih7mbyi16gj5henk0p6aopmw7cqgedeqgotllecggfmz.', 'first_name': 'aina', 'last_name': 'folu', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 20, in create_staff
    return staff_crud.create_staff(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 30, in create_staff
    staff = self.factory.create_staff(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 74, in create_staff
    raise DuplicateStaffError(
app.core.errors.user_profile_errors.DuplicateStaffError: Duplicate staff creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "staff_email_address_key"
detail:  key (email_address)=(aina.folu@example.com) already exists.

[sql: insert into staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::uuid, %(role_id)s::uuid, %(date_joined)s, %(date_left)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning staff.created_at, staff.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'staff', 'status': 'active', 'availability': 'available', 'staff_type': 'educator', 'image_url': none, 'email_address': 'aina.folu@example.com', 'address': '456 allen avenue, lagos', 'phone': '+2348056794345', 'department_id': uuid('00000000-0000-0000-0000-000000000001'), 'role_id': uuid('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': none, 'id': uuid('342f9663-0b41-4bed-b18b-cc3286785149'), 'password_hash': '$2b$12$aips/djdih7mbyi16gj5henk0p6aopmw7cqgedeqgotllecggfmz.', 'first_name': 'aina', 'last_name': 'folu', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 22:44:09,009 - kademia - WARNING - UniqueViolationError | 7455e02c-c495-45cb-b4cd-10e9127a9c6a | Duplicate staff creation attempted: unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "staff_email_address_key"
detail:  key (email_address)=(aina.folu@example.com) already exists.

[sql: insert into staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::uuid, %(role_id)s::uuid, %(date_joined)s, %(date_left)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning staff.created_at, staff.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'staff', 'status': 'active', 'availability': 'available', 'staff_type': 'educator', 'image_url': none, 'email_address': 'aina.folu@example.com', 'address': '456 allen avenue, lagos', 'phone': '+2348056794345', 'department_id': uuid('00000000-0000-0000-0000-000000000001'), 'role_id': uuid('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': none, 'id': uuid('342f9663-0b41-4bed-b18b-cc3286785149'), 'password_hash': '$2b$12$aips/djdih7mbyi16gj5henk0p6aopmw7cqgedeqgotllecggfmz.', 'first_name': 'aina', 'last_name': 'folu', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 22:44:24,974 - kademia - INFO - Request started | 2764058e-cb4c-441e-8d5d-d46ba034a1c1 | GET /api/v1/admin/archive/staff/
2025-03-22 22:44:24,977 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:44:24,982 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = true ORDER BY staff.last_name DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-22 22:44:24,982 - sqlalchemy.engine.Engine - INFO - [generated in 0.00117s] {'param_1': 50, 'param_2': 0}
2025-03-22 22:44:24,991 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:44:24,991 - kademia - INFO - Request completed | 2764058e-cb4c-441e-8d5d-d46ba034a1c1 | Status: 200 | Time: 0.017s
2025-03-22 22:44:40,128 - kademia - INFO - Request started | 28c55e97-7109-4e0b-a08b-5124473b70cf | DELETE /api/v1/admin/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:44:40,132 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:44:40,132 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:44:40,135 - sqlalchemy.engine.Engine - INFO - [generated in 0.00110s] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:44:40,138 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:44:40,139 - kademia - ERROR - Unhandled exception | 28c55e97-7109-4e0b-a08b-5124473b70cf | Staff with id:21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. Detail Staff not with id 21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. DETAIL: object not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\staff\staff.py", line 53, in delete_staff
    return staff_crud.delete_staff(staff_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\staff.py", line 81, in delete_staff
    self.factory.delete_staff(staff_id)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\staff.py", line 192, in delete_staff
    raise StaffNotFoundError(id=staff_id, detail = str(e))
app.core.errors.user_profile_errors.StaffNotFoundError: Staff with id:21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. Detail Staff not with id 21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. DETAIL: object not found
2025-03-22 22:44:40,147 - kademia - WARNING - EntityNotFoundError | 28c55e97-7109-4e0b-a08b-5124473b70cf | Staff with id:21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. Detail Staff not with id 21199fb7-ccc7-4073-8fcf-faa0eb04c0f4 not found. DETAIL: object not found
2025-03-22 22:44:54,269 - kademia - INFO - Request started | c2a0cdb1-b93a-4147-a4af-242d895a0807 | GET /api/v1/admin/archive/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:44:54,270 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:44:54,270 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = true AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:44:54,270 - sqlalchemy.engine.Engine - INFO - [generated in 0.00101s] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:44:54,280 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:44:54,280 - kademia - INFO - Request completed | c2a0cdb1-b93a-4147-a4af-242d895a0807 | Status: 200 | Time: 0.010s
2025-03-22 22:45:11,788 - kademia - INFO - Request started | cee2dc7d-617a-47f4-b810-804343f4f253 | DELETE /api/v1/admin/archive/staff/21199fb7-ccc7-4073-8fcf-faa0eb04c0f4
2025-03-22 22:45:11,788 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:45:11,788 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = true AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:45:11,791 - sqlalchemy.engine.Engine - INFO - [cached since 17.52s ago] {'id_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4'), 'param_1': 1}
2025-03-22 22:45:11,796 - sqlalchemy.engine.Engine - INFO - SELECT educator_qualifications.id AS educator_qualifications_id, educator_qualifications.educator_id AS educator_qualifications_educator_id, educator_qualifications.name AS educator_qualifications_name, educator_qualifications.description AS educator_qualifications_description, educator_qualifications.created_by AS educator_qualifications_created_by, educator_qualifications.last_modified_by AS educator_qualifications_last_modified_by, educator_qualifications.created_at AS educator_qualifications_created_at, educator_qualifications.last_modified_at AS educator_qualifications_last_modified_at, educator_qualifications.is_archived AS educator_qualifications_is_archived, educator_qualifications.archived_at AS educator_qualifications_archived_at, educator_qualifications.archive_reason AS educator_qualifications_archive_reason, educator_qualifications.archived_by AS educator_qualifications_archived_by 
FROM educator_qualifications 
WHERE %(param_1)s::UUID = educator_qualifications.educator_id
2025-03-22 22:45:11,796 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] {'param_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:45:11,811 - sqlalchemy.engine.Engine - INFO - SELECT subject_educators.id AS subject_educators_id, subject_educators.subject_id AS subject_educators_subject_id, subject_educators.educator_id AS subject_educators_educator_id, subject_educators.level_id AS subject_educators_level_id, subject_educators.academic_year AS subject_educators_academic_year, subject_educators.term AS subject_educators_term, subject_educators.is_active AS subject_educators_is_active, subject_educators.date_assigned AS subject_educators_date_assigned, subject_educators.created_by AS subject_educators_created_by, subject_educators.last_modified_by AS subject_educators_last_modified_by, subject_educators.created_at AS subject_educators_created_at, subject_educators.last_modified_at AS subject_educators_last_modified_at, subject_educators.is_archived AS subject_educators_is_archived, subject_educators.archived_at AS subject_educators_archived_at, subject_educators.archive_reason AS subject_educators_archive_reason, subject_educators.archived_by AS subject_educators_archived_by 
FROM subject_educators 
WHERE %(param_1)s::UUID = subject_educators.educator_id
2025-03-22 22:45:11,811 - sqlalchemy.engine.Engine - INFO - [generated in 0.00108s] {'param_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:45:11,820 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.code AS student_departments_code, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE %(param_1)s::UUID = student_departments.mentor_id
2025-03-22 22:45:11,820 - sqlalchemy.engine.Engine - INFO - [generated in 0.00105s] {'param_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:45:11,841 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE %(param_1)s::UUID = classes.supervisor_id
2025-03-22 22:45:11,844 - sqlalchemy.engine.Engine - INFO - [generated in 0.00221s] {'param_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:45:11,853 - sqlalchemy.engine.Engine - INFO - SELECT access_level_changes.id AS access_level_changes_id, access_level_changes.staff_id AS access_level_changes_staff_id, access_level_changes.previous_level AS access_level_changes_previous_level, access_level_changes.new_level AS access_level_changes_new_level, access_level_changes.reason AS access_level_changes_reason, access_level_changes.changed_at AS access_level_changes_changed_at, access_level_changes.changed_by_id AS access_level_changes_changed_by_id 
FROM access_level_changes 
WHERE %(param_1)s::UUID = access_level_changes.staff_id
2025-03-22 22:45:11,854 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] {'param_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:45:11,861 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.created_by
2025-03-22 22:45:11,861 - sqlalchemy.engine.Engine - INFO - [generated in 0.00201s] {'param_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:45:11,861 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.last_modified_by
2025-03-22 22:45:11,861 - sqlalchemy.engine.Engine - INFO - [generated in 0.00096s] {'param_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:45:11,876 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.archived_by
2025-03-22 22:45:11,878 - sqlalchemy.engine.Engine - INFO - [generated in 0.00138s] {'param_1': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:45:11,883 - sqlalchemy.engine.Engine - INFO - DELETE FROM educators WHERE educators.id = %(id)s::UUID
2025-03-22 22:45:11,883 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] {'id': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:45:11,894 - sqlalchemy.engine.Engine - INFO - DELETE FROM staff WHERE staff.id = %(id)s::UUID
2025-03-22 22:45:11,894 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] {'id': UUID('21199fb7-ccc7-4073-8fcf-faa0eb04c0f4')}
2025-03-22 22:45:11,897 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:45:11,900 - kademia - INFO - Request completed | cee2dc7d-617a-47f4-b810-804343f4f253 | Status: 204 | Time: 0.113s
2025-03-22 22:45:21,893 - kademia - INFO - Request started | e9304273-0ec3-4998-baa9-10d01daa7a42 | POST /api/v1/admin/staff/
2025-03-22 22:45:22,330 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:45:22,332 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff (access_level, user_type, status, availability, staff_type, image_url, email_address, address, phone, department_id, role_id, date_joined, date_left, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(status)s, %(availability)s, %(staff_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(department_id)s::UUID, %(role_id)s::UUID, %(date_joined)s, %(date_left)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff.created_at, staff.last_modified_at
2025-03-22 22:45:22,332 - sqlalchemy.engine.Engine - INFO - [cached since 73.36s ago] {'access_level': 'READ', 'user_type': 'STAFF', 'status': 'ACTIVE', 'availability': 'AVAILABLE', 'staff_type': 'Educator', 'image_url': None, 'email_address': 'aina.folu@example.com', 'address': '456 Allen Avenue, Lagos', 'phone': '+2348056794345', 'department_id': UUID('00000000-0000-0000-0000-000000000001'), 'role_id': UUID('00000000-0000-0000-0000-000000000002'), 'date_joined': datetime.date(2024, 1, 15), 'date_left': None, 'id': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68'), 'password_hash': '$2b$12$PHaJ56wif2hd8kfUsJjeu.J70PUx9SVAGcAXeHLyphj7K4P93FPFC', 'first_name': 'Aina', 'last_name': 'Folu', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 22:45:22,335 - sqlalchemy.engine.Engine - INFO - INSERT INTO educators (id) VALUES (%(id)s::UUID)
2025-03-22 22:45:22,335 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] {'id': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:45:22,341 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:45:22,346 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:45:22,348 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 22:45:22,350 - sqlalchemy.engine.Engine - INFO - [generated in 0.00100s] {'pk_1': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:45:22,354 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:45:22,354 - kademia - INFO - Request completed | e9304273-0ec3-4998-baa9-10d01daa7a42 | Status: 201 | Time: 0.462s
2025-03-22 22:45:55,532 - kademia - INFO - Request started | efb803a2-019f-4c07-8f4f-e21d67ae5151 | PATCH /api/v1/admin/staff/f6338a1e-4d0b-4348-b178-4433a4107c68
2025-03-22 22:45:55,532 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:45:55,532 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:45:55,532 - sqlalchemy.engine.Engine - INFO - [cached since 75.4s ago] {'id_1': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68'), 'param_1': 1}
2025-03-22 22:45:55,541 - sqlalchemy.engine.Engine - INFO - UPDATE staff SET last_modified_at=now(), is_archived=%(is_archived)s, archived_at=%(archived_at)s, archive_reason=%(archive_reason)s, archived_by=%(archived_by)s::UUID WHERE staff.id = %(staff_id)s::UUID
2025-03-22 22:45:55,541 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] {'is_archived': True, 'archived_at': datetime.datetime(2025, 3, 22, 22, 45, 55, 539482, tzinfo=datetime.timezone.utc), 'archive_reason': 'ERROR', 'archived_by': UUID('00000000-0000-0000-0000-000000000000'), 'staff_id': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:45:55,541 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:45:55,549 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:45:55,549 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level, staff.user_type, staff.status, staff.availability, staff.staff_type, staff.image_url, staff.email_address, staff.address, staff.phone, staff.department_id, staff.role_id, staff.date_joined, staff.date_left, educators.id, staff.id AS id_1, staff.password_hash, staff.first_name, staff.last_name, staff.gender, staff.last_login, staff.deletion_eligible, staff.created_by, staff.last_modified_by, staff.created_at, staff.last_modified_at, staff.is_archived, staff.archived_at, staff.archive_reason, staff.archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 22:45:55,552 - sqlalchemy.engine.Engine - INFO - [cached since 33.2s ago] {'pk_1': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:45:55,557 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:45:55,557 - kademia - INFO - Request completed | efb803a2-019f-4c07-8f4f-e21d67ae5151 | Status: 204 | Time: 0.025s
2025-03-22 22:46:06,204 - kademia - INFO - Request started | d8f40820-a270-462d-a61c-f07556f989a4 | PATCH /api/v1/admin/archive/staff/f6338a1e-4d0b-4348-b178-4433a4107c68
2025-03-22 22:46:06,205 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:46:06,208 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = true AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:46:06,208 - sqlalchemy.engine.Engine - INFO - [cached since 71.93s ago] {'id_1': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68'), 'param_1': 1}
2025-03-22 22:46:06,208 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = true AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:46:06,212 - sqlalchemy.engine.Engine - INFO - [cached since 71.94s ago] {'id_1': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68'), 'param_1': 1}
2025-03-22 22:46:06,214 - sqlalchemy.engine.Engine - INFO - UPDATE staff SET last_modified_at=now(), is_archived=%(is_archived)s WHERE staff.id = %(staff_id)s::UUID
2025-03-22 22:46:06,214 - sqlalchemy.engine.Engine - INFO - [generated in 0.00072s] {'is_archived': False, 'staff_id': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:46:06,218 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:46:06,222 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:46:06,222 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, educators.id AS educators_id, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff JOIN educators ON educators.id = staff.id 
WHERE staff.id = %(pk_1)s::UUID
2025-03-22 22:46:06,222 - sqlalchemy.engine.Engine - INFO - [generated in 0.00146s] {'pk_1': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:46:06,230 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:46:06,230 - kademia - INFO - Request completed | d8f40820-a270-462d-a61c-f07556f989a4 | Status: 200 | Time: 0.026s
2025-03-22 22:46:18,069 - kademia - INFO - Request started | 3ea7095a-530e-419d-a3ff-4f6f89d8ec45 | DELETE /api/v1/admin/staff/f6338a1e-4d0b-4348-b178-4433a4107c68
2025-03-22 22:46:18,070 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:46:18,070 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.is_archived = false AND staff.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:46:18,070 - sqlalchemy.engine.Engine - INFO - [cached since 97.94s ago] {'id_1': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68'), 'param_1': 1}
2025-03-22 22:46:18,073 - sqlalchemy.engine.Engine - INFO - SELECT educator_qualifications.id AS educator_qualifications_id, educator_qualifications.educator_id AS educator_qualifications_educator_id, educator_qualifications.name AS educator_qualifications_name, educator_qualifications.description AS educator_qualifications_description, educator_qualifications.created_by AS educator_qualifications_created_by, educator_qualifications.last_modified_by AS educator_qualifications_last_modified_by, educator_qualifications.created_at AS educator_qualifications_created_at, educator_qualifications.last_modified_at AS educator_qualifications_last_modified_at, educator_qualifications.is_archived AS educator_qualifications_is_archived, educator_qualifications.archived_at AS educator_qualifications_archived_at, educator_qualifications.archive_reason AS educator_qualifications_archive_reason, educator_qualifications.archived_by AS educator_qualifications_archived_by 
FROM educator_qualifications 
WHERE %(param_1)s::UUID = educator_qualifications.educator_id
2025-03-22 22:46:18,073 - sqlalchemy.engine.Engine - INFO - [cached since 66.28s ago] {'param_1': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:46:18,079 - sqlalchemy.engine.Engine - INFO - SELECT subject_educators.id AS subject_educators_id, subject_educators.subject_id AS subject_educators_subject_id, subject_educators.educator_id AS subject_educators_educator_id, subject_educators.level_id AS subject_educators_level_id, subject_educators.academic_year AS subject_educators_academic_year, subject_educators.term AS subject_educators_term, subject_educators.is_active AS subject_educators_is_active, subject_educators.date_assigned AS subject_educators_date_assigned, subject_educators.created_by AS subject_educators_created_by, subject_educators.last_modified_by AS subject_educators_last_modified_by, subject_educators.created_at AS subject_educators_created_at, subject_educators.last_modified_at AS subject_educators_last_modified_at, subject_educators.is_archived AS subject_educators_is_archived, subject_educators.archived_at AS subject_educators_archived_at, subject_educators.archive_reason AS subject_educators_archive_reason, subject_educators.archived_by AS subject_educators_archived_by 
FROM subject_educators 
WHERE %(param_1)s::UUID = subject_educators.educator_id
2025-03-22 22:46:18,079 - sqlalchemy.engine.Engine - INFO - [cached since 66.27s ago] {'param_1': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:46:18,082 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.code AS student_departments_code, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE %(param_1)s::UUID = student_departments.mentor_id
2025-03-22 22:46:18,083 - sqlalchemy.engine.Engine - INFO - [cached since 66.26s ago] {'param_1': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:46:18,084 - sqlalchemy.engine.Engine - INFO - SELECT classes.id AS classes_id, classes.level_id AS classes_level_id, classes.code AS classes_code, classes.supervisor_id AS classes_supervisor_id, classes.student_rep_id AS classes_student_rep_id, classes.assistant_rep_id AS classes_assistant_rep_id, classes."order" AS classes_order, classes.created_by AS classes_created_by, classes.last_modified_by AS classes_last_modified_by, classes.created_at AS classes_created_at, classes.last_modified_at AS classes_last_modified_at, classes.is_archived AS classes_is_archived, classes.archived_at AS classes_archived_at, classes.archive_reason AS classes_archive_reason, classes.archived_by AS classes_archived_by 
FROM classes 
WHERE %(param_1)s::UUID = classes.supervisor_id
2025-03-22 22:46:18,084 - sqlalchemy.engine.Engine - INFO - [cached since 66.24s ago] {'param_1': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:46:18,087 - sqlalchemy.engine.Engine - INFO - SELECT access_level_changes.id AS access_level_changes_id, access_level_changes.staff_id AS access_level_changes_staff_id, access_level_changes.previous_level AS access_level_changes_previous_level, access_level_changes.new_level AS access_level_changes_new_level, access_level_changes.reason AS access_level_changes_reason, access_level_changes.changed_at AS access_level_changes_changed_at, access_level_changes.changed_by_id AS access_level_changes_changed_by_id 
FROM access_level_changes 
WHERE %(param_1)s::UUID = access_level_changes.staff_id
2025-03-22 22:46:18,087 - sqlalchemy.engine.Engine - INFO - [cached since 66.24s ago] {'param_1': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:46:18,091 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.created_by
2025-03-22 22:46:18,091 - sqlalchemy.engine.Engine - INFO - [cached since 66.23s ago] {'param_1': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:46:18,091 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.last_modified_by
2025-03-22 22:46:18,098 - sqlalchemy.engine.Engine - INFO - [cached since 66.23s ago] {'param_1': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:46:18,098 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE %(param_1)s::UUID = staff.archived_by
2025-03-22 22:46:18,098 - sqlalchemy.engine.Engine - INFO - [cached since 66.22s ago] {'param_1': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:46:18,098 - sqlalchemy.engine.Engine - INFO - DELETE FROM educators WHERE educators.id = %(id)s::UUID
2025-03-22 22:46:18,098 - sqlalchemy.engine.Engine - INFO - [cached since 66.22s ago] {'id': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:46:18,106 - sqlalchemy.engine.Engine - INFO - DELETE FROM staff WHERE staff.id = %(id)s::UUID
2025-03-22 22:46:18,106 - sqlalchemy.engine.Engine - INFO - [cached since 66.21s ago] {'id': UUID('f6338a1e-4d0b-4348-b178-4433a4107c68')}
2025-03-22 22:46:18,106 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:46:18,106 - kademia - INFO - Request completed | 3ea7095a-530e-419d-a3ff-4f6f89d8ec45 | Status: 204 | Time: 0.037s
2025-03-22 22:47:44,399 - kademia - INFO - Request started | d6270ed8-0c16-4c5e-995b-928118ac1c6a | POST /api/v1/admin/students/
2025-03-22 22:47:44,961 - kademia - ERROR - Unhandled exception | d6270ed8-0c16-4c5e-995b-928118ac1c6a | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\student\student.py", line 18, in create_student
    return student_crud.create_student(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\student.py", line 30, in create_student
    student = self.factory.create_student(data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\student.py", line 48, in create_student
    session_start_year=self.validator.validate_session_start_year(student_data.session_start_year),
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 87, in validate_session_start_year
    raise InvalidSessionYearError(entry=value, current_year=current_year)
app.core.errors.input_validation_errors.InvalidSessionYearError
2025-03-22 22:47:44,983 - kademia - WARNING - InvalidSessionYearError | d6270ed8-0c16-4c5e-995b-928118ac1c6a | Invalid session year entered: 2023
2025-03-22 22:48:15,390 - kademia - INFO - Application started
2025-03-22 22:48:16,327 - kademia - INFO - Request started | a7f4c9e8-209e-4432-91e4-01c46e2372af | GET /docs
2025-03-22 22:48:16,330 - kademia - INFO - Request completed | a7f4c9e8-209e-4432-91e4-01c46e2372af | Status: 200 | Time: 0.001s
2025-03-22 22:48:16,522 - kademia - INFO - Request started | 0291e645-968f-4de5-b9e2-58879a379e42 | GET /openapi.json
2025-03-22 22:48:16,662 - kademia - INFO - Request completed | 0291e645-968f-4de5-b9e2-58879a379e42 | Status: 200 | Time: 0.140s
2025-03-22 22:48:32,214 - kademia - INFO - Request started | 033b4a2c-b672-4a2e-9f91-ed0cb56a1059 | POST /api/v1/admin/students/
2025-03-22 22:48:32,786 - kademia - ERROR - Unhandled exception | 033b4a2c-b672-4a2e-9f91-ed0cb56a1059 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\student\student.py", line 18, in create_student
    return student_crud.create_student(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\student.py", line 30, in create_student
    student = self.factory.create_student(data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\student.py", line 48, in create_student
    session_start_year=self.validator.validate_session_start_year(student_data.session_start_year),
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 87, in validate_session_start_year
    raise InvalidSessionYearError(entry=value, current_year=current_year)
app.core.errors.input_validation_errors.InvalidSessionYearError
2025-03-22 22:48:32,806 - kademia - WARNING - InvalidSessionYearError | 033b4a2c-b672-4a2e-9f91-ed0cb56a1059 | Invalid session year entered: 2023
2025-03-22 22:48:58,776 - kademia - INFO - Request started | 642cece7-f726-47fc-9ea7-f7c63f46cc95 | POST /api/v1/admin/students/
2025-03-22 22:48:59,263 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 22:48:59,263 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:48:59,263 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 22:48:59,263 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:48:59,263 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 22:48:59,263 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:48:59,263 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:48:59,689 - sqlalchemy.engine.Engine - INFO - SELECT max(CAST(SUBSTRING(students.student_id FROM %(substring_1)s) AS INTEGER)) AS max_1 
FROM students 
WHERE students.student_id LIKE %(student_id_1)s AND students.session_start_year = %(session_start_year_1)s
2025-03-22 22:48:59,689 - sqlalchemy.engine.Engine - INFO - [generated in 0.00138s] {'substring_1': 8, 'student_id_1': 'SCH-25-%', 'session_start_year_1': 2025}
2025-03-22 22:48:59,715 - sqlalchemy.engine.Engine - INFO - INSERT INTO students (student_id, guardian_id, user_type, access_level, status, date_of_birth, image_url, level_id, class_id, department_id, is_repeating, session_start_year, date_left, graduation_date, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(student_id)s, %(guardian_id)s::UUID, %(user_type)s, %(access_level)s, %(status)s, %(date_of_birth)s, %(image_url)s, %(level_id)s::UUID, %(class_id)s::UUID, %(department_id)s::UUID, %(is_repeating)s, %(session_start_year)s, %(date_left)s, %(graduation_date)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING students.created_at, students.last_modified_at
2025-03-22 22:48:59,715 - sqlalchemy.engine.Engine - INFO - [generated in 0.00199s] {'student_id': 'SCH-25-00001', 'guardian_id': UUID('00000000-0000-0000-0000-000000000004'), 'user_type': 'STUDENT', 'access_level': 'READ', 'status': 'ENROLLED', 'date_of_birth': datetime.date(2010, 5, 15), 'image_url': None, 'level_id': UUID('00000000-0000-0000-0000-000000000002'), 'class_id': UUID('00000000-0000-0000-0000-000000000001'), 'department_id': UUID('00000000-0000-0000-0000-000000000003'), 'is_repeating': False, 'session_start_year': 2025, 'date_left': None, 'graduation_date': None, 'id': UUID('63c2c136-e01e-4ebd-a0c0-4506d7053d89'), 'password_hash': '$2b$12$8wVrwaGpJHtaqmj/UHe05u/xmzNpqV/tB4Mz0jmlo6BL/7Ac.1tti', 'first_name': 'Omotara', 'last_name': 'Johnson', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': None, 'last_modified_by': None, 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 22:48:59,721 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:48:59,722 - kademia - ERROR - Unhandled exception | 642cece7-f726-47fc-9ea7-f7c63f46cc95 | Database operation failed. Detail: Database integrity error: (psycopg2.errors.notnullviolation) null value in column "created_by" of relation "students" violates not-null constraint
detail:  failing row contains (sch-25-00001, 00000000-0000-0000-0000-000000000004, student, read, enrolled, 2010-05-15, null, 00000000-0000-0000-0000-000000000002, 00000000-0000-0000-0000-000000000001, 00000000-0000-0000-0000-000000000003, f, 2025, null, null, 63c2c136-e01e-4ebd-a0c0-4506d7053d89, $2b$12$8wvrwagpjhtaqmj/uhe05u/xmznpqv/tb4mz0jmlo6bl/7ac.1tti, omotara, johnson, female, null, f, null, null, 2025-03-22 22:48:59.692065+00, 2025-03-22 22:48:59.692065+00, f, null, null, null).

[sql: insert into students (student_id, guardian_id, user_type, access_level, status, date_of_birth, image_url, level_id, class_id, department_id, is_repeating, session_start_year, date_left, graduation_date, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(student_id)s, %(guardian_id)s::uuid, %(user_type)s, %(access_level)s, %(status)s, %(date_of_birth)s, %(image_url)s, %(level_id)s::uuid, %(class_id)s::uuid, %(department_id)s::uuid, %(is_repeating)s, %(session_start_year)s, %(date_left)s, %(graduation_date)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning students.created_at, students.last_modified_at]
[parameters: {'student_id': 'sch-25-00001', 'guardian_id': uuid('00000000-0000-0000-0000-000000000004'), 'user_type': 'student', 'access_level': 'read', 'status': 'enrolled', 'date_of_birth': datetime.date(2010, 5, 15), 'image_url': none, 'level_id': uuid('00000000-0000-0000-0000-000000000002'), 'class_id': uuid('00000000-0000-0000-0000-000000000001'), 'department_id': uuid('00000000-0000-0000-0000-000000000003'), 'is_repeating': false, 'session_start_year': 2025, 'date_left': none, 'graduation_date': none, 'id': uuid('63c2c136-e01e-4ebd-a0c0-4506d7053d89'), 'password_hash': '$2b$12$8wvrwagpjhtaqmj/uhe05u/xmznpqv/tb4mz0jmlo6bl/7ac.1tti', 'first_name': 'omotara', 'last_name': 'johnson', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': none, 'last_modified_by': none, 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\student\student.py", line 18, in create_student
    return student_crud.create_student(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\student.py", line 30, in create_student
    student = self.factory.create_student(data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\student.py", line 57, in create_student
    return self.repository.create(new_student)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\database\db_repositories\sqlalchemy_repos\main_repo.py", line 72, in create
    raise TKDatabaseError(error=f"Database integrity error: {details}")
app.core.errors.database_errors.DatabaseError: Database operation failed. Detail: Database integrity error: (psycopg2.errors.notnullviolation) null value in column "created_by" of relation "students" violates not-null constraint
detail:  failing row contains (sch-25-00001, 00000000-0000-0000-0000-000000000004, student, read, enrolled, 2010-05-15, null, 00000000-0000-0000-0000-000000000002, 00000000-0000-0000-0000-000000000001, 00000000-0000-0000-0000-000000000003, f, 2025, null, null, 63c2c136-e01e-4ebd-a0c0-4506d7053d89, $2b$12$8wvrwagpjhtaqmj/uhe05u/xmznpqv/tb4mz0jmlo6bl/7ac.1tti, omotara, johnson, female, null, f, null, null, 2025-03-22 22:48:59.692065+00, 2025-03-22 22:48:59.692065+00, f, null, null, null).

[sql: insert into students (student_id, guardian_id, user_type, access_level, status, date_of_birth, image_url, level_id, class_id, department_id, is_repeating, session_start_year, date_left, graduation_date, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(student_id)s, %(guardian_id)s::uuid, %(user_type)s, %(access_level)s, %(status)s, %(date_of_birth)s, %(image_url)s, %(level_id)s::uuid, %(class_id)s::uuid, %(department_id)s::uuid, %(is_repeating)s, %(session_start_year)s, %(date_left)s, %(graduation_date)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning students.created_at, students.last_modified_at]
[parameters: {'student_id': 'sch-25-00001', 'guardian_id': uuid('00000000-0000-0000-0000-000000000004'), 'user_type': 'student', 'access_level': 'read', 'status': 'enrolled', 'date_of_birth': datetime.date(2010, 5, 15), 'image_url': none, 'level_id': uuid('00000000-0000-0000-0000-000000000002'), 'class_id': uuid('00000000-0000-0000-0000-000000000001'), 'department_id': uuid('00000000-0000-0000-0000-000000000003'), 'is_repeating': false, 'session_start_year': 2025, 'date_left': none, 'graduation_date': none, 'id': uuid('63c2c136-e01e-4ebd-a0c0-4506d7053d89'), 'password_hash': '$2b$12$8wvrwagpjhtaqmj/uhe05u/xmznpqv/tb4mz0jmlo6bl/7ac.1tti', 'first_name': 'omotara', 'last_name': 'johnson', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': none, 'last_modified_by': none, 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 22:48:59,747 - kademia - ERROR - DatabaseError | 642cece7-f726-47fc-9ea7-f7c63f46cc95 | Database operation failed. Detail: Database integrity error: (psycopg2.errors.notnullviolation) null value in column "created_by" of relation "students" violates not-null constraint
detail:  failing row contains (sch-25-00001, 00000000-0000-0000-0000-000000000004, student, read, enrolled, 2010-05-15, null, 00000000-0000-0000-0000-000000000002, 00000000-0000-0000-0000-000000000001, 00000000-0000-0000-0000-000000000003, f, 2025, null, null, 63c2c136-e01e-4ebd-a0c0-4506d7053d89, $2b$12$8wvrwagpjhtaqmj/uhe05u/xmznpqv/tb4mz0jmlo6bl/7ac.1tti, omotara, johnson, female, null, f, null, null, 2025-03-22 22:48:59.692065+00, 2025-03-22 22:48:59.692065+00, f, null, null, null).

[sql: insert into students (student_id, guardian_id, user_type, access_level, status, date_of_birth, image_url, level_id, class_id, department_id, is_repeating, session_start_year, date_left, graduation_date, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(student_id)s, %(guardian_id)s::uuid, %(user_type)s, %(access_level)s, %(status)s, %(date_of_birth)s, %(image_url)s, %(level_id)s::uuid, %(class_id)s::uuid, %(department_id)s::uuid, %(is_repeating)s, %(session_start_year)s, %(date_left)s, %(graduation_date)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning students.created_at, students.last_modified_at]
[parameters: {'student_id': 'sch-25-00001', 'guardian_id': uuid('00000000-0000-0000-0000-000000000004'), 'user_type': 'student', 'access_level': 'read', 'status': 'enrolled', 'date_of_birth': datetime.date(2010, 5, 15), 'image_url': none, 'level_id': uuid('00000000-0000-0000-0000-000000000002'), 'class_id': uuid('00000000-0000-0000-0000-000000000001'), 'department_id': uuid('00000000-0000-0000-0000-000000000003'), 'is_repeating': false, 'session_start_year': 2025, 'date_left': none, 'graduation_date': none, 'id': uuid('63c2c136-e01e-4ebd-a0c0-4506d7053d89'), 'password_hash': '$2b$12$8wvrwagpjhtaqmj/uhe05u/xmznpqv/tb4mz0jmlo6bl/7ac.1tti', 'first_name': 'omotara', 'last_name': 'johnson', 'gender': 'female', 'last_login': none, 'deletion_eligible': false, 'created_by': none, 'last_modified_by': none, 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 22:50:16,115 - kademia - INFO - Application started
2025-03-22 22:50:19,989 - kademia - INFO - Request started | 74983e15-a4a4-4757-a439-7c5f6391697e | GET /docs
2025-03-22 22:50:19,991 - kademia - INFO - Request completed | 74983e15-a4a4-4757-a439-7c5f6391697e | Status: 200 | Time: 0.002s
2025-03-22 22:50:20,149 - kademia - INFO - Request started | 21e527e2-89e4-456b-95bd-6d76b4ed26d6 | GET /openapi.json
2025-03-22 22:50:20,358 - kademia - INFO - Request completed | 21e527e2-89e4-456b-95bd-6d76b4ed26d6 | Status: 200 | Time: 0.209s
2025-03-22 22:50:32,058 - kademia - INFO - Request started | 8d3c730d-f228-404e-a873-2f5cf859c462 | POST /api/v1/admin/students/
2025-03-22 22:50:32,646 - kademia - ERROR - Unhandled exception | 8d3c730d-f228-404e-a873-2f5cf859c462 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\student\student.py", line 18, in create_student
    return student_crud.create_student(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\student.py", line 30, in create_student
    student = self.factory.create_student(data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\student.py", line 48, in create_student
    session_start_year=self.validator.validate_session_start_year(student_data.session_start_year),
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 87, in validate_session_start_year
    raise InvalidSessionYearError(entry=value, current_year=current_year)
app.core.errors.input_validation_errors.InvalidSessionYearError
2025-03-22 22:50:32,662 - kademia - WARNING - InvalidSessionYearError | 8d3c730d-f228-404e-a873-2f5cf859c462 | Invalid session year entered: 2023
2025-03-22 22:50:39,538 - kademia - INFO - Request started | 9a3ea3da-68e9-4f57-b1ab-e6c331968bf8 | POST /api/v1/admin/students/
2025-03-22 22:50:40,124 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 22:50:40,124 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:50:40,124 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 22:50:40,124 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:50:40,124 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 22:50:40,132 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:50:40,132 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:50:40,506 - sqlalchemy.engine.Engine - INFO - SELECT max(CAST(SUBSTRING(students.student_id FROM %(substring_1)s) AS INTEGER)) AS max_1 
FROM students 
WHERE students.student_id LIKE %(student_id_1)s AND students.session_start_year = %(session_start_year_1)s
2025-03-22 22:50:40,506 - sqlalchemy.engine.Engine - INFO - [generated in 0.00148s] {'substring_1': 8, 'student_id_1': 'SCH-25-%', 'session_start_year_1': 2025}
2025-03-22 22:50:40,526 - sqlalchemy.engine.Engine - INFO - INSERT INTO students (student_id, guardian_id, user_type, access_level, status, date_of_birth, image_url, level_id, class_id, department_id, is_repeating, session_start_year, date_left, graduation_date, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(student_id)s, %(guardian_id)s::UUID, %(user_type)s, %(access_level)s, %(status)s, %(date_of_birth)s, %(image_url)s, %(level_id)s::UUID, %(class_id)s::UUID, %(department_id)s::UUID, %(is_repeating)s, %(session_start_year)s, %(date_left)s, %(graduation_date)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING students.created_at, students.last_modified_at
2025-03-22 22:50:40,526 - sqlalchemy.engine.Engine - INFO - [generated in 0.00170s] {'student_id': 'SCH-25-00001', 'guardian_id': UUID('00000000-0000-0000-0000-000000000004'), 'user_type': 'STUDENT', 'access_level': 'READ', 'status': 'ENROLLED', 'date_of_birth': datetime.date(2010, 5, 15), 'image_url': None, 'level_id': UUID('00000000-0000-0000-0000-000000000002'), 'class_id': UUID('00000000-0000-0000-0000-000000000001'), 'department_id': UUID('00000000-0000-0000-0000-000000000003'), 'is_repeating': False, 'session_start_year': 2025, 'date_left': None, 'graduation_date': None, 'id': UUID('d1546f79-c8fa-4cce-89fc-bd551206dd77'), 'password_hash': '$2b$12$IHNhqar1pWmqgh.2khRBxe/fL1BAkgaLzAP.IFqo1XaBtznb0V2m.', 'first_name': 'Omotara', 'last_name': 'Johnson', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 22:50:40,543 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:50:40,556 - kademia - ERROR - Unhandled exception | 9a3ea3da-68e9-4f57-b1ab-e6c331968bf8 | Error during during fk insertion of guardian with id:00000000-0000-0000-0000-000000000004 during create operation. Detail Foreign key constraint violation during create operation. Detail: (psycopg2.errors.ForeignKeyViolation) insert or update on table "students" violates foreign key constraint "fk_students_academic_levels_level_id"
DETAIL:  Key (level_id)=(00000000-0000-0000-0000-000000000002) is not present in table "academic_levels".

[SQL: INSERT INTO students (student_id, guardian_id, user_type, access_level, status, date_of_birth, image_url, level_id, class_id, department_id, is_repeating, session_start_year, date_left, graduation_date, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(student_id)s, %(guardian_id)s::UUID, %(user_type)s, %(access_level)s, %(status)s, %(date_of_birth)s, %(image_url)s, %(level_id)s::UUID, %(class_id)s::UUID, %(department_id)s::UUID, %(is_repeating)s, %(session_start_year)s, %(date_left)s, %(graduation_date)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING students.created_at, students.last_modified_at]
[parameters: {'student_id': 'SCH-25-00001', 'guardian_id': UUID('00000000-0000-0000-0000-000000000004'), 'user_type': 'STUDENT', 'access_level': 'READ', 'status': 'ENROLLED', 'date_of_birth': datetime.date(2010, 5, 15), 'image_url': None, 'level_id': UUID('00000000-0000-0000-0000-000000000002'), 'class_id': UUID('00000000-0000-0000-0000-000000000001'), 'department_id': UUID('00000000-0000-0000-0000-000000000003'), 'is_repeating': False, 'session_start_year': 2025, 'date_left': None, 'graduation_date': None, 'id': UUID('d1546f79-c8fa-4cce-89fc-bd551206dd77'), 'password_hash': '$2b$12$IHNhqar1pWmqgh.2khRBxe/fL1BAkgaLzAP.IFqo1XaBtznb0V2m.', 'first_name': 'Omotara', 'last_name': 'Johnson', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\student\student.py", line 18, in create_student
    return student_crud.create_student(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\student.py", line 30, in create_student
    student = self.factory.create_student(data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\student.py", line 81, in create_student
    raise error_class(id=entity_id, detail=str(e), action='create')
app.core.errors.user_profile_errors.RelatedGuardianNotFoundError: Error during during fk insertion of guardian with id:00000000-0000-0000-0000-000000000004 during create operation. Detail Foreign key constraint violation during create operation. Detail: (psycopg2.errors.ForeignKeyViolation) insert or update on table "students" violates foreign key constraint "fk_students_academic_levels_level_id"
DETAIL:  Key (level_id)=(00000000-0000-0000-0000-000000000002) is not present in table "academic_levels".

[SQL: INSERT INTO students (student_id, guardian_id, user_type, access_level, status, date_of_birth, image_url, level_id, class_id, department_id, is_repeating, session_start_year, date_left, graduation_date, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(student_id)s, %(guardian_id)s::UUID, %(user_type)s, %(access_level)s, %(status)s, %(date_of_birth)s, %(image_url)s, %(level_id)s::UUID, %(class_id)s::UUID, %(department_id)s::UUID, %(is_repeating)s, %(session_start_year)s, %(date_left)s, %(graduation_date)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING students.created_at, students.last_modified_at]
[parameters: {'student_id': 'SCH-25-00001', 'guardian_id': UUID('00000000-0000-0000-0000-000000000004'), 'user_type': 'STUDENT', 'access_level': 'READ', 'status': 'ENROLLED', 'date_of_birth': datetime.date(2010, 5, 15), 'image_url': None, 'level_id': UUID('00000000-0000-0000-0000-000000000002'), 'class_id': UUID('00000000-0000-0000-0000-000000000001'), 'department_id': UUID('00000000-0000-0000-0000-000000000003'), 'is_repeating': False, 'session_start_year': 2025, 'date_left': None, 'graduation_date': None, 'id': UUID('d1546f79-c8fa-4cce-89fc-bd551206dd77'), 'password_hash': '$2b$12$IHNhqar1pWmqgh.2khRBxe/fL1BAkgaLzAP.IFqo1XaBtznb0V2m.', 'first_name': 'Omotara', 'last_name': 'Johnson', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 22:50:40,591 - kademia - WARNING - RelationshipError | 9a3ea3da-68e9-4f57-b1ab-e6c331968bf8 | Error during during fk insertion of guardian with id:00000000-0000-0000-0000-000000000004 during create operation. Detail Foreign key constraint violation during create operation. Detail: (psycopg2.errors.ForeignKeyViolation) insert or update on table "students" violates foreign key constraint "fk_students_academic_levels_level_id"
DETAIL:  Key (level_id)=(00000000-0000-0000-0000-000000000002) is not present in table "academic_levels".

[SQL: INSERT INTO students (student_id, guardian_id, user_type, access_level, status, date_of_birth, image_url, level_id, class_id, department_id, is_repeating, session_start_year, date_left, graduation_date, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(student_id)s, %(guardian_id)s::UUID, %(user_type)s, %(access_level)s, %(status)s, %(date_of_birth)s, %(image_url)s, %(level_id)s::UUID, %(class_id)s::UUID, %(department_id)s::UUID, %(is_repeating)s, %(session_start_year)s, %(date_left)s, %(graduation_date)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING students.created_at, students.last_modified_at]
[parameters: {'student_id': 'SCH-25-00001', 'guardian_id': UUID('00000000-0000-0000-0000-000000000004'), 'user_type': 'STUDENT', 'access_level': 'READ', 'status': 'ENROLLED', 'date_of_birth': datetime.date(2010, 5, 15), 'image_url': None, 'level_id': UUID('00000000-0000-0000-0000-000000000002'), 'class_id': UUID('00000000-0000-0000-0000-000000000001'), 'department_id': UUID('00000000-0000-0000-0000-000000000003'), 'is_repeating': False, 'session_start_year': 2025, 'date_left': None, 'graduation_date': None, 'id': UUID('d1546f79-c8fa-4cce-89fc-bd551206dd77'), 'password_hash': '$2b$12$IHNhqar1pWmqgh.2khRBxe/fL1BAkgaLzAP.IFqo1XaBtznb0V2m.', 'first_name': 'Omotara', 'last_name': 'Johnson', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 22:51:25,400 - kademia - INFO - Application started
2025-03-22 22:53:09,644 - kademia - INFO - Application started
2025-03-22 22:53:15,326 - kademia - INFO - Request started | 82e6fe37-07e6-4b54-8920-9c23cd89a4a4 | GET /docs
2025-03-22 22:53:15,329 - kademia - INFO - Request completed | 82e6fe37-07e6-4b54-8920-9c23cd89a4a4 | Status: 200 | Time: 0.003s
2025-03-22 22:53:15,506 - kademia - INFO - Request started | 60f5c32e-dc58-4806-907a-4ab6e2823c07 | GET /openapi.json
2025-03-22 22:53:15,741 - kademia - INFO - Request completed | 60f5c32e-dc58-4806-907a-4ab6e2823c07 | Status: 200 | Time: 0.236s
2025-03-22 22:53:31,375 - kademia - INFO - Request started | 3d93f712-cee2-4ba6-a286-c8bfc4fa0e7a | POST /api/v1/admin/guardians/
2025-03-22 22:53:31,959 - kademia - ERROR - Unhandled exception | 3d93f712-cee2-4ba6-a286-c8bfc4fa0e7a | 'str' object has no attribute 'phone'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\guardian\guardian.py", line 18, in create_guardian
    return guardian_crud.create_guardian(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\guardian.py", line 30, in create_guardian
    guardian = self.factory.create_guardian(data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\guardian.py", line 41, in create_guardian
    phone=self.validator.validate_phone(guardian_data.address.phone),
                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'phone'
2025-03-22 22:53:31,975 - kademia - ERROR - Unhandled exception | 3d93f712-cee2-4ba6-a286-c8bfc4fa0e7a | 'str' object has no attribute 'phone'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\guardian\guardian.py", line 18, in create_guardian
    return guardian_crud.create_guardian(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\guardian.py", line 30, in create_guardian
    guardian = self.factory.create_guardian(data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\guardian.py", line 41, in create_guardian
    phone=self.validator.validate_phone(guardian_data.address.phone),
                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'phone'
2025-03-22 22:54:07,702 - kademia - INFO - Application started
2025-03-22 22:54:09,487 - kademia - INFO - Request started | 674ad691-5446-4725-a4de-a3ceb213b84c | GET /docs
2025-03-22 22:54:09,500 - kademia - INFO - Request completed | 674ad691-5446-4725-a4de-a3ceb213b84c | Status: 200 | Time: 0.012s
2025-03-22 22:54:09,713 - kademia - INFO - Request started | 48d817b6-f701-4c70-9752-111789b2b2fc | GET /openapi.json
2025-03-22 22:54:09,837 - kademia - INFO - Request completed | 48d817b6-f701-4c70-9752-111789b2b2fc | Status: 200 | Time: 0.123s
2025-03-22 22:54:23,607 - kademia - INFO - Request started | 7fb2e682-d738-429c-a6e6-347fc156267b | POST /api/v1/admin/guardians/
2025-03-22 22:54:24,187 - kademia - ERROR - Unhandled exception | 7fb2e682-d738-429c-a6e6-347fc156267b | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\guardian\guardian.py", line 18, in create_guardian
    return guardian_crud.create_guardian(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\guardian.py", line 30, in create_guardian
    guardian = self.factory.create_guardian(data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\guardian.py", line 41, in create_guardian
    phone=self.validator.validate_phone(guardian_data.phone),
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 74, in validate_phone
    raise InvalidPhoneError(entry=value)
app.core.errors.input_validation_errors.InvalidPhoneError
2025-03-22 22:54:24,200 - kademia - WARNING - InvalidPhoneError | 7fb2e682-d738-429c-a6e6-347fc156267b | Phone number entry attempted with invalid format: 08012345678
2025-03-22 22:55:08,838 - kademia - INFO - Application started
2025-03-22 22:55:09,080 - kademia - INFO - Request started | 2b09e45e-c398-418d-8bca-0c1a9dbe1858 | GET /docs
2025-03-22 22:55:09,083 - kademia - INFO - Request completed | 2b09e45e-c398-418d-8bca-0c1a9dbe1858 | Status: 200 | Time: 0.002s
2025-03-22 22:55:09,319 - kademia - INFO - Request started | 70cacdff-bb2b-4c94-801a-66944732cd3e | GET /openapi.json
2025-03-22 22:55:09,537 - kademia - INFO - Request completed | 70cacdff-bb2b-4c94-801a-66944732cd3e | Status: 200 | Time: 0.217s
2025-03-22 22:55:31,395 - kademia - INFO - Request started | 5a5492d0-7d56-4761-88ed-23871c840ed0 | POST /api/v1/admin/guardians/
2025-03-22 22:55:32,422 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 22:55:32,422 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:55:32,424 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 22:55:32,428 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:55:32,430 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 22:55:32,430 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 22:55:32,434 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:55:32,440 - sqlalchemy.engine.Engine - INFO - INSERT INTO guardians (access_level, user_type, image_url, email_address, address, phone, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING guardians.created_at, guardians.last_modified_at
2025-03-22 22:55:32,441 - sqlalchemy.engine.Engine - INFO - [generated in 0.00177s] {'access_level': 'READ', 'user_type': 'GUARDIAN', 'image_url': None, 'email_address': 'bola.coker@example.com', 'address': '123 Akala Express Ibadan', 'phone': '+2348056794345', 'id': UUID('639ffd97-e28f-4a7d-bf3b-265b247af89f'), 'password_hash': '$2b$12$rcVklLIw0JeRmzZ//RAmqeL./EBhmsx117TcMdvIcCS99oT6a.99S', 'first_name': 'Bola', 'last_name': 'Coker', 'gender': 'MALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 22:55:32,468 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:55:32,475 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:55:32,480 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level, guardians.user_type, guardians.image_url, guardians.email_address, guardians.address, guardians.phone, guardians.id, guardians.password_hash, guardians.first_name, guardians.last_name, guardians.gender, guardians.last_login, guardians.deletion_eligible, guardians.created_by, guardians.last_modified_by, guardians.created_at, guardians.last_modified_at, guardians.is_archived, guardians.archived_at, guardians.archive_reason, guardians.archived_by 
FROM guardians 
WHERE guardians.id = %(pk_1)s::UUID
2025-03-22 22:55:32,480 - sqlalchemy.engine.Engine - INFO - [generated in 0.00165s] {'pk_1': UUID('639ffd97-e28f-4a7d-bf3b-265b247af89f')}
2025-03-22 22:55:32,492 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:55:32,495 - kademia - INFO - Request completed | 5a5492d0-7d56-4761-88ed-23871c840ed0 | Status: 201 | Time: 1.099s
2025-03-22 22:56:18,421 - kademia - INFO - Request started | 67298f99-8eef-46ce-9be4-70dd8751ea00 | GET /api/v1/admin/guardians/
2025-03-22 22:56:18,423 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:56:18,426 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level AS guardians_access_level, guardians.user_type AS guardians_user_type, guardians.image_url AS guardians_image_url, guardians.email_address AS guardians_email_address, guardians.address AS guardians_address, guardians.phone AS guardians_phone, guardians.id AS guardians_id, guardians.password_hash AS guardians_password_hash, guardians.first_name AS guardians_first_name, guardians.last_name AS guardians_last_name, guardians.gender AS guardians_gender, guardians.last_login AS guardians_last_login, guardians.deletion_eligible AS guardians_deletion_eligible, guardians.created_by AS guardians_created_by, guardians.last_modified_by AS guardians_last_modified_by, guardians.created_at AS guardians_created_at, guardians.last_modified_at AS guardians_last_modified_at, guardians.is_archived AS guardians_is_archived, guardians.archived_at AS guardians_archived_at, guardians.archive_reason AS guardians_archive_reason, guardians.archived_by AS guardians_archived_by 
FROM guardians 
WHERE guardians.is_archived = false ORDER BY guardians.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-22 22:56:18,429 - sqlalchemy.engine.Engine - INFO - [generated in 0.00135s] {'param_1': 50, 'param_2': 0}
2025-03-22 22:56:18,433 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:56:18,435 - kademia - INFO - Request completed | 67298f99-8eef-46ce-9be4-70dd8751ea00 | Status: 200 | Time: 0.014s
2025-03-22 22:56:29,511 - kademia - INFO - Request started | 2b6a2fc4-29b8-4405-80e5-804188af1385 | GET /api/v1/admin/guardians/639ffd97-e28f-4a7d-bf3b-265b247af89f
2025-03-22 22:56:29,512 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:56:29,515 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level AS guardians_access_level, guardians.user_type AS guardians_user_type, guardians.image_url AS guardians_image_url, guardians.email_address AS guardians_email_address, guardians.address AS guardians_address, guardians.phone AS guardians_phone, guardians.id AS guardians_id, guardians.password_hash AS guardians_password_hash, guardians.first_name AS guardians_first_name, guardians.last_name AS guardians_last_name, guardians.gender AS guardians_gender, guardians.last_login AS guardians_last_login, guardians.deletion_eligible AS guardians_deletion_eligible, guardians.created_by AS guardians_created_by, guardians.last_modified_by AS guardians_last_modified_by, guardians.created_at AS guardians_created_at, guardians.last_modified_at AS guardians_last_modified_at, guardians.is_archived AS guardians_is_archived, guardians.archived_at AS guardians_archived_at, guardians.archive_reason AS guardians_archive_reason, guardians.archived_by AS guardians_archived_by 
FROM guardians 
WHERE guardians.is_archived = false AND guardians.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:56:29,515 - sqlalchemy.engine.Engine - INFO - [generated in 0.00117s] {'id_1': UUID('639ffd97-e28f-4a7d-bf3b-265b247af89f'), 'param_1': 1}
2025-03-22 22:56:29,515 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:56:29,523 - kademia - INFO - Request completed | 2b6a2fc4-29b8-4405-80e5-804188af1385 | Status: 200 | Time: 0.011s
2025-03-22 22:57:14,095 - kademia - INFO - Request started | 02f44695-b878-46f4-9953-7aa341c5fe41 | PUT /api/v1/admin/guardians/639ffd97-e28f-4a7d-bf3b-265b247af89f
2025-03-22 22:57:14,102 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:57:14,103 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level AS guardians_access_level, guardians.user_type AS guardians_user_type, guardians.image_url AS guardians_image_url, guardians.email_address AS guardians_email_address, guardians.address AS guardians_address, guardians.phone AS guardians_phone, guardians.id AS guardians_id, guardians.password_hash AS guardians_password_hash, guardians.first_name AS guardians_first_name, guardians.last_name AS guardians_last_name, guardians.gender AS guardians_gender, guardians.last_login AS guardians_last_login, guardians.deletion_eligible AS guardians_deletion_eligible, guardians.created_by AS guardians_created_by, guardians.last_modified_by AS guardians_last_modified_by, guardians.created_at AS guardians_created_at, guardians.last_modified_at AS guardians_last_modified_at, guardians.is_archived AS guardians_is_archived, guardians.archived_at AS guardians_archived_at, guardians.archive_reason AS guardians_archive_reason, guardians.archived_by AS guardians_archived_by 
FROM guardians 
WHERE guardians.is_archived = false AND guardians.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:57:14,103 - sqlalchemy.engine.Engine - INFO - [cached since 44.59s ago] {'id_1': UUID('639ffd97-e28f-4a7d-bf3b-265b247af89f'), 'param_1': 1}
2025-03-22 22:57:14,106 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:57:14,107 - kademia - ERROR - Unhandled exception | 02f44695-b878-46f4-9953-7aa341c5fe41 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\guardian\guardian.py", line 38, in update_guardian
    return guardian_crud.update_guardian(guardian_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\guardian.py", line 63, in update_guardian
    updated_guardian = self.factory.update_guardian(guardian_id, data)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\guardian.py", line 97, in update_guardian
    existing.first_name = self.validator.validate_name(data.pop('first_name'))
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 20, in validate_name
    raise InvalidCharacterError(entry=value, domain=self.domain)
app.core.errors.input_validation_errors.InvalidCharacterError
2025-03-22 22:57:14,139 - kademia - WARNING - InvalidCharacterError | 02f44695-b878-46f4-9953-7aa341c5fe41 | Domain: USER PROFILE-- Input attempted with invalid character: B2ola
2025-03-22 22:57:26,578 - kademia - INFO - Request started | ed0dbc9b-0e34-457f-bf75-dcd817bd4b43 | PUT /api/v1/admin/guardians/639ffd97-e28f-4a7d-bf3b-265b247af89f
2025-03-22 22:57:26,578 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:57:26,582 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level AS guardians_access_level, guardians.user_type AS guardians_user_type, guardians.image_url AS guardians_image_url, guardians.email_address AS guardians_email_address, guardians.address AS guardians_address, guardians.phone AS guardians_phone, guardians.id AS guardians_id, guardians.password_hash AS guardians_password_hash, guardians.first_name AS guardians_first_name, guardians.last_name AS guardians_last_name, guardians.gender AS guardians_gender, guardians.last_login AS guardians_last_login, guardians.deletion_eligible AS guardians_deletion_eligible, guardians.created_by AS guardians_created_by, guardians.last_modified_by AS guardians_last_modified_by, guardians.created_at AS guardians_created_at, guardians.last_modified_at AS guardians_last_modified_at, guardians.is_archived AS guardians_is_archived, guardians.archived_at AS guardians_archived_at, guardians.archive_reason AS guardians_archive_reason, guardians.archived_by AS guardians_archived_by 
FROM guardians 
WHERE guardians.is_archived = false AND guardians.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:57:26,583 - sqlalchemy.engine.Engine - INFO - [cached since 57.07s ago] {'id_1': UUID('639ffd97-e28f-4a7d-bf3b-265b247af89f'), 'param_1': 1}
2025-03-22 22:57:26,585 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:57:26,585 - kademia - ERROR - Unhandled exception | ed0dbc9b-0e34-457f-bf75-dcd817bd4b43 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\guardian\guardian.py", line 38, in update_guardian
    return guardian_crud.update_guardian(guardian_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\guardian.py", line 63, in update_guardian
    updated_guardian = self.factory.update_guardian(guardian_id, data)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\guardian.py", line 101, in update_guardian
    existing.date_of_birth = self.validator.validate_email_address(data.pop('email_address'))
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 52, in validate_email_address
    raise TextTooShortError(entry=value, domain=self.domain, min_length=12)
app.core.errors.input_validation_errors.TextTooShortError
2025-03-22 22:57:26,592 - kademia - WARNING - TextTooShortError | ed0dbc9b-0e34-457f-bf75-dcd817bd4b43 | Domain: USER PROFILE-- Input attempted with short text: bola
2025-03-22 22:57:42,326 - kademia - INFO - Request started | 62767a8c-35f0-4640-8283-333787dbd114 | PUT /api/v1/admin/guardians/639ffd97-e28f-4a7d-bf3b-265b247af89f
2025-03-22 22:57:42,330 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:57:42,330 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level AS guardians_access_level, guardians.user_type AS guardians_user_type, guardians.image_url AS guardians_image_url, guardians.email_address AS guardians_email_address, guardians.address AS guardians_address, guardians.phone AS guardians_phone, guardians.id AS guardians_id, guardians.password_hash AS guardians_password_hash, guardians.first_name AS guardians_first_name, guardians.last_name AS guardians_last_name, guardians.gender AS guardians_gender, guardians.last_login AS guardians_last_login, guardians.deletion_eligible AS guardians_deletion_eligible, guardians.created_by AS guardians_created_by, guardians.last_modified_by AS guardians_last_modified_by, guardians.created_at AS guardians_created_at, guardians.last_modified_at AS guardians_last_modified_at, guardians.is_archived AS guardians_is_archived, guardians.archived_at AS guardians_archived_at, guardians.archive_reason AS guardians_archive_reason, guardians.archived_by AS guardians_archived_by 
FROM guardians 
WHERE guardians.is_archived = false AND guardians.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:57:42,332 - sqlalchemy.engine.Engine - INFO - [cached since 72.82s ago] {'id_1': UUID('639ffd97-e28f-4a7d-bf3b-265b247af89f'), 'param_1': 1}
2025-03-22 22:57:42,335 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:57:42,337 - kademia - ERROR - Unhandled exception | 62767a8c-35f0-4640-8283-333787dbd114 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\guardian\guardian.py", line 38, in update_guardian
    return guardian_crud.update_guardian(guardian_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\guardian.py", line 63, in update_guardian
    updated_guardian = self.factory.update_guardian(guardian_id, data)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\guardian.py", line 105, in update_guardian
    existing.session_start_year = self.validator.validate_phone(data.pop('phone'))
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\validators\users.py", line 74, in validate_phone
    raise InvalidPhoneError(entry=value)
app.core.errors.input_validation_errors.InvalidPhoneError
2025-03-22 22:57:42,345 - kademia - WARNING - InvalidPhoneError | 62767a8c-35f0-4640-8283-333787dbd114 | Phone number entry attempted with invalid format: 2348056794345
2025-03-22 22:58:04,269 - kademia - INFO - Request started | 53c9090f-b38f-4680-aee8-0948b9d1c6a9 | PATCH /api/v1/admin/guardians/639ffd97-e28f-4a7d-bf3b-265b247af89f
2025-03-22 22:58:04,275 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:58:04,275 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level AS guardians_access_level, guardians.user_type AS guardians_user_type, guardians.image_url AS guardians_image_url, guardians.email_address AS guardians_email_address, guardians.address AS guardians_address, guardians.phone AS guardians_phone, guardians.id AS guardians_id, guardians.password_hash AS guardians_password_hash, guardians.first_name AS guardians_first_name, guardians.last_name AS guardians_last_name, guardians.gender AS guardians_gender, guardians.last_login AS guardians_last_login, guardians.deletion_eligible AS guardians_deletion_eligible, guardians.created_by AS guardians_created_by, guardians.last_modified_by AS guardians_last_modified_by, guardians.created_at AS guardians_created_at, guardians.last_modified_at AS guardians_last_modified_at, guardians.is_archived AS guardians_is_archived, guardians.archived_at AS guardians_archived_at, guardians.archive_reason AS guardians_archive_reason, guardians.archived_by AS guardians_archived_by 
FROM guardians 
WHERE guardians.is_archived = false AND guardians.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 22:58:04,275 - sqlalchemy.engine.Engine - INFO - [cached since 94.76s ago] {'id_1': UUID('639ffd97-e28f-4a7d-bf3b-265b247af89f'), 'param_1': 1}
2025-03-22 22:58:04,281 - sqlalchemy.engine.Engine - INFO - UPDATE guardians SET last_modified_at=now(), is_archived=%(is_archived)s, archived_at=%(archived_at)s, archive_reason=%(archive_reason)s, archived_by=%(archived_by)s::UUID WHERE guardians.id = %(guardians_id)s::UUID
2025-03-22 22:58:04,281 - sqlalchemy.engine.Engine - INFO - [generated in 0.00085s] {'is_archived': True, 'archived_at': datetime.datetime(2025, 3, 22, 22, 58, 4, 278938, tzinfo=datetime.timezone.utc), 'archive_reason': 'ERROR', 'archived_by': UUID('00000000-0000-0000-0000-000000000000'), 'guardians_id': UUID('639ffd97-e28f-4a7d-bf3b-265b247af89f')}
2025-03-22 22:58:04,285 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 22:58:04,292 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:58:04,294 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level, guardians.user_type, guardians.image_url, guardians.email_address, guardians.address, guardians.phone, guardians.id, guardians.password_hash, guardians.first_name, guardians.last_name, guardians.gender, guardians.last_login, guardians.deletion_eligible, guardians.created_by, guardians.last_modified_by, guardians.created_at, guardians.last_modified_at, guardians.is_archived, guardians.archived_at, guardians.archive_reason, guardians.archived_by 
FROM guardians 
WHERE guardians.id = %(pk_1)s::UUID
2025-03-22 22:58:04,296 - sqlalchemy.engine.Engine - INFO - [cached since 151.8s ago] {'pk_1': UUID('639ffd97-e28f-4a7d-bf3b-265b247af89f')}
2025-03-22 22:58:04,300 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:58:04,308 - kademia - INFO - Request completed | 53c9090f-b38f-4680-aee8-0948b9d1c6a9 | Status: 204 | Time: 0.038s
2025-03-22 22:58:09,959 - kademia - INFO - Request started | ae19ba85-f15e-4e55-9fb4-05e2b01adf74 | POST /api/v1/admin/guardians/
2025-03-22 22:58:10,494 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 22:58:10,494 - sqlalchemy.engine.Engine - INFO - INSERT INTO guardians (access_level, user_type, image_url, email_address, address, phone, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING guardians.created_at, guardians.last_modified_at
2025-03-22 22:58:10,494 - sqlalchemy.engine.Engine - INFO - [cached since 158.1s ago] {'access_level': 'READ', 'user_type': 'GUARDIAN', 'image_url': None, 'email_address': 'bola.coker@example.com', 'address': '123 Akala Express Ibadan', 'phone': '+2348056794345', 'id': UUID('92dc5cd3-6e90-4164-ad18-ba1fd9fb563f'), 'password_hash': '$2b$12$lsuXvSPQAPMsGPYuHJGAIuwWHjdyLJ2dX0eetwnpAgB8.0o5OtXWq', 'first_name': 'Bola', 'last_name': 'Coker', 'gender': 'MALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 22:58:10,502 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 22:58:10,508 - kademia - ERROR - Unhandled exception | ae19ba85-f15e-4e55-9fb4-05e2b01adf74 | Unique constraint violated for during guardian creation with bola.coker@example.com. Detail unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "guardians_email_address_key"
detail:  key (email_address)=(bola.coker@example.com) already exists.

[sql: insert into guardians (access_level, user_type, image_url, email_address, address, phone, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning guardians.created_at, guardians.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'guardian', 'image_url': none, 'email_address': 'bola.coker@example.com', 'address': '123 akala express ibadan', 'phone': '+2348056794345', 'id': uuid('92dc5cd3-6e90-4164-ad18-ba1fd9fb563f'), 'password_hash': '$2b$12$lsuxvspqapmsgpyuhjgaiuwwhjdylj2dx0eetwnpagb8.0o5otxwq', 'first_name': 'bola', 'last_name': 'coker', 'gender': 'male', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\guardian\guardian.py", line 18, in create_guardian
    return guardian_crud.create_guardian(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\guardian.py", line 30, in create_guardian
    guardian = self.factory.create_guardian(data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\guardian.py", line 53, in create_guardian
    raise DuplicateGuardianError(
app.core.errors.user_profile_errors.DuplicateGuardianError: Unique constraint violated for during guardian creation with bola.coker@example.com. Detail unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "guardians_email_address_key"
detail:  key (email_address)=(bola.coker@example.com) already exists.

[sql: insert into guardians (access_level, user_type, image_url, email_address, address, phone, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning guardians.created_at, guardians.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'guardian', 'image_url': none, 'email_address': 'bola.coker@example.com', 'address': '123 akala express ibadan', 'phone': '+2348056794345', 'id': uuid('92dc5cd3-6e90-4164-ad18-ba1fd9fb563f'), 'password_hash': '$2b$12$lsuxvspqapmsgpyuhjgaiuwwhjdylj2dx0eetwnpagb8.0o5otxwq', 'first_name': 'bola', 'last_name': 'coker', 'gender': 'male', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 22:58:10,519 - kademia - WARNING - UniqueViolationError | ae19ba85-f15e-4e55-9fb4-05e2b01adf74 | Unique constraint violated for during guardian creation with bola.coker@example.com. Detail unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "guardians_email_address_key"
detail:  key (email_address)=(bola.coker@example.com) already exists.

[sql: insert into guardians (access_level, user_type, image_url, email_address, address, phone, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning guardians.created_at, guardians.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'guardian', 'image_url': none, 'email_address': 'bola.coker@example.com', 'address': '123 akala express ibadan', 'phone': '+2348056794345', 'id': uuid('92dc5cd3-6e90-4164-ad18-ba1fd9fb563f'), 'password_hash': '$2b$12$lsuxvspqapmsgpyuhjgaiuwwhjdylj2dx0eetwnpagb8.0o5otxwq', 'first_name': 'bola', 'last_name': 'coker', 'gender': 'male', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 23:00:46,239 - kademia - INFO - Application started
2025-03-22 23:00:46,246 - kademia - INFO - Request started | 5947b302-3643-4339-bf00-97c5e0277883 | GET /docs
2025-03-22 23:00:46,246 - kademia - INFO - Request completed | 5947b302-3643-4339-bf00-97c5e0277883 | Status: 200 | Time: 0.000s
2025-03-22 23:00:46,426 - kademia - INFO - Request started | a59cad38-e1e2-4d64-a60e-0da4f2a9fe0d | GET /openapi.json
2025-03-22 23:00:46,625 - kademia - INFO - Request completed | a59cad38-e1e2-4d64-a60e-0da4f2a9fe0d | Status: 200 | Time: 0.199s
2025-03-22 23:01:13,733 - kademia - INFO - Request started | 7c42b85d-3420-45df-a1a5-5a0713c79295 | POST /api/v1/admin/guardians/
2025-03-22 23:01:14,759 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 23:01:14,759 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 23:01:14,759 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 23:01:14,759 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 23:01:14,767 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 23:01:14,767 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 23:01:14,772 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 23:01:14,774 - sqlalchemy.engine.Engine - INFO - INSERT INTO guardians (access_level, user_type, image_url, email_address, address, phone, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING guardians.created_at, guardians.last_modified_at
2025-03-22 23:01:14,774 - sqlalchemy.engine.Engine - INFO - [generated in 0.00144s] {'access_level': 'READ', 'user_type': 'GUARDIAN', 'image_url': None, 'email_address': 'bola.coker@example.com', 'address': '123 Akala Express Ibadan', 'phone': '+2348056794345', 'id': UUID('785a1fe6-f4e3-4f67-9306-57c21981c603'), 'password_hash': '$2b$12$hi/MsNmoYducFfZC0fIj2eo9/jvekmW4vb5jMbInpK6LcJU9LecLq', 'first_name': 'Bola', 'last_name': 'Coker', 'gender': 'MALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 23:01:14,788 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 23:01:14,790 - kademia - ERROR - Unhandled exception | 7c42b85d-3420-45df-a1a5-5a0713c79295 | DuplicateGuardianError.__init__() missing 1 required positional argument: 'field'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\guardian\guardian.py", line 18, in create_guardian
    return guardian_crud.create_guardian(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\guardian.py", line 30, in create_guardian
    guardian = self.factory.create_guardian(data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\guardian.py", line 53, in create_guardian
    raise DuplicateGuardianError(
          ^^^^^^^^^^^^^^^^^^^^^^^
TypeError: DuplicateGuardianError.__init__() missing 1 required positional argument: 'field'
2025-03-22 23:01:14,815 - kademia - ERROR - Unhandled exception | 7c42b85d-3420-45df-a1a5-5a0713c79295 | DuplicateGuardianError.__init__() missing 1 required positional argument: 'field'
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\guardian\guardian.py", line 18, in create_guardian
    return guardian_crud.create_guardian(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\guardian.py", line 30, in create_guardian
    guardian = self.factory.create_guardian(data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\guardian.py", line 53, in create_guardian
    raise DuplicateGuardianError(
          ^^^^^^^^^^^^^^^^^^^^^^^
TypeError: DuplicateGuardianError.__init__() missing 1 required positional argument: 'field'
2025-03-22 23:02:24,749 - kademia - INFO - Application started
2025-03-22 23:02:24,764 - kademia - INFO - Request started | 7ba77652-b618-4c80-9b77-7a585d3bb5a8 | GET /docs
2025-03-22 23:02:24,767 - kademia - INFO - Request completed | 7ba77652-b618-4c80-9b77-7a585d3bb5a8 | Status: 200 | Time: 0.000s
2025-03-22 23:02:24,985 - kademia - INFO - Request started | aa236c02-4840-4693-9655-231d32cb1e07 | GET /openapi.json
2025-03-22 23:02:25,248 - kademia - INFO - Request completed | aa236c02-4840-4693-9655-231d32cb1e07 | Status: 200 | Time: 0.263s
2025-03-22 23:02:38,413 - kademia - INFO - Request started | cbe24190-ce63-4c74-b903-bc4aa30d06bb | POST /api/v1/admin/guardians/
2025-03-22 23:02:39,463 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 23:02:39,463 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 23:02:39,471 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 23:02:39,471 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 23:02:39,473 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 23:02:39,473 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 23:02:39,478 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 23:02:39,481 - sqlalchemy.engine.Engine - INFO - INSERT INTO guardians (access_level, user_type, image_url, email_address, address, phone, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING guardians.created_at, guardians.last_modified_at
2025-03-22 23:02:39,481 - sqlalchemy.engine.Engine - INFO - [generated in 0.00187s] {'access_level': 'READ', 'user_type': 'GUARDIAN', 'image_url': None, 'email_address': 'bola.coker@example.com', 'address': '123 Akala Express Ibadan', 'phone': '+2348056794345', 'id': UUID('80f63cdf-4be6-4a85-9e69-3895470ff8ed'), 'password_hash': '$2b$12$URlKbq3ZTIfq0Jurr125wO9VL506JR0NHgwBfiGZ6dWuR3aNF3MWa', 'first_name': 'Bola', 'last_name': 'Coker', 'gender': 'MALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 23:02:39,494 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 23:02:39,497 - kademia - ERROR - Unhandled exception | cbe24190-ce63-4c74-b903-bc4aa30d06bb | Unique constraint violated for during guardian creation with bola.coker@example.com. Detail unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "guardians_email_address_key"
detail:  key (email_address)=(bola.coker@example.com) already exists.

[sql: insert into guardians (access_level, user_type, image_url, email_address, address, phone, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning guardians.created_at, guardians.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'guardian', 'image_url': none, 'email_address': 'bola.coker@example.com', 'address': '123 akala express ibadan', 'phone': '+2348056794345', 'id': uuid('80f63cdf-4be6-4a85-9e69-3895470ff8ed'), 'password_hash': '$2b$12$urlkbq3ztifq0jurr125wo9vl506jr0nhgwbfigz6dwur3anf3mwa', 'first_name': 'bola', 'last_name': 'coker', 'gender': 'male', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\guardian\guardian.py", line 18, in create_guardian
    return guardian_crud.create_guardian(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\guardian.py", line 30, in create_guardian
    guardian = self.factory.create_guardian(data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\guardian.py", line 53, in create_guardian
    raise DuplicateGuardianError(
app.core.errors.user_profile_errors.DuplicateGuardianError: Unique constraint violated for during guardian creation with bola.coker@example.com. Detail unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "guardians_email_address_key"
detail:  key (email_address)=(bola.coker@example.com) already exists.

[sql: insert into guardians (access_level, user_type, image_url, email_address, address, phone, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning guardians.created_at, guardians.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'guardian', 'image_url': none, 'email_address': 'bola.coker@example.com', 'address': '123 akala express ibadan', 'phone': '+2348056794345', 'id': uuid('80f63cdf-4be6-4a85-9e69-3895470ff8ed'), 'password_hash': '$2b$12$urlkbq3ztifq0jurr125wo9vl506jr0nhgwbfigz6dwur3anf3mwa', 'first_name': 'bola', 'last_name': 'coker', 'gender': 'male', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 23:02:39,533 - kademia - WARNING - UniqueViolationError | cbe24190-ce63-4c74-b903-bc4aa30d06bb | Unique constraint violated for during guardian creation with bola.coker@example.com. Detail unique constraint violation - detail: (psycopg2.errors.uniqueviolation) duplicate key value violates unique constraint "guardians_email_address_key"
detail:  key (email_address)=(bola.coker@example.com) already exists.

[sql: insert into guardians (access_level, user_type, image_url, email_address, address, phone, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) values (%(access_level)s, %(user_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(id)s::uuid, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::uuid, %(last_modified_by)s::uuid, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::uuid) returning guardians.created_at, guardians.last_modified_at]
[parameters: {'access_level': 'read', 'user_type': 'guardian', 'image_url': none, 'email_address': 'bola.coker@example.com', 'address': '123 akala express ibadan', 'phone': '+2348056794345', 'id': uuid('80f63cdf-4be6-4a85-9e69-3895470ff8ed'), 'password_hash': '$2b$12$urlkbq3ztifq0jurr125wo9vl506jr0nhgwbfigz6dwur3anf3mwa', 'first_name': 'bola', 'last_name': 'coker', 'gender': 'male', 'last_login': none, 'deletion_eligible': false, 'created_by': uuid('00000000-0000-0000-0000-000000000000'), 'last_modified_by': uuid('00000000-0000-0000-0000-000000000000'), 'is_archived': false, 'archived_at': none, 'archive_reason': none, 'archived_by': none}]
(background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-22 23:02:59,263 - kademia - INFO - Request started | ee10bde6-8ddb-4ec3-bdd7-b2f0365d19a9 | GET /api/v1/admin/archive/guardians/
2025-03-22 23:02:59,269 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 23:02:59,276 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level AS guardians_access_level, guardians.user_type AS guardians_user_type, guardians.image_url AS guardians_image_url, guardians.email_address AS guardians_email_address, guardians.address AS guardians_address, guardians.phone AS guardians_phone, guardians.id AS guardians_id, guardians.password_hash AS guardians_password_hash, guardians.first_name AS guardians_first_name, guardians.last_name AS guardians_last_name, guardians.gender AS guardians_gender, guardians.last_login AS guardians_last_login, guardians.deletion_eligible AS guardians_deletion_eligible, guardians.created_by AS guardians_created_by, guardians.last_modified_by AS guardians_last_modified_by, guardians.created_at AS guardians_created_at, guardians.last_modified_at AS guardians_last_modified_at, guardians.is_archived AS guardians_is_archived, guardians.archived_at AS guardians_archived_at, guardians.archive_reason AS guardians_archive_reason, guardians.archived_by AS guardians_archived_by 
FROM guardians 
WHERE guardians.is_archived = true ORDER BY guardians.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-22 23:02:59,277 - sqlalchemy.engine.Engine - INFO - [generated in 0.00126s] {'param_1': 50, 'param_2': 0}
2025-03-22 23:02:59,292 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 23:02:59,309 - kademia - INFO - Request completed | ee10bde6-8ddb-4ec3-bdd7-b2f0365d19a9 | Status: 200 | Time: 0.043s
2025-03-22 23:03:33,307 - kademia - INFO - Request started | 0aa517c4-cced-4cdf-8f49-7cd2ae853ccf | GET /api/v1/admin/archive/guardians/639ffd97-e28f-4a7d-bf3b-265b247af89f
2025-03-22 23:03:33,307 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 23:03:33,312 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level AS guardians_access_level, guardians.user_type AS guardians_user_type, guardians.image_url AS guardians_image_url, guardians.email_address AS guardians_email_address, guardians.address AS guardians_address, guardians.phone AS guardians_phone, guardians.id AS guardians_id, guardians.password_hash AS guardians_password_hash, guardians.first_name AS guardians_first_name, guardians.last_name AS guardians_last_name, guardians.gender AS guardians_gender, guardians.last_login AS guardians_last_login, guardians.deletion_eligible AS guardians_deletion_eligible, guardians.created_by AS guardians_created_by, guardians.last_modified_by AS guardians_last_modified_by, guardians.created_at AS guardians_created_at, guardians.last_modified_at AS guardians_last_modified_at, guardians.is_archived AS guardians_is_archived, guardians.archived_at AS guardians_archived_at, guardians.archive_reason AS guardians_archive_reason, guardians.archived_by AS guardians_archived_by 
FROM guardians 
WHERE guardians.is_archived = true AND guardians.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 23:03:33,313 - sqlalchemy.engine.Engine - INFO - [generated in 0.00125s] {'id_1': UUID('639ffd97-e28f-4a7d-bf3b-265b247af89f'), 'param_1': 1}
2025-03-22 23:03:33,317 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 23:03:33,317 - kademia - INFO - Request completed | 0aa517c4-cced-4cdf-8f49-7cd2ae853ccf | Status: 200 | Time: 0.010s
2025-03-22 23:03:45,561 - kademia - INFO - Request started | afe71970-daf3-491c-940e-bbf2f1ae016f | DELETE /api/v1/admin/archive/guardians/639ffd97-e28f-4a7d-bf3b-265b247af89f
2025-03-22 23:03:45,565 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 23:03:45,565 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level AS guardians_access_level, guardians.user_type AS guardians_user_type, guardians.image_url AS guardians_image_url, guardians.email_address AS guardians_email_address, guardians.address AS guardians_address, guardians.phone AS guardians_phone, guardians.id AS guardians_id, guardians.password_hash AS guardians_password_hash, guardians.first_name AS guardians_first_name, guardians.last_name AS guardians_last_name, guardians.gender AS guardians_gender, guardians.last_login AS guardians_last_login, guardians.deletion_eligible AS guardians_deletion_eligible, guardians.created_by AS guardians_created_by, guardians.last_modified_by AS guardians_last_modified_by, guardians.created_at AS guardians_created_at, guardians.last_modified_at AS guardians_last_modified_at, guardians.is_archived AS guardians_is_archived, guardians.archived_at AS guardians_archived_at, guardians.archive_reason AS guardians_archive_reason, guardians.archived_by AS guardians_archived_by 
FROM guardians 
WHERE guardians.is_archived = true AND guardians.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 23:03:45,565 - sqlalchemy.engine.Engine - INFO - [cached since 12.25s ago] {'id_1': UUID('639ffd97-e28f-4a7d-bf3b-265b247af89f'), 'param_1': 1}
2025-03-22 23:03:45,577 - sqlalchemy.engine.Engine - INFO - SELECT students.student_id AS students_student_id, students.guardian_id AS students_guardian_id, students.user_type AS students_user_type, students.access_level AS students_access_level, students.status AS students_status, students.date_of_birth AS students_date_of_birth, students.image_url AS students_image_url, students.level_id AS students_level_id, students.class_id AS students_class_id, students.department_id AS students_department_id, students.is_repeating AS students_is_repeating, students.session_start_year AS students_session_start_year, students.date_left AS students_date_left, students.graduation_date AS students_graduation_date, students.id AS students_id, students.password_hash AS students_password_hash, students.first_name AS students_first_name, students.last_name AS students_last_name, students.gender AS students_gender, students.last_login AS students_last_login, students.deletion_eligible AS students_deletion_eligible, students.created_by AS students_created_by, students.last_modified_by AS students_last_modified_by, students.created_at AS students_created_at, students.last_modified_at AS students_last_modified_at, students.is_archived AS students_is_archived, students.archived_at AS students_archived_at, students.archive_reason AS students_archive_reason, students.archived_by AS students_archived_by 
FROM students 
WHERE %(param_1)s::UUID = students.guardian_id
2025-03-22 23:03:45,577 - sqlalchemy.engine.Engine - INFO - [generated in 0.00184s] {'param_1': UUID('639ffd97-e28f-4a7d-bf3b-265b247af89f')}
2025-03-22 23:03:45,595 - sqlalchemy.engine.Engine - INFO - DELETE FROM guardians WHERE guardians.id = %(id)s::UUID
2025-03-22 23:03:45,597 - sqlalchemy.engine.Engine - INFO - [generated in 0.00144s] {'id': UUID('639ffd97-e28f-4a7d-bf3b-265b247af89f')}
2025-03-22 23:03:45,601 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 23:03:45,607 - kademia - INFO - Request completed | afe71970-daf3-491c-940e-bbf2f1ae016f | Status: 204 | Time: 0.044s
2025-03-22 23:03:55,613 - kademia - INFO - Request started | 1adb4448-0ead-4493-90cd-688477264025 | POST /api/v1/admin/guardians/
2025-03-22 23:03:56,157 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 23:03:56,157 - sqlalchemy.engine.Engine - INFO - INSERT INTO guardians (access_level, user_type, image_url, email_address, address, phone, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING guardians.created_at, guardians.last_modified_at
2025-03-22 23:03:56,157 - sqlalchemy.engine.Engine - INFO - [cached since 76.68s ago] {'access_level': 'READ', 'user_type': 'GUARDIAN', 'image_url': None, 'email_address': 'bola.coker@example.com', 'address': '123 Akala Express Ibadan', 'phone': '+2348056794345', 'id': UUID('73f39d78-3bbf-4482-9355-72ce0394559a'), 'password_hash': '$2b$12$tMuCze3FOsQiQI68VCDSg.EC.8iEsMXAtx3.Zr1mp9O1FSRuvbAhS', 'first_name': 'Bola', 'last_name': 'Coker', 'gender': 'MALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 23:03:56,172 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 23:03:56,175 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 23:03:56,180 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level, guardians.user_type, guardians.image_url, guardians.email_address, guardians.address, guardians.phone, guardians.id, guardians.password_hash, guardians.first_name, guardians.last_name, guardians.gender, guardians.last_login, guardians.deletion_eligible, guardians.created_by, guardians.last_modified_by, guardians.created_at, guardians.last_modified_at, guardians.is_archived, guardians.archived_at, guardians.archive_reason, guardians.archived_by 
FROM guardians 
WHERE guardians.id = %(pk_1)s::UUID
2025-03-22 23:03:56,182 - sqlalchemy.engine.Engine - INFO - [generated in 0.00151s] {'pk_1': UUID('73f39d78-3bbf-4482-9355-72ce0394559a')}
2025-03-22 23:03:56,182 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 23:03:56,182 - kademia - INFO - Request completed | 1adb4448-0ead-4493-90cd-688477264025 | Status: 201 | Time: 0.562s
2025-03-22 23:04:20,051 - kademia - INFO - Request started | 64920ebc-dc5b-4c8a-acb7-40b74069ca21 | PATCH /api/v1/admin/guardians/73f39d78-3bbf-4482-9355-72ce0394559a
2025-03-22 23:04:20,056 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 23:04:20,064 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level AS guardians_access_level, guardians.user_type AS guardians_user_type, guardians.image_url AS guardians_image_url, guardians.email_address AS guardians_email_address, guardians.address AS guardians_address, guardians.phone AS guardians_phone, guardians.id AS guardians_id, guardians.password_hash AS guardians_password_hash, guardians.first_name AS guardians_first_name, guardians.last_name AS guardians_last_name, guardians.gender AS guardians_gender, guardians.last_login AS guardians_last_login, guardians.deletion_eligible AS guardians_deletion_eligible, guardians.created_by AS guardians_created_by, guardians.last_modified_by AS guardians_last_modified_by, guardians.created_at AS guardians_created_at, guardians.last_modified_at AS guardians_last_modified_at, guardians.is_archived AS guardians_is_archived, guardians.archived_at AS guardians_archived_at, guardians.archive_reason AS guardians_archive_reason, guardians.archived_by AS guardians_archived_by 
FROM guardians 
WHERE guardians.is_archived = false AND guardians.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 23:04:20,065 - sqlalchemy.engine.Engine - INFO - [generated in 0.00134s] {'id_1': UUID('73f39d78-3bbf-4482-9355-72ce0394559a'), 'param_1': 1}
2025-03-22 23:04:20,068 - sqlalchemy.engine.Engine - INFO - UPDATE guardians SET last_modified_at=now(), is_archived=%(is_archived)s, archived_at=%(archived_at)s, archive_reason=%(archive_reason)s, archived_by=%(archived_by)s::UUID WHERE guardians.id = %(guardians_id)s::UUID
2025-03-22 23:04:20,068 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] {'is_archived': True, 'archived_at': datetime.datetime(2025, 3, 22, 23, 4, 20, 66260, tzinfo=datetime.timezone.utc), 'archive_reason': 'ERROR', 'archived_by': UUID('00000000-0000-0000-0000-000000000000'), 'guardians_id': UUID('73f39d78-3bbf-4482-9355-72ce0394559a')}
2025-03-22 23:04:20,072 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 23:04:20,072 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 23:04:20,079 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level, guardians.user_type, guardians.image_url, guardians.email_address, guardians.address, guardians.phone, guardians.id, guardians.password_hash, guardians.first_name, guardians.last_name, guardians.gender, guardians.last_login, guardians.deletion_eligible, guardians.created_by, guardians.last_modified_by, guardians.created_at, guardians.last_modified_at, guardians.is_archived, guardians.archived_at, guardians.archive_reason, guardians.archived_by 
FROM guardians 
WHERE guardians.id = %(pk_1)s::UUID
2025-03-22 23:04:20,080 - sqlalchemy.engine.Engine - INFO - [cached since 23.9s ago] {'pk_1': UUID('73f39d78-3bbf-4482-9355-72ce0394559a')}
2025-03-22 23:04:20,085 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 23:04:20,086 - kademia - INFO - Request completed | 64920ebc-dc5b-4c8a-acb7-40b74069ca21 | Status: 204 | Time: 0.030s
2025-03-22 23:05:14,748 - kademia - INFO - Application started
2025-03-22 23:05:26,590 - kademia - INFO - Request started | 175d6ddc-fd07-473e-bebc-afbc620ca481 | GET /api/v1/admin/guardians/73f39d78-3bbf-4482-9355-72ce0394559a
2025-03-22 23:05:27,156 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-22 23:05:27,166 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 23:05:27,187 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-22 23:05:27,194 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 23:05:27,199 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-22 23:05:27,221 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-22 23:05:27,229 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 23:05:27,245 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level AS guardians_access_level, guardians.user_type AS guardians_user_type, guardians.image_url AS guardians_image_url, guardians.email_address AS guardians_email_address, guardians.address AS guardians_address, guardians.phone AS guardians_phone, guardians.id AS guardians_id, guardians.password_hash AS guardians_password_hash, guardians.first_name AS guardians_first_name, guardians.last_name AS guardians_last_name, guardians.gender AS guardians_gender, guardians.last_login AS guardians_last_login, guardians.deletion_eligible AS guardians_deletion_eligible, guardians.created_by AS guardians_created_by, guardians.last_modified_by AS guardians_last_modified_by, guardians.created_at AS guardians_created_at, guardians.last_modified_at AS guardians_last_modified_at, guardians.is_archived AS guardians_is_archived, guardians.archived_at AS guardians_archived_at, guardians.archive_reason AS guardians_archive_reason, guardians.archived_by AS guardians_archived_by 
FROM guardians 
WHERE guardians.is_archived = false AND guardians.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 23:05:27,259 - sqlalchemy.engine.Engine - INFO - [generated in 0.01195s] {'id_1': UUID('73f39d78-3bbf-4482-9355-72ce0394559a'), 'param_1': 1}
2025-03-22 23:05:27,273 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 23:05:27,281 - kademia - ERROR - Unhandled exception | 175d6ddc-fd07-473e-bebc-afbc620ca481 | Guardian with id:73f39d78-3bbf-4482-9355-72ce0394559a not found. Detail Guardian not with id 73f39d78-3bbf-4482-9355-72ce0394559a not found. DETAIL: Record not found
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\guardian\guardian.py", line 31, in get_guardian
    return guardian_crud.get_guardian(guardian_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\guardian.py", line 41, in get_guardian
    guardian = self.factory.get_guardian(guardian_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\guardian.py", line 74, in get_guardian
    raise GuardianNotFoundError(id=guardian_id, detail = str(e))
app.core.errors.user_profile_errors.GuardianNotFoundError: Guardian with id:73f39d78-3bbf-4482-9355-72ce0394559a not found. Detail Guardian not with id 73f39d78-3bbf-4482-9355-72ce0394559a not found. DETAIL: Record not found
2025-03-22 23:05:27,388 - kademia - WARNING - EntityNotFoundError | 175d6ddc-fd07-473e-bebc-afbc620ca481 | Guardian with id:73f39d78-3bbf-4482-9355-72ce0394559a not found. Detail Guardian not with id 73f39d78-3bbf-4482-9355-72ce0394559a not found. DETAIL: Record not found
2025-03-22 23:05:48,737 - kademia - INFO - Request started | e4557664-1839-4ada-83b2-d855b11126e6 | PATCH /api/v1/admin/archive/guardians/73f39d78-3bbf-4482-9355-72ce0394559a
2025-03-22 23:05:48,741 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 23:05:48,744 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level AS guardians_access_level, guardians.user_type AS guardians_user_type, guardians.image_url AS guardians_image_url, guardians.email_address AS guardians_email_address, guardians.address AS guardians_address, guardians.phone AS guardians_phone, guardians.id AS guardians_id, guardians.password_hash AS guardians_password_hash, guardians.first_name AS guardians_first_name, guardians.last_name AS guardians_last_name, guardians.gender AS guardians_gender, guardians.last_login AS guardians_last_login, guardians.deletion_eligible AS guardians_deletion_eligible, guardians.created_by AS guardians_created_by, guardians.last_modified_by AS guardians_last_modified_by, guardians.created_at AS guardians_created_at, guardians.last_modified_at AS guardians_last_modified_at, guardians.is_archived AS guardians_is_archived, guardians.archived_at AS guardians_archived_at, guardians.archive_reason AS guardians_archive_reason, guardians.archived_by AS guardians_archived_by 
FROM guardians 
WHERE guardians.is_archived = true AND guardians.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 23:05:48,744 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] {'id_1': UUID('73f39d78-3bbf-4482-9355-72ce0394559a'), 'param_1': 1}
2025-03-22 23:05:48,750 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level AS guardians_access_level, guardians.user_type AS guardians_user_type, guardians.image_url AS guardians_image_url, guardians.email_address AS guardians_email_address, guardians.address AS guardians_address, guardians.phone AS guardians_phone, guardians.id AS guardians_id, guardians.password_hash AS guardians_password_hash, guardians.first_name AS guardians_first_name, guardians.last_name AS guardians_last_name, guardians.gender AS guardians_gender, guardians.last_login AS guardians_last_login, guardians.deletion_eligible AS guardians_deletion_eligible, guardians.created_by AS guardians_created_by, guardians.last_modified_by AS guardians_last_modified_by, guardians.created_at AS guardians_created_at, guardians.last_modified_at AS guardians_last_modified_at, guardians.is_archived AS guardians_is_archived, guardians.archived_at AS guardians_archived_at, guardians.archive_reason AS guardians_archive_reason, guardians.archived_by AS guardians_archived_by 
FROM guardians 
WHERE guardians.is_archived = true AND guardians.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 23:05:48,750 - sqlalchemy.engine.Engine - INFO - [cached since 0.007331s ago] {'id_1': UUID('73f39d78-3bbf-4482-9355-72ce0394559a'), 'param_1': 1}
2025-03-22 23:05:48,757 - sqlalchemy.engine.Engine - INFO - UPDATE guardians SET last_modified_at=now(), is_archived=%(is_archived)s WHERE guardians.id = %(guardians_id)s::UUID
2025-03-22 23:05:48,759 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] {'is_archived': False, 'guardians_id': UUID('73f39d78-3bbf-4482-9355-72ce0394559a')}
2025-03-22 23:05:48,762 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 23:05:48,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 23:05:48,772 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level AS guardians_access_level, guardians.user_type AS guardians_user_type, guardians.image_url AS guardians_image_url, guardians.email_address AS guardians_email_address, guardians.address AS guardians_address, guardians.phone AS guardians_phone, guardians.id AS guardians_id, guardians.password_hash AS guardians_password_hash, guardians.first_name AS guardians_first_name, guardians.last_name AS guardians_last_name, guardians.gender AS guardians_gender, guardians.last_login AS guardians_last_login, guardians.deletion_eligible AS guardians_deletion_eligible, guardians.created_by AS guardians_created_by, guardians.last_modified_by AS guardians_last_modified_by, guardians.created_at AS guardians_created_at, guardians.last_modified_at AS guardians_last_modified_at, guardians.is_archived AS guardians_is_archived, guardians.archived_at AS guardians_archived_at, guardians.archive_reason AS guardians_archive_reason, guardians.archived_by AS guardians_archived_by 
FROM guardians 
WHERE guardians.id = %(pk_1)s::UUID
2025-03-22 23:05:48,773 - sqlalchemy.engine.Engine - INFO - [generated in 0.00118s] {'pk_1': UUID('73f39d78-3bbf-4482-9355-72ce0394559a')}
2025-03-22 23:05:48,777 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 23:05:48,779 - kademia - INFO - Request completed | e4557664-1839-4ada-83b2-d855b11126e6 | Status: 200 | Time: 0.042s
2025-03-22 23:05:58,599 - kademia - INFO - Request started | bc71b511-3151-4537-a3d5-99e0691e77d5 | DELETE /api/v1/admin/guardians/73f39d78-3bbf-4482-9355-72ce0394559a
2025-03-22 23:05:58,599 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 23:05:58,599 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level AS guardians_access_level, guardians.user_type AS guardians_user_type, guardians.image_url AS guardians_image_url, guardians.email_address AS guardians_email_address, guardians.address AS guardians_address, guardians.phone AS guardians_phone, guardians.id AS guardians_id, guardians.password_hash AS guardians_password_hash, guardians.first_name AS guardians_first_name, guardians.last_name AS guardians_last_name, guardians.gender AS guardians_gender, guardians.last_login AS guardians_last_login, guardians.deletion_eligible AS guardians_deletion_eligible, guardians.created_by AS guardians_created_by, guardians.last_modified_by AS guardians_last_modified_by, guardians.created_at AS guardians_created_at, guardians.last_modified_at AS guardians_last_modified_at, guardians.is_archived AS guardians_is_archived, guardians.archived_at AS guardians_archived_at, guardians.archive_reason AS guardians_archive_reason, guardians.archived_by AS guardians_archived_by 
FROM guardians 
WHERE guardians.is_archived = false AND guardians.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-22 23:05:58,604 - sqlalchemy.engine.Engine - INFO - [cached since 31.36s ago] {'id_1': UUID('73f39d78-3bbf-4482-9355-72ce0394559a'), 'param_1': 1}
2025-03-22 23:05:58,614 - sqlalchemy.engine.Engine - INFO - SELECT students.student_id AS students_student_id, students.guardian_id AS students_guardian_id, students.user_type AS students_user_type, students.access_level AS students_access_level, students.status AS students_status, students.date_of_birth AS students_date_of_birth, students.image_url AS students_image_url, students.level_id AS students_level_id, students.class_id AS students_class_id, students.department_id AS students_department_id, students.is_repeating AS students_is_repeating, students.session_start_year AS students_session_start_year, students.date_left AS students_date_left, students.graduation_date AS students_graduation_date, students.id AS students_id, students.password_hash AS students_password_hash, students.first_name AS students_first_name, students.last_name AS students_last_name, students.gender AS students_gender, students.last_login AS students_last_login, students.deletion_eligible AS students_deletion_eligible, students.created_by AS students_created_by, students.last_modified_by AS students_last_modified_by, students.created_at AS students_created_at, students.last_modified_at AS students_last_modified_at, students.is_archived AS students_is_archived, students.archived_at AS students_archived_at, students.archive_reason AS students_archive_reason, students.archived_by AS students_archived_by 
FROM students 
WHERE %(param_1)s::UUID = students.guardian_id
2025-03-22 23:05:58,616 - sqlalchemy.engine.Engine - INFO - [generated in 0.00162s] {'param_1': UUID('73f39d78-3bbf-4482-9355-72ce0394559a')}
2025-03-22 23:05:58,635 - sqlalchemy.engine.Engine - INFO - DELETE FROM guardians WHERE guardians.id = %(id)s::UUID
2025-03-22 23:05:58,645 - sqlalchemy.engine.Engine - INFO - [generated in 0.00938s] {'id': UUID('73f39d78-3bbf-4482-9355-72ce0394559a')}
2025-03-22 23:05:58,645 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 23:05:58,651 - kademia - INFO - Request completed | bc71b511-3151-4537-a3d5-99e0691e77d5 | Status: 204 | Time: 0.053s
2025-03-22 23:59:03,347 - kademia - INFO - Request started | 3322e7de-9309-44f8-a58e-1dceb90580ba | POST /api/v1/admin/guardians/
2025-03-22 23:59:03,625 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 23:59:03,628 - sqlalchemy.engine.Engine - INFO - INSERT INTO guardians (access_level, user_type, image_url, email_address, address, phone, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(access_level)s, %(user_type)s, %(image_url)s, %(email_address)s, %(address)s, %(phone)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING guardians.created_at, guardians.last_modified_at
2025-03-22 23:59:03,628 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] {'access_level': 'READ', 'user_type': 'GUARDIAN', 'image_url': None, 'email_address': 'bola.coker@example.com', 'address': '123 Akala Express Ibadan', 'phone': '+2348056794345', 'id': UUID('a6c66607-67a5-4d8a-9d49-d88cfecbd659'), 'password_hash': '$2b$12$xDxKUuU7LQ4NEXrbT.dQDeRdHSL5uWVtpIiE2aKS.cTH6VXl.aIsK', 'first_name': 'Bola', 'last_name': 'Coker', 'gender': 'MALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-22 23:59:03,635 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-22 23:59:03,640 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-22 23:59:03,643 - sqlalchemy.engine.Engine - INFO - SELECT guardians.access_level, guardians.user_type, guardians.image_url, guardians.email_address, guardians.address, guardians.phone, guardians.id, guardians.password_hash, guardians.first_name, guardians.last_name, guardians.gender, guardians.last_login, guardians.deletion_eligible, guardians.created_by, guardians.last_modified_by, guardians.created_at, guardians.last_modified_at, guardians.is_archived, guardians.archived_at, guardians.archive_reason, guardians.archived_by 
FROM guardians 
WHERE guardians.id = %(pk_1)s::UUID
2025-03-22 23:59:03,643 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] {'pk_1': UUID('a6c66607-67a5-4d8a-9d49-d88cfecbd659')}
2025-03-22 23:59:03,646 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-22 23:59:03,647 - kademia - INFO - Request completed | 3322e7de-9309-44f8-a58e-1dceb90580ba | Status: 201 | Time: 0.300s
2025-03-23 00:00:32,391 - kademia - INFO - Request started | ec06bb7b-626a-485c-b1a7-8ef9cc3e0dd9 | POST /api/v1/admin/students/
2025-03-23 00:00:32,626 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-23 00:00:32,641 - sqlalchemy.engine.Engine - INFO - SELECT max(CAST(SUBSTRING(students.student_id FROM %(substring_1)s) AS INTEGER)) AS max_1 
FROM students 
WHERE students.student_id LIKE %(student_id_1)s AND students.session_start_year = %(session_start_year_1)s
2025-03-23 00:00:32,642 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] {'substring_1': 8, 'student_id_1': 'SCH-25-%', 'session_start_year_1': 2025}
2025-03-23 00:00:32,643 - sqlalchemy.engine.Engine - INFO - INSERT INTO students (student_id, guardian_id, user_type, access_level, status, date_of_birth, image_url, level_id, class_id, department_id, is_repeating, session_start_year, date_left, graduation_date, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(student_id)s, %(guardian_id)s::UUID, %(user_type)s, %(access_level)s, %(status)s, %(date_of_birth)s, %(image_url)s, %(level_id)s::UUID, %(class_id)s::UUID, %(department_id)s::UUID, %(is_repeating)s, %(session_start_year)s, %(date_left)s, %(graduation_date)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING students.created_at, students.last_modified_at
2025-03-23 00:00:32,643 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] {'student_id': 'SCH-25-00001', 'guardian_id': UUID('a6c66607-67a5-4d8a-9d49-d88cfecbd659'), 'user_type': 'STUDENT', 'access_level': 'READ', 'status': 'ENROLLED', 'date_of_birth': datetime.date(2010, 5, 15), 'image_url': None, 'level_id': UUID('00000000-0000-0000-0000-000000000002'), 'class_id': UUID('00000000-0000-0000-0000-000000000001'), 'department_id': UUID('00000000-0000-0000-0000-000000000003'), 'is_repeating': False, 'session_start_year': 2025, 'date_left': None, 'graduation_date': None, 'id': UUID('819d9b67-24b3-496c-a91f-0d7c226258a2'), 'password_hash': '$2b$12$bRBPW9x6f/JFo2fofXpbfeZDXWna8VOhS7P3WKvTjjwwd1pKRYtGq', 'first_name': 'Omotara', 'last_name': 'Johnson', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-23 00:00:32,649 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-23 00:00:32,649 - kademia - ERROR - Unhandled exception | ec06bb7b-626a-485c-b1a7-8ef9cc3e0dd9 | Error during during fk insertion of guardian with id:a6c66607-67a5-4d8a-9d49-d88cfecbd659 during create operation. Detail Foreign key constraint violation during create operation. Detail: (psycopg2.errors.ForeignKeyViolation) insert or update on table "students" violates foreign key constraint "fk_students_academic_levels_level_id"
DETAIL:  Key (level_id)=(00000000-0000-0000-0000-000000000002) is not present in table "academic_levels".

[SQL: INSERT INTO students (student_id, guardian_id, user_type, access_level, status, date_of_birth, image_url, level_id, class_id, department_id, is_repeating, session_start_year, date_left, graduation_date, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(student_id)s, %(guardian_id)s::UUID, %(user_type)s, %(access_level)s, %(status)s, %(date_of_birth)s, %(image_url)s, %(level_id)s::UUID, %(class_id)s::UUID, %(department_id)s::UUID, %(is_repeating)s, %(session_start_year)s, %(date_left)s, %(graduation_date)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING students.created_at, students.last_modified_at]
[parameters: {'student_id': 'SCH-25-00001', 'guardian_id': UUID('a6c66607-67a5-4d8a-9d49-d88cfecbd659'), 'user_type': 'STUDENT', 'access_level': 'READ', 'status': 'ENROLLED', 'date_of_birth': datetime.date(2010, 5, 15), 'image_url': None, 'level_id': UUID('00000000-0000-0000-0000-000000000002'), 'class_id': UUID('00000000-0000-0000-0000-000000000001'), 'department_id': UUID('00000000-0000-0000-0000-000000000003'), 'is_repeating': False, 'session_start_year': 2025, 'date_left': None, 'graduation_date': None, 'id': UUID('819d9b67-24b3-496c-a91f-0d7c226258a2'), 'password_hash': '$2b$12$bRBPW9x6f/JFo2fofXpbfeZDXWna8VOhS7P3WKvTjjwwd1pKRYtGq', 'first_name': 'Omotara', 'last_name': 'Johnson', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 157, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\middleware\error_handler.py", line 98, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 163, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\starlette\concurrency.py", line 39, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\routers\users\student\student.py", line 18, in create_student
    return student_crud.create_student(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\crud\users\student.py", line 30, in create_student
    student = self.factory.create_student(data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\Kademia\V2\app\core\factories\users\student.py", line 81, in create_student
    raise error_class(id=entity_id, detail=str(e), action='create')
app.core.errors.user_profile_errors.RelatedGuardianNotFoundError: Error during during fk insertion of guardian with id:a6c66607-67a5-4d8a-9d49-d88cfecbd659 during create operation. Detail Foreign key constraint violation during create operation. Detail: (psycopg2.errors.ForeignKeyViolation) insert or update on table "students" violates foreign key constraint "fk_students_academic_levels_level_id"
DETAIL:  Key (level_id)=(00000000-0000-0000-0000-000000000002) is not present in table "academic_levels".

[SQL: INSERT INTO students (student_id, guardian_id, user_type, access_level, status, date_of_birth, image_url, level_id, class_id, department_id, is_repeating, session_start_year, date_left, graduation_date, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(student_id)s, %(guardian_id)s::UUID, %(user_type)s, %(access_level)s, %(status)s, %(date_of_birth)s, %(image_url)s, %(level_id)s::UUID, %(class_id)s::UUID, %(department_id)s::UUID, %(is_repeating)s, %(session_start_year)s, %(date_left)s, %(graduation_date)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING students.created_at, students.last_modified_at]
[parameters: {'student_id': 'SCH-25-00001', 'guardian_id': UUID('a6c66607-67a5-4d8a-9d49-d88cfecbd659'), 'user_type': 'STUDENT', 'access_level': 'READ', 'status': 'ENROLLED', 'date_of_birth': datetime.date(2010, 5, 15), 'image_url': None, 'level_id': UUID('00000000-0000-0000-0000-000000000002'), 'class_id': UUID('00000000-0000-0000-0000-000000000001'), 'department_id': UUID('00000000-0000-0000-0000-000000000003'), 'is_repeating': False, 'session_start_year': 2025, 'date_left': None, 'graduation_date': None, 'id': UUID('819d9b67-24b3-496c-a91f-0d7c226258a2'), 'password_hash': '$2b$12$bRBPW9x6f/JFo2fofXpbfeZDXWna8VOhS7P3WKvTjjwwd1pKRYtGq', 'first_name': 'Omotara', 'last_name': 'Johnson', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-23 00:00:32,659 - kademia - WARNING - RelationshipError | ec06bb7b-626a-485c-b1a7-8ef9cc3e0dd9 | Error during during fk insertion of guardian with id:a6c66607-67a5-4d8a-9d49-d88cfecbd659 during create operation. Detail Foreign key constraint violation during create operation. Detail: (psycopg2.errors.ForeignKeyViolation) insert or update on table "students" violates foreign key constraint "fk_students_academic_levels_level_id"
DETAIL:  Key (level_id)=(00000000-0000-0000-0000-000000000002) is not present in table "academic_levels".

[SQL: INSERT INTO students (student_id, guardian_id, user_type, access_level, status, date_of_birth, image_url, level_id, class_id, department_id, is_repeating, session_start_year, date_left, graduation_date, id, password_hash, first_name, last_name, gender, last_login, deletion_eligible, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(student_id)s, %(guardian_id)s::UUID, %(user_type)s, %(access_level)s, %(status)s, %(date_of_birth)s, %(image_url)s, %(level_id)s::UUID, %(class_id)s::UUID, %(department_id)s::UUID, %(is_repeating)s, %(session_start_year)s, %(date_left)s, %(graduation_date)s, %(id)s::UUID, %(password_hash)s, %(first_name)s, %(last_name)s, %(gender)s, %(last_login)s, %(deletion_eligible)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING students.created_at, students.last_modified_at]
[parameters: {'student_id': 'SCH-25-00001', 'guardian_id': UUID('a6c66607-67a5-4d8a-9d49-d88cfecbd659'), 'user_type': 'STUDENT', 'access_level': 'READ', 'status': 'ENROLLED', 'date_of_birth': datetime.date(2010, 5, 15), 'image_url': None, 'level_id': UUID('00000000-0000-0000-0000-000000000002'), 'class_id': UUID('00000000-0000-0000-0000-000000000001'), 'department_id': UUID('00000000-0000-0000-0000-000000000003'), 'is_repeating': False, 'session_start_year': 2025, 'date_left': None, 'graduation_date': None, 'id': UUID('819d9b67-24b3-496c-a91f-0d7c226258a2'), 'password_hash': '$2b$12$bRBPW9x6f/JFo2fofXpbfeZDXWna8VOhS7P3WKvTjjwwd1pKRYtGq', 'first_name': 'Omotara', 'last_name': 'Johnson', 'gender': 'FEMALE', 'last_login': None, 'deletion_eligible': False, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
