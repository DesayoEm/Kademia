2025-03-13 02:38:08,345 - trakademik - INFO - Application started
2025-03-13 02:38:11,337 - trakademik - INFO - Request started | 6df3db5f-f621-4e85-9c38-7702075db486 | GET /
2025-03-13 02:38:11,340 - trakademik - INFO - Request completed | 6df3db5f-f621-4e85-9c38-7702075db486 | Status: 200 | Time: 0.002s
2025-03-13 02:38:11,536 - trakademik - INFO - Request started | 3b12759a-8d84-4180-ae5a-b142b43d7073 | GET /favicon.ico
2025-03-13 02:38:11,541 - trakademik - INFO - Request completed | 3b12759a-8d84-4180-ae5a-b142b43d7073 | Status: 404 | Time: 0.001s
2025-03-13 02:38:14,973 - trakademik - INFO - Request started | 899b20f4-3c98-4b32-95ef-e2a4617b920b | GET /docs
2025-03-13 02:38:14,975 - trakademik - INFO - Request completed | 899b20f4-3c98-4b32-95ef-e2a4617b920b | Status: 200 | Time: 0.001s
2025-03-13 02:38:15,442 - trakademik - INFO - Request started | 0cd54d27-d65d-4e4a-a500-83dc717dca52 | GET /openapi.json
2025-03-13 02:38:15,549 - trakademik - INFO - Request completed | 0cd54d27-d65d-4e4a-a500-83dc717dca52 | Status: 200 | Time: 0.106s
2025-03-13 02:41:01,892 - trakademik - INFO - Request started | 5398d0eb-a95c-453e-91ca-813ee98a2ad0 | POST /api/v1/students/departments/
2025-03-13 02:41:02,384 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-13 02:41:02,385 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 02:41:02,390 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-13 02:41:02,391 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 02:41:02,393 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-13 02:41:02,393 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 02:41:02,394 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 02:41:02,399 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING student_departments.created_at, student_departments.last_modified_at
2025-03-13 02:41:02,400 - sqlalchemy.engine.Engine - INFO - [generated in 0.00159s] {'id': UUID('2a809d6d-9e44-4b65-ab0a-f156218560e4'), 'name': 'Science', 'description': 'Science Classes', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 02:41:02,446 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 02:41:02,450 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 02:41:02,454 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id, student_departments.name, student_departments.description, student_departments.mentor_id, student_departments.student_rep_id, student_departments.assistant_rep_id, student_departments.created_by, student_departments.last_modified_by, student_departments.created_at, student_departments.last_modified_at, student_departments.is_archived, student_departments.archived_at, student_departments.archive_reason, student_departments.archived_by 
FROM student_departments 
WHERE student_departments.id = %(pk_1)s::UUID
2025-03-13 02:41:02,455 - sqlalchemy.engine.Engine - INFO - [generated in 0.00082s] {'pk_1': UUID('2a809d6d-9e44-4b65-ab0a-f156218560e4')}
2025-03-13 02:41:02,459 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 02:41:02,461 - trakademik - INFO - Request completed | 5398d0eb-a95c-453e-91ca-813ee98a2ad0 | Status: 201 | Time: 0.569s
2025-03-13 02:41:26,330 - trakademik - INFO - Request started | 5b6c1870-a900-4023-b6e8-a10416ddb014 | GET /api/v1/students/departments/
2025-03-13 02:41:26,333 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 02:41:26,335 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id AS student_departments_id, student_departments.name AS student_departments_name, student_departments.description AS student_departments_description, student_departments.mentor_id AS student_departments_mentor_id, student_departments.student_rep_id AS student_departments_student_rep_id, student_departments.assistant_rep_id AS student_departments_assistant_rep_id, student_departments.created_by AS student_departments_created_by, student_departments.last_modified_by AS student_departments_last_modified_by, student_departments.created_at AS student_departments_created_at, student_departments.last_modified_at AS student_departments_last_modified_at, student_departments.is_archived AS student_departments_is_archived, student_departments.archived_at AS student_departments_archived_at, student_departments.archive_reason AS student_departments_archive_reason, student_departments.archived_by AS student_departments_archived_by 
FROM student_departments 
WHERE student_departments.is_archived = false AND student_departments.description ILIKE %(description_1)s ORDER BY student_departments.name DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-13 02:41:26,336 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] {'description_1': '%sci%', 'param_1': 50, 'param_2': 0}
2025-03-13 02:41:26,347 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 02:41:26,353 - trakademik - INFO - Request completed | 5b6c1870-a900-4023-b6e8-a10416ddb014 | Status: 200 | Time: 0.022s
2025-03-13 02:48:47,862 - trakademik - INFO - Request started | b371abca-0a79-4e67-806b-8fb0760ef76e | POST /api/v1/students/departments/
2025-03-13 02:48:47,866 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 02:48:47,867 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING student_departments.created_at, student_departments.last_modified_at
2025-03-13 02:48:47,868 - sqlalchemy.engine.Engine - INFO - [cached since 465.5s ago] {'id': UUID('4cbb6f00-0730-4b3a-88c1-d125a4a82965'), 'name': 'Science', 'description': 'Science Classes', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 02:48:47,879 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 02:48:47,894 - trakademik - ERROR - Unhandled exception | b371abca-0a79-4e67-806b-8fb0760ef76e | A student department with name Science already exists
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 36, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\student_organization\student_departments.py", line 22, in create_staff_department
    return student_departments_crud.create_department(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\student_organization\student_departments.py", line 30, in create_department
    department = self.factory.create_student_department(data)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\student_organization\factories\student_departments.py", line 38, in create_student_department
    raise DuplicateStudentDepartmentError(input=new_department.name, original_error=e)
app.services.errors.student_organisation_error.DuplicateStudentDepartmentError: A student department with name Science already exists
2025-03-13 02:48:48,146 - trakademik - WARNING - UniqueViolationError | b371abca-0a79-4e67-806b-8fb0760ef76e | Duplicate student department creation attempted: An unexpected error occurred
2025-03-13 02:50:01,060 - trakademik - INFO - Application started
2025-03-13 03:04:56,156 - trakademik - INFO - Application started
2025-03-13 03:05:01,471 - trakademik - INFO - Application started
2025-03-13 03:05:31,136 - trakademik - INFO - Application started
2025-03-13 03:06:37,786 - trakademik - INFO - Application started
2025-03-13 03:08:59,982 - trakademik - INFO - Application started
2025-03-13 03:10:24,529 - trakademik - INFO - Application started
2025-03-13 03:12:57,244 - trakademik - INFO - Application started
2025-03-13 03:20:44,470 - trakademik - INFO - Application started
2025-03-13 03:22:47,959 - trakademik - INFO - Application started
2025-03-13 03:24:11,058 - trakademik - INFO - Application started
2025-03-13 03:25:54,396 - trakademik - INFO - Application started
2025-03-13 03:27:32,649 - trakademik - INFO - Application started
2025-03-13 03:37:16,345 - trakademik - INFO - Application started
2025-03-13 03:40:05,177 - trakademik - INFO - Application started
2025-03-13 03:42:20,656 - trakademik - INFO - Application started
2025-03-13 04:26:00,021 - trakademik - INFO - Application started
2025-03-13 04:26:57,561 - trakademik - INFO - Application started
2025-03-13 04:27:43,155 - trakademik - INFO - Application started
2025-03-13 04:28:00,940 - trakademik - INFO - Application started
2025-03-13 04:46:00,067 - trakademik - INFO - Application started
2025-03-13 05:05:46,743 - trakademik - INFO - Application started
2025-03-13 05:12:28,608 - trakademik - INFO - Application started
2025-03-13 05:13:53,095 - trakademik - INFO - Request started | 5e5086a2-d0ef-42d7-8bd3-ae94e463b741 | GET /docs
2025-03-13 05:13:53,098 - trakademik - INFO - Request completed | 5e5086a2-d0ef-42d7-8bd3-ae94e463b741 | Status: 200 | Time: 0.001s
2025-03-13 05:13:53,563 - trakademik - INFO - Request started | 08260c29-738b-4e72-b4b4-f5127b3f6dad | GET /openapi.json
2025-03-13 05:13:53,624 - trakademik - INFO - Request completed | 08260c29-738b-4e72-b4b4-f5127b3f6dad | Status: 200 | Time: 0.060s
2025-03-13 05:29:12,923 - trakademik - INFO - Application started
2025-03-13 05:34:36,555 - trakademik - INFO - Application started
2025-03-13 05:34:51,480 - trakademik - INFO - Application started
2025-03-13 05:35:47,697 - trakademik - INFO - Application started
2025-03-13 05:40:06,398 - trakademik - INFO - Application started
2025-03-13 06:07:21,767 - trakademik - INFO - Application started
2025-03-13 06:07:55,014 - trakademik - INFO - Application started
2025-03-13 06:09:08,602 - trakademik - INFO - Application started
2025-03-13 15:19:41,362 - trakademik - INFO - Application started
2025-03-13 15:23:27,935 - trakademik - INFO - Application started
2025-03-13 15:29:02,421 - trakademik - INFO - Application started
2025-03-13 15:31:19,513 - trakademik - INFO - Application started
2025-03-13 15:52:08,388 - trakademik - INFO - Application started
2025-03-13 15:54:34,335 - trakademik - INFO - Application started
2025-03-13 16:04:46,422 - trakademik - INFO - Application started
2025-03-13 16:06:06,379 - trakademik - INFO - Application started
2025-03-13 16:09:53,718 - trakademik - INFO - Application started
2025-03-13 16:13:23,438 - trakademik - INFO - Application started
2025-03-13 16:25:26,108 - trakademik - INFO - Application started
2025-03-13 16:26:56,039 - trakademik - INFO - Application started
2025-03-13 16:28:53,829 - trakademik - INFO - Application started
2025-03-13 16:29:33,987 - trakademik - INFO - Application started
2025-03-13 16:29:54,978 - trakademik - INFO - Application started
2025-03-13 16:30:10,012 - trakademik - INFO - Application started
2025-03-13 16:30:51,340 - trakademik - INFO - Application started
2025-03-13 16:30:53,685 - trakademik - INFO - Application started
2025-03-13 16:31:34,104 - trakademik - INFO - Application started
2025-03-13 16:31:48,832 - trakademik - INFO - Application started
2025-03-13 17:56:46,776 - trakademik - INFO - Application started
2025-03-13 17:56:46,832 - trakademik - INFO - Request started | b68abe52-c9a5-49ff-8e2b-20a4d4bcc2a2 | GET /
2025-03-13 17:56:46,835 - trakademik - INFO - Request completed | b68abe52-c9a5-49ff-8e2b-20a4d4bcc2a2 | Status: 200 | Time: 0.000s
2025-03-13 17:56:47,005 - trakademik - INFO - Request started | 15927606-6b07-4a19-991e-135013d642db | GET /favicon.ico
2025-03-13 17:56:47,006 - trakademik - INFO - Request completed | 15927606-6b07-4a19-991e-135013d642db | Status: 404 | Time: 0.000s
2025-03-13 17:56:52,020 - trakademik - INFO - Request started | aa3806f3-0c1a-4b7f-b833-9c1becc1bf27 | GET /docs
2025-03-13 17:56:52,022 - trakademik - INFO - Request completed | aa3806f3-0c1a-4b7f-b833-9c1becc1bf27 | Status: 200 | Time: 0.001s
2025-03-13 17:56:52,405 - trakademik - INFO - Request started | 9ad74a56-3a78-4cb8-85c7-0efd777b3302 | GET /openapi.json
2025-03-13 17:56:52,589 - trakademik - INFO - Request completed | 9ad74a56-3a78-4cb8-85c7-0efd777b3302 | Status: 200 | Time: 0.182s
2025-03-13 18:59:05,669 - trakademik - INFO - Request started | 51cee68f-a838-4ca2-82f4-c90b8d271190 | POST /api/v1/students/academic levels/
2025-03-13 18:59:05,676 - trakademik - INFO - Request completed | 51cee68f-a838-4ca2-82f4-c90b8d271190 | Status: 404 | Time: 0.004s
2025-03-13 18:59:46,735 - trakademik - INFO - Application started
2025-03-13 18:59:51,054 - trakademik - INFO - Request started | 039de269-8e8d-4db7-9348-3a198acac5dd | GET /
2025-03-13 18:59:51,056 - trakademik - INFO - Request completed | 039de269-8e8d-4db7-9348-3a198acac5dd | Status: 200 | Time: 0.002s
2025-03-13 18:59:51,276 - trakademik - INFO - Request started | 3da66178-a6ef-4dc3-9483-c1b7a7216452 | GET /favicon.ico
2025-03-13 18:59:51,281 - trakademik - INFO - Request completed | 3da66178-a6ef-4dc3-9483-c1b7a7216452 | Status: 404 | Time: 0.001s
2025-03-13 18:59:57,524 - trakademik - INFO - Request started | 2b85431a-7e0c-4580-a2cb-bca9e82cbd37 | GET /docs
2025-03-13 18:59:57,526 - trakademik - INFO - Request completed | 2b85431a-7e0c-4580-a2cb-bca9e82cbd37 | Status: 200 | Time: 0.000s
2025-03-13 18:59:57,813 - trakademik - INFO - Request started | 3cd9f7b5-c6fa-4382-bd48-914a41e96876 | GET /openapi.json
2025-03-13 18:59:57,935 - trakademik - INFO - Request completed | 3cd9f7b5-c6fa-4382-bd48-914a41e96876 | Status: 200 | Time: 0.121s
2025-03-13 19:00:31,202 - trakademik - INFO - Request started | 2e4185ed-803c-4cce-a9ae-9602ce3c479e | POST /api/v1/students/academic levels/
2025-03-13 19:00:31,203 - trakademik - INFO - Request completed | 2e4185ed-803c-4cce-a9ae-9602ce3c479e | Status: 404 | Time: 0.001s
2025-03-13 19:01:27,551 - trakademik - INFO - Request started | eaa9c73f-7af2-4a32-84ff-9c69d53d12df | GET /api/v1/students/academic levels/
2025-03-13 19:01:27,552 - trakademik - INFO - Request completed | eaa9c73f-7af2-4a32-84ff-9c69d53d12df | Status: 404 | Time: 0.000s
2025-03-13 19:22:46,021 - trakademik - INFO - Application started
2025-03-13 19:22:46,031 - trakademik - INFO - Request started | 541bcb01-bbde-4dcb-b9ae-a35a8d5671b2 | GET /docs
2025-03-13 19:22:46,031 - trakademik - INFO - Request completed | 541bcb01-bbde-4dcb-b9ae-a35a8d5671b2 | Status: 200 | Time: 0.000s
2025-03-13 19:22:46,248 - trakademik - INFO - Request started | 02b97cb9-ba80-46c0-8ef1-e1880d12b1fe | GET /openapi.json
2025-03-13 19:22:46,383 - trakademik - INFO - Request completed | 02b97cb9-ba80-46c0-8ef1-e1880d12b1fe | Status: 200 | Time: 0.132s
2025-03-13 19:22:55,736 - trakademik - INFO - Request started | 663468ed-7652-487e-9b46-d3da173d678e | POST /api/v1/staff/qualifications/
2025-03-13 19:22:56,064 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-13 19:22:56,065 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 19:22:56,068 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-13 19:22:56,069 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 19:22:56,071 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-13 19:22:56,071 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 19:22:56,072 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:22:56,075 - sqlalchemy.engine.Engine - INFO - INSERT INTO educator_qualifications (id, educator_id, name, description, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(educator_id)s::UUID, %(name)s, %(description)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING educator_qualifications.created_at, educator_qualifications.last_modified_at
2025-03-13 19:22:56,075 - sqlalchemy.engine.Engine - INFO - [generated in 0.00101s] {'id': UUID('6a08fa54-03da-49c6-b869-65045817b709'), 'educator_id': UUID('00000000-0000-0000-0000-000000000000'), 'name': 'Master Of Science In Mathematics', 'description': 'Advanced Degree In Pure Mathematics', 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 19:22:56,107 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:22:56,109 - trakademik - ERROR - Unhandled exception | 663468ed-7652-487e-9b46-d3da173d678e | An unexpected error occurred
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 36, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\staff_organization\qualifications.py", line 22, in create_qualification
    return qualifications_crud.create_qualification(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\staff_organization\educator_qualifications.py", line 30, in create_qualification
    qualification = self.factory.create_qualification(data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\staff_organization\factories\educator_qualifications.py", line 41, in create_qualification
    return self.repository.create(qualification)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\database\db_repositories\sqlalchemy_repos\main_repo.py", line 76, in create
    raise RelationshipError(operation = "create", detail=str(e))
app.services.errors.database_errors.RelationshipError: An unexpected error occurred
2025-03-13 19:22:56,395 - trakademik - WARNING - RelationshipError | 663468ed-7652-487e-9b46-d3da173d678e | Database operation failed on None
2025-03-13 19:30:22,052 - trakademik - INFO - Application started
2025-03-13 19:30:57,373 - trakademik - INFO - Request started | 8009ee63-b9da-47a7-b22d-3c4db53210b2 | GET /docs
2025-03-13 19:30:57,375 - trakademik - INFO - Request completed | 8009ee63-b9da-47a7-b22d-3c4db53210b2 | Status: 200 | Time: 0.002s
2025-03-13 19:30:57,515 - trakademik - INFO - Request started | c8593643-e163-4e06-b74d-1df53bbc5528 | GET /openapi.json
2025-03-13 19:30:57,606 - trakademik - INFO - Request completed | c8593643-e163-4e06-b74d-1df53bbc5528 | Status: 200 | Time: 0.090s
2025-03-13 19:31:03,469 - trakademik - INFO - Request started | 8e8d64ee-0b15-4f24-8f66-50956fcf012e | POST /api/v1/staff/qualifications/
2025-03-13 19:31:03,846 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-13 19:31:03,846 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 19:31:03,848 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-13 19:31:03,849 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 19:31:03,850 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-13 19:31:03,851 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 19:31:03,853 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:31:03,858 - sqlalchemy.engine.Engine - INFO - INSERT INTO educator_qualifications (id, educator_id, name, description, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(educator_id)s::UUID, %(name)s, %(description)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING educator_qualifications.created_at, educator_qualifications.last_modified_at
2025-03-13 19:31:03,858 - sqlalchemy.engine.Engine - INFO - [generated in 0.00093s] {'id': UUID('11ae4838-dd5e-498c-b7df-84819edc3054'), 'educator_id': UUID('00000000-0000-0000-0000-000000000000'), 'name': 'Master Of Science In Mathematics', 'description': 'Advanced Degree In Pure Mathematics', 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 19:31:03,863 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:31:03,865 - trakademik - ERROR - Unhandled exception | 8e8d64ee-0b15-4f24-8f66-50956fcf012e | Qualification not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\staff_organization\qualifications.py", line 22, in create_qualification
    return qualifications_crud.create_qualification(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\staff_organization\educator_qualifications.py", line 30, in create_qualification
    qualification = self.factory.create_qualification(data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\staff_organization\factories\educator_qualifications.py", line 48, in create_qualification
    raise QualificationNotFoundError(id=new_qualification.educator_id)#needs to be user
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app.services.errors.staff_organisation_errors.QualificationNotFoundError: Qualification not found!
2025-03-13 19:31:03,886 - trakademik - WARNING - EntityNotFoundError | 8e8d64ee-0b15-4f24-8f66-50956fcf012e | Qualification with id:00000000-0000-0000-0000-000000000001 not found
2025-03-13 19:33:38,078 - trakademik - INFO - Request started | 08cb03c2-671e-4774-ae22-6d11a6279707 | GET /api/v1/staff/qualifications/
2025-03-13 19:33:38,084 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:33:38,090 - sqlalchemy.engine.Engine - INFO - SELECT educator_qualifications.id AS educator_qualifications_id, educator_qualifications.educator_id AS educator_qualifications_educator_id, educator_qualifications.name AS educator_qualifications_name, educator_qualifications.description AS educator_qualifications_description, educator_qualifications.created_by AS educator_qualifications_created_by, educator_qualifications.last_modified_by AS educator_qualifications_last_modified_by, educator_qualifications.created_at AS educator_qualifications_created_at, educator_qualifications.last_modified_at AS educator_qualifications_last_modified_at, educator_qualifications.is_archived AS educator_qualifications_is_archived, educator_qualifications.archived_at AS educator_qualifications_archived_at, educator_qualifications.archive_reason AS educator_qualifications_archive_reason, educator_qualifications.archived_by AS educator_qualifications_archived_by 
FROM educator_qualifications 
WHERE educator_qualifications.is_archived = false ORDER BY educator_qualifications.name DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-13 19:33:38,092 - sqlalchemy.engine.Engine - INFO - [generated in 0.00179s] {'param_1': 50, 'param_2': 0}
2025-03-13 19:33:38,105 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:33:38,109 - trakademik - INFO - Request completed | 08cb03c2-671e-4774-ae22-6d11a6279707 | Status: 200 | Time: 0.029s
2025-03-13 19:34:16,956 - trakademik - INFO - Request started | 52703bfd-4a80-41da-b495-e0b56a9f04e1 | GET /api/v1/staff/qualifications/00000000-0000-0000-0000-000000000001
2025-03-13 19:34:16,958 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:34:16,960 - sqlalchemy.engine.Engine - INFO - SELECT educator_qualifications.id AS educator_qualifications_id, educator_qualifications.educator_id AS educator_qualifications_educator_id, educator_qualifications.name AS educator_qualifications_name, educator_qualifications.description AS educator_qualifications_description, educator_qualifications.created_by AS educator_qualifications_created_by, educator_qualifications.last_modified_by AS educator_qualifications_last_modified_by, educator_qualifications.created_at AS educator_qualifications_created_at, educator_qualifications.last_modified_at AS educator_qualifications_last_modified_at, educator_qualifications.is_archived AS educator_qualifications_is_archived, educator_qualifications.archived_at AS educator_qualifications_archived_at, educator_qualifications.archive_reason AS educator_qualifications_archive_reason, educator_qualifications.archived_by AS educator_qualifications_archived_by 
FROM educator_qualifications 
WHERE educator_qualifications.is_archived = false AND educator_qualifications.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:34:16,960 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] {'id_1': UUID('00000000-0000-0000-0000-000000000001'), 'param_1': 1}
2025-03-13 19:34:16,963 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:34:16,964 - trakademik - ERROR - Unhandled exception | 52703bfd-4a80-41da-b495-e0b56a9f04e1 | Qualification not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\staff_organization\qualifications.py", line 35, in get_qualification
    return qualifications_crud.get_qualification(qualification_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\staff_organization\educator_qualifications.py", line 40, in get_qualification
    qualification = self.factory.get_qualification(qualification_id)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\staff_organization\factories\educator_qualifications.py", line 71, in get_qualification
    raise QualificationNotFoundError(id=qualification_id)
app.services.errors.staff_organisation_errors.QualificationNotFoundError: Qualification not found!
2025-03-13 19:34:16,970 - trakademik - WARNING - EntityNotFoundError | 52703bfd-4a80-41da-b495-e0b56a9f04e1 | Qualification with id:00000000-0000-0000-0000-000000000001 not found
2025-03-13 19:40:42,515 - trakademik - INFO - Request started | 18bb5678-23b3-495c-8ee7-e04f7e6f317c | POST /api/v1/staff/departments/
2025-03-13 19:40:42,521 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:40:42,524 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff_departments (id, name, description, manager_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(manager_id)s::UUID, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff_departments.created_at, staff_departments.last_modified_at
2025-03-13 19:40:42,524 - sqlalchemy.engine.Engine - INFO - [generated in 0.00085s] {'id': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e'), 'name': 'Academic Affairs', 'description': 'Manages Academic Programs And Curriculum', 'manager_id': UUID('00000000-0000-0000-0000-000000000000'), 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 19:40:42,532 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 19:40:42,535 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:40:42,541 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id, staff_departments.name, staff_departments.description, staff_departments.manager_id, staff_departments.created_by, staff_departments.last_modified_by, staff_departments.created_at, staff_departments.last_modified_at, staff_departments.is_archived, staff_departments.archived_at, staff_departments.archive_reason, staff_departments.archived_by 
FROM staff_departments 
WHERE staff_departments.id = %(pk_1)s::UUID
2025-03-13 19:40:42,543 - sqlalchemy.engine.Engine - INFO - [generated in 0.00280s] {'pk_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e')}
2025-03-13 19:40:42,547 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:40:42,548 - trakademik - INFO - Request completed | 18bb5678-23b3-495c-8ee7-e04f7e6f317c | Status: 201 | Time: 0.033s
2025-03-13 19:41:26,246 - trakademik - INFO - Request started | fd0ad87e-19df-44b8-b763-0da9e7dac345 | GET /api/v1/staff/departments/
2025-03-13 19:41:26,248 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:41:26,249 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = false AND staff_departments.name ILIKE %(name_1)s ORDER BY staff_departments.name DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-13 19:41:26,250 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] {'name_1': '%acade%', 'param_1': 50, 'param_2': 0}
2025-03-13 19:41:26,260 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:41:26,262 - trakademik - INFO - Request completed | fd0ad87e-19df-44b8-b763-0da9e7dac345 | Status: 200 | Time: 0.016s
2025-03-13 19:41:40,736 - trakademik - INFO - Request started | 672ad470-d48c-4970-84d6-2a10f3b6733d | GET /api/v1/staff/departments/5a22e071-0ed5-40ae-a810-230b497ac54e
2025-03-13 19:41:40,739 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:41:40,740 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = false AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:41:40,741 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] {'id_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e'), 'param_1': 1}
2025-03-13 19:41:40,743 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:41:40,744 - trakademik - INFO - Request completed | 672ad470-d48c-4970-84d6-2a10f3b6733d | Status: 200 | Time: 0.007s
2025-03-13 19:42:10,874 - trakademik - INFO - Request started | eacbe119-1113-4572-8311-f6dca709fde9 | PUT /api/v1/staff/departments/5a22e071-0ed5-40ae-a810-230b497ac54e
2025-03-13 19:42:10,878 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:42:10,878 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = false AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:42:10,879 - sqlalchemy.engine.Engine - INFO - [cached since 30.14s ago] {'id_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e'), 'param_1': 1}
2025-03-13 19:42:10,884 - sqlalchemy.engine.Engine - INFO - UPDATE staff_departments SET name=%(name)s, last_modified_at=now() WHERE staff_departments.id = %(staff_departments_id)s::UUID
2025-03-13 19:42:10,884 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] {'name': 'Academia', 'staff_departments_id': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e')}
2025-03-13 19:42:10,891 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = false AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:42:10,893 - sqlalchemy.engine.Engine - INFO - [cached since 30.15s ago] {'id_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e'), 'param_1': 1}
2025-03-13 19:42:10,896 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 19:42:10,900 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:42:10,904 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id, staff_departments.name, staff_departments.description, staff_departments.manager_id, staff_departments.created_by, staff_departments.last_modified_by, staff_departments.created_at, staff_departments.last_modified_at, staff_departments.is_archived, staff_departments.archived_at, staff_departments.archive_reason, staff_departments.archived_by 
FROM staff_departments 
WHERE staff_departments.id = %(pk_1)s::UUID
2025-03-13 19:42:10,904 - sqlalchemy.engine.Engine - INFO - [cached since 88.36s ago] {'pk_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e')}
2025-03-13 19:42:10,906 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:42:10,907 - trakademik - INFO - Request completed | eacbe119-1113-4572-8311-f6dca709fde9 | Status: 200 | Time: 0.033s
2025-03-13 19:44:28,513 - trakademik - INFO - Request started | 1145fe39-3a8c-490e-9167-192813289387 | GET /api/v1/staff/departments/5a22e071-0ed5-40ae-a810-230b497ac54e
2025-03-13 19:44:28,515 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:44:28,517 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = false AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:44:28,517 - sqlalchemy.engine.Engine - INFO - [cached since 167.8s ago] {'id_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e'), 'param_1': 1}
2025-03-13 19:44:28,520 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:44:28,522 - trakademik - INFO - Request completed | 1145fe39-3a8c-490e-9167-192813289387 | Status: 200 | Time: 0.010s
2025-03-13 19:44:43,284 - trakademik - INFO - Request started | 086d369d-013d-4f8b-81b7-a0bbbab20b2c | PATCH /api/v1/staff/departments/5a22e071-0ed5-40ae-a810-230b497ac54e
2025-03-13 19:44:43,290 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:44:43,291 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = false AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:44:43,291 - sqlalchemy.engine.Engine - INFO - [cached since 182.6s ago] {'id_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e'), 'param_1': 1}
2025-03-13 19:44:43,294 - sqlalchemy.engine.Engine - INFO - UPDATE staff_departments SET last_modified_at=now(), is_archived=%(is_archived)s, archived_at=%(archived_at)s, archive_reason=%(archive_reason)s, archived_by=%(archived_by)s::UUID WHERE staff_departments.id = %(staff_departments_id)s::UUID
2025-03-13 19:44:43,295 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] {'is_archived': True, 'archived_at': datetime.datetime(2025, 3, 13, 19, 44, 43, 293102, tzinfo=datetime.timezone.utc), 'archive_reason': 'ERROR', 'archived_by': UUID('00000000-0000-0000-0000-000000000000'), 'staff_departments_id': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e')}
2025-03-13 19:44:43,305 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 19:44:43,309 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:44:43,310 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id, staff_departments.name, staff_departments.description, staff_departments.manager_id, staff_departments.created_by, staff_departments.last_modified_by, staff_departments.created_at, staff_departments.last_modified_at, staff_departments.is_archived, staff_departments.archived_at, staff_departments.archive_reason, staff_departments.archived_by 
FROM staff_departments 
WHERE staff_departments.id = %(pk_1)s::UUID
2025-03-13 19:44:43,310 - sqlalchemy.engine.Engine - INFO - [cached since 240.8s ago] {'pk_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e')}
2025-03-13 19:44:43,313 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:44:43,314 - trakademik - INFO - Request completed | 086d369d-013d-4f8b-81b7-a0bbbab20b2c | Status: 204 | Time: 0.031s
2025-03-13 19:44:57,313 - trakademik - INFO - Request started | 4ad04e0e-882d-47b8-b0c9-712caa05b602 | GET /api/v1/staff/departments/5a22e071-0ed5-40ae-a810-230b497ac54e
2025-03-13 19:44:57,315 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:44:57,317 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = false AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:44:57,318 - sqlalchemy.engine.Engine - INFO - [cached since 196.6s ago] {'id_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e'), 'param_1': 1}
2025-03-13 19:44:57,320 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:44:57,321 - trakademik - ERROR - Unhandled exception | 4ad04e0e-882d-47b8-b0c9-712caa05b602 | Department not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\staff_organization\staff_departments.py", line 36, in get_staff_department
    return staff_departments_crud.get_department(department_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\staff_organization\staff_departments.py", line 41, in get_department
    department = self.factory.get_staff_department(department_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\staff_organization\factories\staff_departments.py", line 52, in get_staff_department
    raise DepartmentNotFoundError(id=department_id)
app.services.errors.staff_organisation_errors.DepartmentNotFoundError: Department not found!
2025-03-13 19:44:57,423 - trakademik - WARNING - EntityNotFoundError | 4ad04e0e-882d-47b8-b0c9-712caa05b602 | Department with id:5a22e071-0ed5-40ae-a810-230b497ac54e not found
2025-03-13 19:45:33,591 - trakademik - INFO - Request started | c4a71be6-3f17-410d-839d-829224dde5c5 | GET /api/v1/archive/staff/departments/5a22e071-0ed5-40ae-a810-230b497ac54e
2025-03-13 19:45:33,593 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:45:33,595 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = true AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:45:33,595 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] {'id_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e'), 'param_1': 1}
2025-03-13 19:45:33,598 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:45:33,599 - trakademik - INFO - Request completed | c4a71be6-3f17-410d-839d-829224dde5c5 | Status: 200 | Time: 0.007s
2025-03-13 19:46:14,808 - trakademik - INFO - Request started | dffe4599-279b-4ddd-a249-0d34877c8f57 | PATCH /api/v1/archive/staff/departments/5a22e071-0ed5-40ae-a810-230b497ac54e
2025-03-13 19:46:14,809 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:46:14,810 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = true AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:46:14,811 - sqlalchemy.engine.Engine - INFO - [cached since 41.22s ago] {'id_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e'), 'param_1': 1}
2025-03-13 19:46:14,813 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = true AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:46:14,815 - sqlalchemy.engine.Engine - INFO - [cached since 41.22s ago] {'id_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e'), 'param_1': 1}
2025-03-13 19:46:14,818 - sqlalchemy.engine.Engine - INFO - UPDATE staff_departments SET last_modified_at=now(), is_archived=%(is_archived)s WHERE staff_departments.id = %(staff_departments_id)s::UUID
2025-03-13 19:46:14,818 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] {'is_archived': False, 'staff_departments_id': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e')}
2025-03-13 19:46:14,820 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 19:46:14,821 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:46:14,825 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.id = %(pk_1)s::UUID
2025-03-13 19:46:14,825 - sqlalchemy.engine.Engine - INFO - [generated in 0.00104s] {'pk_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e')}
2025-03-13 19:46:14,828 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:46:14,829 - trakademik - INFO - Request completed | dffe4599-279b-4ddd-a249-0d34877c8f57 | Status: 200 | Time: 0.021s
2025-03-13 19:46:23,473 - trakademik - INFO - Request started | 23869b6b-775b-4d87-93eb-a5fb83dd0e42 | GET /api/v1/staff/departments/5a22e071-0ed5-40ae-a810-230b497ac54e
2025-03-13 19:46:23,474 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:46:23,475 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = false AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:46:23,476 - sqlalchemy.engine.Engine - INFO - [cached since 282.7s ago] {'id_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e'), 'param_1': 1}
2025-03-13 19:46:23,478 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:46:23,479 - trakademik - INFO - Request completed | 23869b6b-775b-4d87-93eb-a5fb83dd0e42 | Status: 200 | Time: 0.007s
2025-03-13 19:46:33,549 - trakademik - INFO - Request started | d299e95d-1eaf-4416-8270-b0225636037f | GET /api/v1/archive/staff/departments/5a22e071-0ed5-40ae-a810-230b497ac54e
2025-03-13 19:46:33,550 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:46:33,551 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = true AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:46:33,551 - sqlalchemy.engine.Engine - INFO - [cached since 59.96s ago] {'id_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e'), 'param_1': 1}
2025-03-13 19:46:33,554 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:46:33,555 - trakademik - ERROR - Unhandled exception | d299e95d-1eaf-4416-8270-b0225636037f | Department not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\staff_organization\archived_staff_departments.py", line 24, in get_archived_staff_department
    return staff_departments_crud.get_archived_department(department_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\staff_organization\staff_departments.py", line 94, in get_archived_department
    department = self.factory.get_archived_department(department_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\staff_organization\factories\staff_departments.py", line 133, in get_archived_department
    raise DepartmentNotFoundError(id=department_id)
app.services.errors.staff_organisation_errors.DepartmentNotFoundError: Department not found!
2025-03-13 19:46:33,601 - trakademik - WARNING - EntityNotFoundError | d299e95d-1eaf-4416-8270-b0225636037f | Department with id:5a22e071-0ed5-40ae-a810-230b497ac54e not found
2025-03-13 19:47:43,859 - trakademik - INFO - Request started | 63e93f84-3fc9-4ac1-b5f0-d018a7cdd04e | DELETE /api/v1/staff/departments/5a22e071-0ed5-40ae-a810-230b497ac54e
2025-03-13 19:47:43,861 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:47:43,862 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = false AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:47:43,862 - sqlalchemy.engine.Engine - INFO - [cached since 363.1s ago] {'id_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e'), 'param_1': 1}
2025-03-13 19:47:43,868 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.department_id = %(param_1)s::UUID
2025-03-13 19:47:43,869 - sqlalchemy.engine.Engine - INFO - [generated in 0.00112s] {'param_1': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e')}
2025-03-13 19:47:43,888 - sqlalchemy.engine.Engine - INFO - DELETE FROM staff_departments WHERE staff_departments.id = %(id)s::UUID
2025-03-13 19:47:43,889 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] {'id': UUID('5a22e071-0ed5-40ae-a810-230b497ac54e')}
2025-03-13 19:47:43,890 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 19:47:43,892 - trakademik - INFO - Request completed | 63e93f84-3fc9-4ac1-b5f0-d018a7cdd04e | Status: 204 | Time: 0.033s
2025-03-13 19:47:55,225 - trakademik - INFO - Request started | 16f4d975-c79b-4cf3-af57-bd672a117247 | POST /api/v1/staff/departments/
2025-03-13 19:47:55,227 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:47:55,228 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff_departments (id, name, description, manager_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(manager_id)s::UUID, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff_departments.created_at, staff_departments.last_modified_at
2025-03-13 19:47:55,228 - sqlalchemy.engine.Engine - INFO - [cached since 432.7s ago] {'id': UUID('477c3dc5-575a-4c1d-a08c-a9e8cc16ba53'), 'name': 'Academic Affairs', 'description': 'Manages Academic Programs And Curriculum', 'manager_id': UUID('00000000-0000-0000-0000-000000000000'), 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 19:47:55,230 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 19:47:55,232 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:47:55,233 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id, staff_departments.name, staff_departments.description, staff_departments.manager_id, staff_departments.created_by, staff_departments.last_modified_by, staff_departments.created_at, staff_departments.last_modified_at, staff_departments.is_archived, staff_departments.archived_at, staff_departments.archive_reason, staff_departments.archived_by 
FROM staff_departments 
WHERE staff_departments.id = %(pk_1)s::UUID
2025-03-13 19:47:55,233 - sqlalchemy.engine.Engine - INFO - [cached since 432.7s ago] {'pk_1': UUID('477c3dc5-575a-4c1d-a08c-a9e8cc16ba53')}
2025-03-13 19:47:55,235 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:47:55,237 - trakademik - INFO - Request completed | 16f4d975-c79b-4cf3-af57-bd672a117247 | Status: 201 | Time: 0.012s
2025-03-13 19:48:15,548 - trakademik - INFO - Request started | de12db15-b873-4928-921c-59f9fb2c8a7e | POST /api/v1/staff/departments/
2025-03-13 19:48:15,550 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:48:15,550 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff_departments (id, name, description, manager_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(manager_id)s::UUID, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff_departments.created_at, staff_departments.last_modified_at
2025-03-13 19:48:15,551 - sqlalchemy.engine.Engine - INFO - [cached since 453s ago] {'id': UUID('3c7e9410-021b-4467-93b5-9f34648b80bd'), 'name': 'Academic Affairs', 'description': 'Manages Academic Programs And Curriculum', 'manager_id': UUID('00000000-0000-0000-0000-000000000000'), 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 19:48:15,557 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:48:15,559 - trakademik - ERROR - Unhandled exception | de12db15-b873-4928-921c-59f9fb2c8a7e | A department with name Academic Affairs already exists
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\staff_organization\staff_departments.py", line 22, in create_staff_department
    return staff_departments_crud.create_department(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\staff_organization\staff_departments.py", line 30, in create_department
    department = self.factory.create_staff_department(data)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\staff_organization\factories\staff_departments.py", line 39, in create_staff_department
    raise DuplicateDepartmentError(input=new_department.name, original_error=e)
app.services.errors.staff_organisation_errors.DuplicateDepartmentError: A department with name Academic Affairs already exists
2025-03-13 19:48:15,568 - trakademik - WARNING - UniqueViolationError | de12db15-b873-4928-921c-59f9fb2c8a7e | Duplicate department creation attempted: An unexpected error occurred
2025-03-13 19:50:14,323 - trakademik - INFO - Request started | 4c94eb72-5e61-4e42-9b0f-3b9d36ce73ef | GET /api/v1/staff/departments/477c3dc5-575a-4c1d-a08c-a9e8cc16ba53
2025-03-13 19:50:14,324 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:50:14,324 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = false AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:50:14,325 - sqlalchemy.engine.Engine - INFO - [cached since 513.6s ago] {'id_1': UUID('477c3dc5-575a-4c1d-a08c-a9e8cc16ba53'), 'param_1': 1}
2025-03-13 19:50:14,328 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:50:14,330 - trakademik - INFO - Request completed | 4c94eb72-5e61-4e42-9b0f-3b9d36ce73ef | Status: 200 | Time: 0.007s
2025-03-13 19:50:34,803 - trakademik - INFO - Request started | a6e6d6e6-d43f-44de-8f86-3b8a0064e77a | PATCH /api/v1/staff/departments/477c3dc5-575a-4c1d-a08c-a9e8cc16ba53
2025-03-13 19:50:34,806 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:50:34,808 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = false AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:50:34,808 - sqlalchemy.engine.Engine - INFO - [cached since 534.1s ago] {'id_1': UUID('477c3dc5-575a-4c1d-a08c-a9e8cc16ba53'), 'param_1': 1}
2025-03-13 19:50:34,810 - sqlalchemy.engine.Engine - INFO - UPDATE staff_departments SET last_modified_at=now(), is_archived=%(is_archived)s, archived_at=%(archived_at)s, archive_reason=%(archive_reason)s, archived_by=%(archived_by)s::UUID WHERE staff_departments.id = %(staff_departments_id)s::UUID
2025-03-13 19:50:34,811 - sqlalchemy.engine.Engine - INFO - [cached since 351.5s ago] {'is_archived': True, 'archived_at': datetime.datetime(2025, 3, 13, 19, 50, 34, 809622, tzinfo=datetime.timezone.utc), 'archive_reason': 'ERROR', 'archived_by': UUID('00000000-0000-0000-0000-000000000000'), 'staff_departments_id': UUID('477c3dc5-575a-4c1d-a08c-a9e8cc16ba53')}
2025-03-13 19:50:34,812 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 19:50:34,814 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:50:34,815 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id, staff_departments.name, staff_departments.description, staff_departments.manager_id, staff_departments.created_by, staff_departments.last_modified_by, staff_departments.created_at, staff_departments.last_modified_at, staff_departments.is_archived, staff_departments.archived_at, staff_departments.archive_reason, staff_departments.archived_by 
FROM staff_departments 
WHERE staff_departments.id = %(pk_1)s::UUID
2025-03-13 19:50:34,816 - sqlalchemy.engine.Engine - INFO - [cached since 592.3s ago] {'pk_1': UUID('477c3dc5-575a-4c1d-a08c-a9e8cc16ba53')}
2025-03-13 19:50:34,818 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:50:34,819 - trakademik - INFO - Request completed | a6e6d6e6-d43f-44de-8f86-3b8a0064e77a | Status: 204 | Time: 0.015s
2025-03-13 19:50:46,537 - trakademik - INFO - Request started | 0e3eac27-2417-4058-b8b3-4c914aa66a12 | POST /api/v1/staff/departments/
2025-03-13 19:50:46,539 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:50:46,540 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff_departments (id, name, description, manager_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(manager_id)s::UUID, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff_departments.created_at, staff_departments.last_modified_at
2025-03-13 19:50:46,540 - sqlalchemy.engine.Engine - INFO - [cached since 604s ago] {'id': UUID('b5d2bab0-24eb-4ad1-b742-3d40dfe91c84'), 'name': 'Academic Affairs', 'description': 'Manages Academic Programs And Curriculum', 'manager_id': UUID('00000000-0000-0000-0000-000000000000'), 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 19:50:46,542 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:50:46,544 - trakademik - ERROR - Unhandled exception | 0e3eac27-2417-4058-b8b3-4c914aa66a12 | A department with name Academic Affairs already exists
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\staff_organization\staff_departments.py", line 22, in create_staff_department
    return staff_departments_crud.create_department(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\staff_organization\staff_departments.py", line 30, in create_department
    department = self.factory.create_staff_department(data)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\staff_organization\factories\staff_departments.py", line 39, in create_staff_department
    raise DuplicateDepartmentError(input=new_department.name, original_error=e)
app.services.errors.staff_organisation_errors.DuplicateDepartmentError: A department with name Academic Affairs already exists
2025-03-13 19:50:46,549 - trakademik - WARNING - UniqueViolationError | 0e3eac27-2417-4058-b8b3-4c914aa66a12 | Duplicate department creation attempted: An unexpected error occurred
2025-03-13 19:50:54,079 - trakademik - INFO - Request started | e593497a-696d-48e9-8161-6da77bf94502 | GET /api/v1/staff/departments/
2025-03-13 19:50:54,082 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:50:54,083 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = false AND staff_departments.name ILIKE %(name_1)s ORDER BY staff_departments.name DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-13 19:50:54,084 - sqlalchemy.engine.Engine - INFO - [cached since 567.8s ago] {'name_1': '%acade%', 'param_1': 50, 'param_2': 0}
2025-03-13 19:50:54,085 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:50:54,087 - trakademik - INFO - Request completed | e593497a-696d-48e9-8161-6da77bf94502 | Status: 200 | Time: 0.008s
2025-03-13 19:51:05,859 - trakademik - INFO - Request started | 5a8262c4-2217-4e2b-90e7-8f37fa6a215d | DELETE /api/v1/archive/staff/departments/477c3dc5-575a-4c1d-a08c-a9e8cc16ba53
2025-03-13 19:51:05,861 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:51:05,862 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id AS staff_departments_id, staff_departments.name AS staff_departments_name, staff_departments.description AS staff_departments_description, staff_departments.manager_id AS staff_departments_manager_id, staff_departments.created_by AS staff_departments_created_by, staff_departments.last_modified_by AS staff_departments_last_modified_by, staff_departments.created_at AS staff_departments_created_at, staff_departments.last_modified_at AS staff_departments_last_modified_at, staff_departments.is_archived AS staff_departments_is_archived, staff_departments.archived_at AS staff_departments_archived_at, staff_departments.archive_reason AS staff_departments_archive_reason, staff_departments.archived_by AS staff_departments_archived_by 
FROM staff_departments 
WHERE staff_departments.is_archived = true AND staff_departments.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:51:05,862 - sqlalchemy.engine.Engine - INFO - [cached since 332.3s ago] {'id_1': UUID('477c3dc5-575a-4c1d-a08c-a9e8cc16ba53'), 'param_1': 1}
2025-03-13 19:51:05,865 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.department_id = %(param_1)s::UUID
2025-03-13 19:51:05,865 - sqlalchemy.engine.Engine - INFO - [cached since 202s ago] {'param_1': UUID('477c3dc5-575a-4c1d-a08c-a9e8cc16ba53')}
2025-03-13 19:51:05,867 - sqlalchemy.engine.Engine - INFO - DELETE FROM staff_departments WHERE staff_departments.id = %(id)s::UUID
2025-03-13 19:51:05,867 - sqlalchemy.engine.Engine - INFO - [cached since 202s ago] {'id': UUID('477c3dc5-575a-4c1d-a08c-a9e8cc16ba53')}
2025-03-13 19:51:05,869 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 19:51:05,875 - trakademik - INFO - Request completed | 5a8262c4-2217-4e2b-90e7-8f37fa6a215d | Status: 204 | Time: 0.015s
2025-03-13 19:55:24,194 - trakademik - INFO - Application started
2025-03-13 19:55:31,716 - trakademik - INFO - Request started | 3662e7a1-d213-4cb0-861f-896e0c100788 | GET /docs
2025-03-13 19:55:31,718 - trakademik - INFO - Request completed | 3662e7a1-d213-4cb0-861f-896e0c100788 | Status: 200 | Time: 0.001s
2025-03-13 19:55:31,871 - trakademik - INFO - Request started | 4f6badc9-3878-436d-a55b-98c965bbbbd1 | GET /openapi.json
2025-03-13 19:55:31,961 - trakademik - INFO - Request completed | 4f6badc9-3878-436d-a55b-98c965bbbbd1 | Status: 200 | Time: 0.088s
2025-03-13 19:58:27,177 - trakademik - INFO - Request started | 84599899-4535-4ba6-9235-fd4f7b39eca9 | POST /api/v1/staff/roles/
2025-03-13 19:58:27,452 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-13 19:58:27,453 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 19:58:27,454 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-13 19:58:27,455 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 19:58:27,455 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-13 19:58:27,456 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 19:58:27,457 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:58:27,461 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff_roles (id, name, description, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff_roles.created_at, staff_roles.last_modified_at
2025-03-13 19:58:27,461 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] {'id': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f'), 'name': 'Head Of Department', 'description': 'Manages Departmental Operations And Staff', 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 19:58:27,470 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 19:58:27,472 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:58:27,475 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id, staff_roles.name, staff_roles.description, staff_roles.created_by, staff_roles.last_modified_by, staff_roles.created_at, staff_roles.last_modified_at, staff_roles.is_archived, staff_roles.archived_at, staff_roles.archive_reason, staff_roles.archived_by 
FROM staff_roles 
WHERE staff_roles.id = %(pk_1)s::UUID
2025-03-13 19:58:27,476 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] {'pk_1': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f')}
2025-03-13 19:58:27,478 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:58:27,479 - trakademik - INFO - Request completed | 84599899-4535-4ba6-9235-fd4f7b39eca9 | Status: 201 | Time: 0.302s
2025-03-13 19:58:58,682 - trakademik - INFO - Request started | 3b9049c2-392a-4fa1-ace1-c3fcea3d00c8 | GET /api/v1/staff/roles/
2025-03-13 19:58:58,685 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:58:58,687 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = false ORDER BY staff_roles.name DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-13 19:58:58,688 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] {'param_1': 50, 'param_2': 0}
2025-03-13 19:58:58,695 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:58:58,698 - trakademik - INFO - Request completed | 3b9049c2-392a-4fa1-ace1-c3fcea3d00c8 | Status: 200 | Time: 0.016s
2025-03-13 19:59:10,528 - trakademik - INFO - Request started | c63a8ed2-e804-476c-a838-9a392f6b5912 | GET /api/v1/staff/roles/d2a2642b-bd54-42c6-a957-ef568b37186f
2025-03-13 19:59:10,530 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:59:10,532 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = false AND staff_roles.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:59:10,533 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] {'id_1': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f'), 'param_1': 1}
2025-03-13 19:59:10,536 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:59:10,536 - trakademik - INFO - Request completed | c63a8ed2-e804-476c-a838-9a392f6b5912 | Status: 200 | Time: 0.008s
2025-03-13 19:59:29,093 - trakademik - INFO - Request started | 9c81df8d-8092-4ff0-a0e8-70bce1a5ae66 | PUT /api/v1/staff/roles/d2a2642b-bd54-42c6-a957-ef568b37186f
2025-03-13 19:59:29,096 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:59:29,097 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = false AND staff_roles.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:59:29,097 - sqlalchemy.engine.Engine - INFO - [cached since 18.57s ago] {'id_1': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f'), 'param_1': 1}
2025-03-13 19:59:29,100 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:59:29,101 - trakademik - ERROR - Unhandled exception | 9c81df8d-8092-4ff0-a0e8-70bce1a5ae66 | 
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\staff_organization\staff_roles.py", line 41, in update_role
    return roles_crud.update_role(role_id, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\staff_organization\staff_roles.py", line 65, in update_role
    updated_role = self.factory.update_role(role_id, data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\staff_organization\factories\staff_roles.py", line 78, in update_role
    existing.name = self.validator.validate_name(data['name'])
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\staff_organization\validators.py", line 16, in validate_name
    raise TextTooShortError(input = value)
app.services.errors.input_errors.TextTooShortError
2025-03-13 19:59:29,194 - trakademik - WARNING - TextTooShortError | 9c81df8d-8092-4ff0-a0e8-70bce1a5ae66 | Creation attempted with short text: t
2025-03-13 19:59:43,150 - trakademik - INFO - Request started | 2b9ab651-4ee8-43fc-b9ac-8f4b116d9a8f | PUT /api/v1/staff/roles/d2a2642b-bd54-42c6-a957-ef568b37186f
2025-03-13 19:59:43,154 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:59:43,155 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = false AND staff_roles.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:59:43,155 - sqlalchemy.engine.Engine - INFO - [cached since 32.62s ago] {'id_1': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f'), 'param_1': 1}
2025-03-13 19:59:43,159 - sqlalchemy.engine.Engine - INFO - UPDATE staff_roles SET name=%(name)s, last_modified_at=now() WHERE staff_roles.id = %(staff_roles_id)s::UUID
2025-03-13 19:59:43,159 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] {'name': 'Frgt', 'staff_roles_id': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f')}
2025-03-13 19:59:43,162 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = false AND staff_roles.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:59:43,163 - sqlalchemy.engine.Engine - INFO - [cached since 32.63s ago] {'id_1': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f'), 'param_1': 1}
2025-03-13 19:59:43,164 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 19:59:43,170 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:59:43,171 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id, staff_roles.name, staff_roles.description, staff_roles.created_by, staff_roles.last_modified_by, staff_roles.created_at, staff_roles.last_modified_at, staff_roles.is_archived, staff_roles.archived_at, staff_roles.archive_reason, staff_roles.archived_by 
FROM staff_roles 
WHERE staff_roles.id = %(pk_1)s::UUID
2025-03-13 19:59:43,172 - sqlalchemy.engine.Engine - INFO - [cached since 75.7s ago] {'pk_1': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f')}
2025-03-13 19:59:43,174 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:59:43,175 - trakademik - INFO - Request completed | 2b9ab651-4ee8-43fc-b9ac-8f4b116d9a8f | Status: 200 | Time: 0.025s
2025-03-13 19:59:55,122 - trakademik - INFO - Request started | ac9004a3-875c-48b4-99e5-cf0f618ab768 | PATCH /api/v1/staff/roles/d2a2642b-bd54-42c6-a957-ef568b37186f
2025-03-13 19:59:55,124 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:59:55,125 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = false AND staff_roles.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 19:59:55,126 - sqlalchemy.engine.Engine - INFO - [cached since 44.59s ago] {'id_1': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f'), 'param_1': 1}
2025-03-13 19:59:55,128 - sqlalchemy.engine.Engine - INFO - UPDATE staff_roles SET last_modified_at=now(), is_archived=%(is_archived)s, archived_at=%(archived_at)s, archive_reason=%(archive_reason)s, archived_by=%(archived_by)s::UUID WHERE staff_roles.id = %(staff_roles_id)s::UUID
2025-03-13 19:59:55,128 - sqlalchemy.engine.Engine - INFO - [generated in 0.00081s] {'is_archived': True, 'archived_at': datetime.datetime(2025, 3, 13, 19, 59, 55, 127873, tzinfo=datetime.timezone.utc), 'archive_reason': 'ERROR', 'archived_by': UUID('00000000-0000-0000-0000-000000000000'), 'staff_roles_id': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f')}
2025-03-13 19:59:55,131 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 19:59:55,132 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 19:59:55,133 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id, staff_roles.name, staff_roles.description, staff_roles.created_by, staff_roles.last_modified_by, staff_roles.created_at, staff_roles.last_modified_at, staff_roles.is_archived, staff_roles.archived_at, staff_roles.archive_reason, staff_roles.archived_by 
FROM staff_roles 
WHERE staff_roles.id = %(pk_1)s::UUID
2025-03-13 19:59:55,133 - sqlalchemy.engine.Engine - INFO - [cached since 87.66s ago] {'pk_1': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f')}
2025-03-13 19:59:55,136 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 19:59:55,138 - trakademik - INFO - Request completed | ac9004a3-875c-48b4-99e5-cf0f618ab768 | Status: 204 | Time: 0.016s
2025-03-13 20:00:03,381 - trakademik - INFO - Request started | 67fedbb4-bc66-4e2c-bfc7-cb286ff1fed5 | POST /api/v1/staff/roles/
2025-03-13 20:00:03,383 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:00:03,384 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff_roles (id, name, description, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff_roles.created_at, staff_roles.last_modified_at
2025-03-13 20:00:03,385 - sqlalchemy.engine.Engine - INFO - [cached since 95.92s ago] {'id': UUID('5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c'), 'name': 'Head Of Department', 'description': 'Manages Departmental Operations And Staff', 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 20:00:03,386 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 20:00:03,392 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:00:03,392 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id, staff_roles.name, staff_roles.description, staff_roles.created_by, staff_roles.last_modified_by, staff_roles.created_at, staff_roles.last_modified_at, staff_roles.is_archived, staff_roles.archived_at, staff_roles.archive_reason, staff_roles.archived_by 
FROM staff_roles 
WHERE staff_roles.id = %(pk_1)s::UUID
2025-03-13 20:00:03,394 - sqlalchemy.engine.Engine - INFO - [cached since 95.92s ago] {'pk_1': UUID('5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c')}
2025-03-13 20:00:03,399 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 20:00:03,403 - trakademik - INFO - Request completed | 67fedbb4-bc66-4e2c-bfc7-cb286ff1fed5 | Status: 201 | Time: 0.022s
2025-03-13 20:02:06,022 - trakademik - INFO - Request started | aa8190fe-3654-4eee-9f81-69a063e4ab53 | POST /api/v1/staff/roles/
2025-03-13 20:02:06,024 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:02:06,026 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff_roles (id, name, description, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff_roles.created_at, staff_roles.last_modified_at
2025-03-13 20:02:06,026 - sqlalchemy.engine.Engine - INFO - [cached since 218.6s ago] {'id': UUID('4199f06a-a32c-4902-afd6-5c25c8e9624a'), 'name': 'Head Of Department', 'description': 'Manages Departmental Operations And Staff', 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 20:02:06,028 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 20:02:06,030 - trakademik - ERROR - Unhandled exception | aa8190fe-3654-4eee-9f81-69a063e4ab53 | A role with name Head of Department already exists
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\staff_organization\staff_roles.py", line 21, in create_role
    return roles_crud.create_role(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\staff_organization\staff_roles.py", line 30, in create_role
    role = self.factory.create_role(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\staff_organization\factories\staff_roles.py", line 43, in create_role
    raise DuplicateRoleError(name=new_role.name, original_error=e)
app.services.errors.staff_organisation_errors.DuplicateRoleError: A role with name Head of Department already exists
2025-03-13 20:02:06,036 - trakademik - WARNING - UniqueViolationError | aa8190fe-3654-4eee-9f81-69a063e4ab53 | Duplicate role creation attempted: An unexpected error occurred
2025-03-13 20:02:24,815 - trakademik - INFO - Request started | 1d28f872-624f-46eb-8d33-3e63beaf3061 | GET /api/v1/archive/staff/roles/
2025-03-13 20:02:24,818 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:02:24,821 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = true ORDER BY staff_roles.name DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-03-13 20:02:24,821 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] {'param_1': 50, 'param_2': 0}
2025-03-13 20:02:24,823 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 20:02:24,824 - trakademik - INFO - Request completed | 1d28f872-624f-46eb-8d33-3e63beaf3061 | Status: 200 | Time: 0.007s
2025-03-13 20:02:58,559 - trakademik - INFO - Request started | 14d047c6-9cfb-44c1-845b-62cffe1d2cc8 | GET /api/v1/archive/staff/roles/d2a2642b-bd54-42c6-a957-ef568b37186f
2025-03-13 20:02:58,561 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:02:58,564 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = true AND staff_roles.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 20:02:58,564 - sqlalchemy.engine.Engine - INFO - [generated in 0.00090s] {'id_1': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f'), 'param_1': 1}
2025-03-13 20:02:58,567 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 20:02:58,568 - trakademik - INFO - Request completed | 14d047c6-9cfb-44c1-845b-62cffe1d2cc8 | Status: 200 | Time: 0.008s
2025-03-13 20:03:23,390 - trakademik - INFO - Request started | ceedc26a-729e-48fd-b1a9-1f2451a43aa4 | DELETE /api/v1/archive/staff/roles/b2a2642b-bd54-42c6-a957-ef568b37186f
2025-03-13 20:03:23,392 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:03:23,393 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = true AND staff_roles.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 20:03:23,394 - sqlalchemy.engine.Engine - INFO - [cached since 24.83s ago] {'id_1': UUID('b2a2642b-bd54-42c6-a957-ef568b37186f'), 'param_1': 1}
2025-03-13 20:03:23,396 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 20:03:23,397 - trakademik - ERROR - Unhandled exception | ceedc26a-729e-48fd-b1a9-1f2451a43aa4 | Role not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\staff_organization\archived_staff_roles.py", line 35, in delete_archived_role
    return roles_crud.delete_archived_role(role_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\staff_organization\staff_roles.py", line 124, in delete_archived_role
    self.factory.delete_archived_role(role_id)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\staff_organization\factories\staff_roles.py", line 160, in delete_archived_role
    raise RoleNotFoundError(id=role_id)
app.services.errors.staff_organisation_errors.RoleNotFoundError: Role not found!
2025-03-13 20:03:23,485 - trakademik - WARNING - EntityNotFoundError | ceedc26a-729e-48fd-b1a9-1f2451a43aa4 | Role with id:b2a2642b-bd54-42c6-a957-ef568b37186f not found
2025-03-13 20:03:37,453 - trakademik - INFO - Request started | 9c98ab66-df16-4d39-aeab-27d11cba8730 | DELETE /api/v1/archive/staff/roles/d2a2642b-bd54-42c6-a957-ef568b37186f
2025-03-13 20:03:37,455 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:03:37,456 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = true AND staff_roles.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 20:03:37,457 - sqlalchemy.engine.Engine - INFO - [cached since 38.89s ago] {'id_1': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f'), 'param_1': 1}
2025-03-13 20:03:37,463 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.role_id = %(param_1)s::UUID
2025-03-13 20:03:37,464 - sqlalchemy.engine.Engine - INFO - [generated in 0.00116s] {'param_1': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f')}
2025-03-13 20:03:37,476 - sqlalchemy.engine.Engine - INFO - DELETE FROM staff_roles WHERE staff_roles.id = %(id)s::UUID
2025-03-13 20:03:37,476 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] {'id': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f')}
2025-03-13 20:03:37,477 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 20:03:37,486 - trakademik - INFO - Request completed | 9c98ab66-df16-4d39-aeab-27d11cba8730 | Status: 204 | Time: 0.032s
2025-03-13 20:04:18,620 - trakademik - INFO - Request started | 0b83f28e-88ea-4ce0-a192-534bf71e0873 | PATCH /api/v1/staff/roles/5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c
2025-03-13 20:04:18,622 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:04:18,623 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = false AND staff_roles.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 20:04:18,624 - sqlalchemy.engine.Engine - INFO - [cached since 308.1s ago] {'id_1': UUID('5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c'), 'param_1': 1}
2025-03-13 20:04:18,625 - sqlalchemy.engine.Engine - INFO - UPDATE staff_roles SET last_modified_at=now(), is_archived=%(is_archived)s, archived_at=%(archived_at)s, archive_reason=%(archive_reason)s, archived_by=%(archived_by)s::UUID WHERE staff_roles.id = %(staff_roles_id)s::UUID
2025-03-13 20:04:18,626 - sqlalchemy.engine.Engine - INFO - [cached since 263.5s ago] {'is_archived': True, 'archived_at': datetime.datetime(2025, 3, 13, 20, 4, 18, 625983, tzinfo=datetime.timezone.utc), 'archive_reason': 'ERROR', 'archived_by': UUID('00000000-0000-0000-0000-000000000000'), 'staff_roles_id': UUID('5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c')}
2025-03-13 20:04:18,628 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 20:04:18,631 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:04:18,632 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id, staff_roles.name, staff_roles.description, staff_roles.created_by, staff_roles.last_modified_by, staff_roles.created_at, staff_roles.last_modified_at, staff_roles.is_archived, staff_roles.archived_at, staff_roles.archive_reason, staff_roles.archived_by 
FROM staff_roles 
WHERE staff_roles.id = %(pk_1)s::UUID
2025-03-13 20:04:18,632 - sqlalchemy.engine.Engine - INFO - [cached since 351.2s ago] {'pk_1': UUID('5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c')}
2025-03-13 20:04:18,634 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 20:04:18,637 - trakademik - INFO - Request completed | 0b83f28e-88ea-4ce0-a192-534bf71e0873 | Status: 204 | Time: 0.017s
2025-03-13 20:04:37,702 - trakademik - INFO - Request started | ca189398-905d-4c93-97d7-5639d6f5c9ed | PATCH /api/v1/archive/staff/roles/5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c
2025-03-13 20:04:37,704 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:04:37,705 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = true AND staff_roles.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 20:04:37,706 - sqlalchemy.engine.Engine - INFO - [cached since 99.14s ago] {'id_1': UUID('5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c'), 'param_1': 1}
2025-03-13 20:04:37,708 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = true AND staff_roles.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 20:04:37,708 - sqlalchemy.engine.Engine - INFO - [cached since 99.15s ago] {'id_1': UUID('5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c'), 'param_1': 1}
2025-03-13 20:04:37,710 - sqlalchemy.engine.Engine - INFO - UPDATE staff_roles SET last_modified_at=now(), is_archived=%(is_archived)s WHERE staff_roles.id = %(staff_roles_id)s::UUID
2025-03-13 20:04:37,710 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] {'is_archived': False, 'staff_roles_id': UUID('5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c')}
2025-03-13 20:04:37,712 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 20:04:37,714 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:04:37,716 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.id = %(pk_1)s::UUID
2025-03-13 20:04:37,716 - sqlalchemy.engine.Engine - INFO - [generated in 0.00092s] {'pk_1': UUID('5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c')}
2025-03-13 20:04:37,721 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 20:04:37,722 - trakademik - INFO - Request completed | ca189398-905d-4c93-97d7-5639d6f5c9ed | Status: 200 | Time: 0.020s
2025-03-13 20:05:14,501 - trakademik - INFO - Request started | 25f2e921-5801-44d0-9f31-b99560fa0231 | GET /api/v1/staff/roles/d2a2642b-bd54-42c6-a957-ef568b37186f
2025-03-13 20:05:14,503 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:05:14,504 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = false AND staff_roles.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 20:05:14,505 - sqlalchemy.engine.Engine - INFO - [cached since 364s ago] {'id_1': UUID('d2a2642b-bd54-42c6-a957-ef568b37186f'), 'param_1': 1}
2025-03-13 20:05:14,507 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 20:05:14,507 - trakademik - ERROR - Unhandled exception | 25f2e921-5801-44d0-9f31-b99560fa0231 | Role not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\staff_organization\staff_roles.py", line 34, in get_role
    return roles_crud.get_role(role_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\staff_organization\staff_roles.py", line 41, in get_role
    role = self.factory.get_role(role_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\staff_organization\factories\staff_roles.py", line 64, in get_role
    raise RoleNotFoundError(id=role_id)
app.services.errors.staff_organisation_errors.RoleNotFoundError: Role not found!
2025-03-13 20:05:14,514 - trakademik - WARNING - EntityNotFoundError | 25f2e921-5801-44d0-9f31-b99560fa0231 | Role with id:d2a2642b-bd54-42c6-a957-ef568b37186f not found
2025-03-13 20:05:21,647 - trakademik - INFO - Request started | 926d47df-0a6e-48ec-bc34-73e24e0e8400 | GET /api/v1/staff/roles/5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c
2025-03-13 20:05:21,649 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:05:21,650 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = false AND staff_roles.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 20:05:21,651 - sqlalchemy.engine.Engine - INFO - [cached since 371.1s ago] {'id_1': UUID('5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c'), 'param_1': 1}
2025-03-13 20:05:21,654 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 20:05:21,655 - trakademik - INFO - Request completed | 926d47df-0a6e-48ec-bc34-73e24e0e8400 | Status: 200 | Time: 0.008s
2025-03-13 20:05:36,736 - trakademik - INFO - Request started | f3e0479d-6ef5-4cc2-a7a6-5aaecf237866 | DELETE /api/v1/staff/roles/5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c
2025-03-13 20:05:36,737 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:05:36,738 - sqlalchemy.engine.Engine - INFO - SELECT staff_roles.id AS staff_roles_id, staff_roles.name AS staff_roles_name, staff_roles.description AS staff_roles_description, staff_roles.created_by AS staff_roles_created_by, staff_roles.last_modified_by AS staff_roles_last_modified_by, staff_roles.created_at AS staff_roles_created_at, staff_roles.last_modified_at AS staff_roles_last_modified_at, staff_roles.is_archived AS staff_roles_is_archived, staff_roles.archived_at AS staff_roles_archived_at, staff_roles.archive_reason AS staff_roles_archive_reason, staff_roles.archived_by AS staff_roles_archived_by 
FROM staff_roles 
WHERE staff_roles.is_archived = false AND staff_roles.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-03-13 20:05:36,738 - sqlalchemy.engine.Engine - INFO - [cached since 386.2s ago] {'id_1': UUID('5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c'), 'param_1': 1}
2025-03-13 20:05:36,740 - sqlalchemy.engine.Engine - INFO - SELECT staff.access_level AS staff_access_level, staff.user_type AS staff_user_type, staff.status AS staff_status, staff.availability AS staff_availability, staff.staff_type AS staff_staff_type, staff.image_url AS staff_image_url, staff.email_address AS staff_email_address, staff.address AS staff_address, staff.phone AS staff_phone, staff.department_id AS staff_department_id, staff.role_id AS staff_role_id, staff.date_joined AS staff_date_joined, staff.date_left AS staff_date_left, staff.id AS staff_id, staff.password_hash AS staff_password_hash, staff.first_name AS staff_first_name, staff.last_name AS staff_last_name, staff.gender AS staff_gender, staff.last_login AS staff_last_login, staff.deletion_eligible AS staff_deletion_eligible, staff.created_by AS staff_created_by, staff.last_modified_by AS staff_last_modified_by, staff.created_at AS staff_created_at, staff.last_modified_at AS staff_last_modified_at, staff.is_archived AS staff_is_archived, staff.archived_at AS staff_archived_at, staff.archive_reason AS staff_archive_reason, staff.archived_by AS staff_archived_by 
FROM staff 
WHERE staff.role_id = %(param_1)s::UUID
2025-03-13 20:05:36,741 - sqlalchemy.engine.Engine - INFO - [cached since 119.3s ago] {'param_1': UUID('5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c')}
2025-03-13 20:05:36,745 - sqlalchemy.engine.Engine - INFO - DELETE FROM staff_roles WHERE staff_roles.id = %(id)s::UUID
2025-03-13 20:05:36,745 - sqlalchemy.engine.Engine - INFO - [cached since 119.3s ago] {'id': UUID('5dd03bcb-5f70-4fd1-b85c-f9c1c5b3460c')}
2025-03-13 20:05:36,747 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 20:05:36,750 - trakademik - INFO - Request completed | f3e0479d-6ef5-4cc2-a7a6-5aaecf237866 | Status: 204 | Time: 0.014s
2025-03-13 20:06:18,186 - trakademik - INFO - Request started | 29ede4bd-b605-41be-9d9a-7d98fbfa9c57 | POST /api/v1/staff/departments/
2025-03-13 20:06:18,189 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:06:18,192 - sqlalchemy.engine.Engine - INFO - INSERT INTO staff_departments (id, name, description, manager_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(manager_id)s::UUID, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING staff_departments.created_at, staff_departments.last_modified_at
2025-03-13 20:06:18,192 - sqlalchemy.engine.Engine - INFO - [generated in 0.00077s] {'id': UUID('7850fbb5-958b-4d27-ae77-47601c9ae134'), 'name': 'Academic Affairs', 'description': 'Manages Academic Programs And Curriculum', 'manager_id': UUID('00000000-0000-0000-0000-000000000056'), 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 20:06:18,197 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 20:06:18,201 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 20:06:18,202 - sqlalchemy.engine.Engine - INFO - SELECT staff_departments.id, staff_departments.name, staff_departments.description, staff_departments.manager_id, staff_departments.created_by, staff_departments.last_modified_by, staff_departments.created_at, staff_departments.last_modified_at, staff_departments.is_archived, staff_departments.archived_at, staff_departments.archive_reason, staff_departments.archived_by 
FROM staff_departments 
WHERE staff_departments.id = %(pk_1)s::UUID
2025-03-13 20:06:18,203 - sqlalchemy.engine.Engine - INFO - [generated in 0.00089s] {'pk_1': UUID('7850fbb5-958b-4d27-ae77-47601c9ae134')}
2025-03-13 20:06:18,218 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 20:06:18,223 - trakademik - INFO - Request completed | 29ede4bd-b605-41be-9d9a-7d98fbfa9c57 | Status: 201 | Time: 0.037s
2025-03-13 23:12:21,572 - trakademik - INFO - Application started
2025-03-13 23:12:23,626 - trakademik - INFO - Request started | dfc1d1ad-8125-4f21-9ee3-08587463262e | GET /
2025-03-13 23:12:23,629 - trakademik - INFO - Request completed | dfc1d1ad-8125-4f21-9ee3-08587463262e | Status: 200 | Time: 0.004s
2025-03-13 23:12:24,076 - trakademik - INFO - Request started | 5b97e190-80df-455b-9520-98f0baeae337 | GET /favicon.ico
2025-03-13 23:12:24,081 - trakademik - INFO - Request completed | 5b97e190-80df-455b-9520-98f0baeae337 | Status: 404 | Time: 0.004s
2025-03-13 23:12:29,178 - trakademik - INFO - Request started | 46feb32b-aa68-44bd-80e6-782c99a61420 | GET /docs
2025-03-13 23:12:29,180 - trakademik - INFO - Request completed | 46feb32b-aa68-44bd-80e6-782c99a61420 | Status: 200 | Time: 0.001s
2025-03-13 23:12:29,712 - trakademik - INFO - Request started | 8a294596-5cda-46d4-902c-f87986aae0f7 | GET /openapi.json
2025-03-13 23:12:29,912 - trakademik - INFO - Request completed | 8a294596-5cda-46d4-902c-f87986aae0f7 | Status: 200 | Time: 0.199s
2025-03-13 23:13:50,413 - trakademik - INFO - Request started | 48cf57d3-2546-48ba-acee-b116db31d69b | POST /api/v1/students/departments/
2025-03-13 23:13:50,851 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-13 23:13:50,853 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 23:13:50,855 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-13 23:13:50,856 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 23:13:50,856 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-13 23:13:50,858 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 23:13:50,865 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 23:13:50,869 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING student_departments.created_at, student_departments.last_modified_at
2025-03-13 23:13:50,871 - sqlalchemy.engine.Engine - INFO - [generated in 0.00099s] {'id': UUID('c9b30164-b4fd-4b14-b7ea-aa8b989e07be'), 'name': 'Science', 'description': 'Science Classes', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 23:13:50,886 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 23:13:50,891 - trakademik - ERROR - Unhandled exception | 48cf57d3-2546-48ba-acee-b116db31d69b | A student department with the name Science already exists
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 37, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\student_organization\student_departments.py", line 22, in create_department
    return student_departments_crud.create_department(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\student_organization\student_departments.py", line 30, in create_department
    department = self.factory.create_student_department(data)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\student_organization\departments\factory.py", line 38, in create_student_department
    raise DuplicateStudentDepartmentError(input=new_department.name, original_error=e)
app.services.errors.student_organisation_errors.DuplicateStudentDepartmentError: A student department with the name Science already exists
2025-03-13 23:13:50,974 - trakademik - WARNING - UniqueViolationError | 48cf57d3-2546-48ba-acee-b116db31d69b | Duplicate student department creation attempted: An unexpected error occurred
2025-03-13 23:14:04,885 - trakademik - INFO - Request started | 90d11c29-ac4f-4184-bcea-9d25b5fd0f69 | POST /api/v1/students/departments/
2025-03-13 23:14:04,888 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 23:14:04,889 - sqlalchemy.engine.Engine - INFO - INSERT INTO student_departments (id, name, description, mentor_id, student_rep_id, assistant_rep_id, created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING student_departments.created_at, student_departments.last_modified_at
2025-03-13 23:14:04,890 - sqlalchemy.engine.Engine - INFO - [cached since 14.02s ago] {'id': UUID('838b985d-23c0-470f-a2d6-54f57d1fe555'), 'name': 'Art', 'description': 'Science Classes', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 23:14:04,905 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-13 23:14:04,911 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 23:14:04,918 - sqlalchemy.engine.Engine - INFO - SELECT student_departments.id, student_departments.name, student_departments.description, student_departments.mentor_id, student_departments.student_rep_id, student_departments.assistant_rep_id, student_departments.created_by, student_departments.last_modified_by, student_departments.created_at, student_departments.last_modified_at, student_departments.is_archived, student_departments.archived_at, student_departments.archive_reason, student_departments.archived_by 
FROM student_departments 
WHERE student_departments.id = %(pk_1)s::UUID
2025-03-13 23:14:04,951 - sqlalchemy.engine.Engine - INFO - [generated in 0.03396s] {'pk_1': UUID('838b985d-23c0-470f-a2d6-54f57d1fe555')}
2025-03-13 23:14:04,994 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 23:14:05,002 - trakademik - INFO - Request completed | 90d11c29-ac4f-4184-bcea-9d25b5fd0f69 | Status: 201 | Time: 0.116s
2025-03-13 23:14:20,830 - trakademik - INFO - Request started | c9976775-74d8-4f69-89e0-383db0eb444b | POST /api/v1/students/academic levels/
2025-03-13 23:14:20,831 - trakademik - INFO - Request completed | c9976775-74d8-4f69-89e0-383db0eb444b | Status: 404 | Time: 0.000s
2025-03-13 23:16:59,101 - trakademik - INFO - Application started
2025-03-13 23:16:59,111 - trakademik - INFO - Request started | c960240c-01d6-4a64-bf3d-a80e763dfa23 | GET /docs
2025-03-13 23:16:59,111 - trakademik - INFO - Request completed | c960240c-01d6-4a64-bf3d-a80e763dfa23 | Status: 200 | Time: 0.000s
2025-03-13 23:16:59,566 - trakademik - INFO - Request started | 897d3f5a-58b8-486a-8438-cdf85c77ac72 | GET /openapi.json
2025-03-13 23:17:00,000 - trakademik - INFO - Request completed | 897d3f5a-58b8-486a-8438-cdf85c77ac72 | Status: 200 | Time: 0.432s
2025-03-13 23:17:10,429 - trakademik - INFO - Request started | 0fdd12f8-6cf2-480d-be4a-7f677847485f | POST /api/v1/students/academic levels/
2025-03-13 23:17:10,430 - trakademik - INFO - Request completed | 0fdd12f8-6cf2-480d-be4a-7f677847485f | Status: 404 | Time: 0.001s
2025-03-13 23:17:59,704 - trakademik - INFO - Application started
2025-03-13 23:18:33,082 - trakademik - INFO - Request started | 92d48883-781a-4ee8-92a6-c26d34d695b3 | POST /api/v1/students/classes/
2025-03-13 23:18:33,480 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-13 23:18:33,481 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 23:18:33,484 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-13 23:18:33,486 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 23:18:33,488 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-13 23:18:33,490 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 23:18:33,492 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 23:18:33,498 - sqlalchemy.engine.Engine - INFO - INSERT INTO classes (id, level_id, code, mentor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at
2025-03-13 23:18:33,499 - sqlalchemy.engine.Engine - INFO - [generated in 0.00103s] {'id': UUID('2f8ab7e2-c626-4464-909b-421b690f10e2'), 'level_id': UUID('00000000-0000-0000-0000-000000000000'), 'code': 'A', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 23:18:33,506 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 23:18:33,508 - trakademik - ERROR - Unhandled exception | 92d48883-781a-4ee8-92a6-c26d34d695b3 | Database operation failed on (psycopg2.errors.UndefinedColumn) column "order" of relation "classes" does not exist
LINE 1: ...ode, mentor_id, student_rep_id, assistant_rep_id, "order", c...
                                                             ^

[SQL: INSERT INTO classes (id, level_id, code, mentor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at]
[parameters: {'id': UUID('2f8ab7e2-c626-4464-909b-421b690f10e2'), 'level_id': UUID('00000000-0000-0000-0000-000000000000'), 'code': 'A', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}]
(Background on this error at: https://sqlalche.me/e/20/f405) on (psycopg2.errors.UndefinedColumn) column "order" of relation "classes" does not exist
LINE 1: ...ode, mentor_id, student_rep_id, assistant_rep_id, "order", c...
                                                             ^

[SQL: INSERT INTO classes (id, level_id, code, mentor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at]
[parameters: {'id': UUID('2f8ab7e2-c626-4464-909b-421b690f10e2'), 'level_id': UUID('00000000-0000-0000-0000-000000000000'), 'code': 'A', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 39, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\student_organization\classes.py", line 19, in create_class
    return class_crud.create_class(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\student_organization\classes.py", line 30, in create_class
    new_class = self.factory.create_class(data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\student_organization\classes\factory.py", line 42, in create_class
    return self.repository.create(class_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\database\db_repositories\sqlalchemy_repos\main_repo.py", line 81, in create
    raise TKDatabaseError(error=str(e))
app.services.errors.database_errors.DatabaseError: Database operation failed on (psycopg2.errors.UndefinedColumn) column "order" of relation "classes" does not exist
LINE 1: ...ode, mentor_id, student_rep_id, assistant_rep_id, "order", c...
                                                             ^

[SQL: INSERT INTO classes (id, level_id, code, mentor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at]
[parameters: {'id': UUID('2f8ab7e2-c626-4464-909b-421b690f10e2'), 'level_id': UUID('00000000-0000-0000-0000-000000000000'), 'code': 'A', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}]
(Background on this error at: https://sqlalche.me/e/20/f405) on (psycopg2.errors.UndefinedColumn) column "order" of relation "classes" does not exist
LINE 1: ...ode, mentor_id, student_rep_id, assistant_rep_id, "order", c...
                                                             ^

[SQL: INSERT INTO classes (id, level_id, code, mentor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at]
[parameters: {'id': UUID('2f8ab7e2-c626-4464-909b-421b690f10e2'), 'level_id': UUID('00000000-0000-0000-0000-000000000000'), 'code': 'A', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-13 23:18:33,537 - trakademik - ERROR - DatabaseError | 92d48883-781a-4ee8-92a6-c26d34d695b3 | Database operation failed on (psycopg2.errors.UndefinedColumn) column "order" of relation "classes" does not exist
LINE 1: ...ode, mentor_id, student_rep_id, assistant_rep_id, "order", c...
                                                             ^

[SQL: INSERT INTO classes (id, level_id, code, mentor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at]
[parameters: {'id': UUID('2f8ab7e2-c626-4464-909b-421b690f10e2'), 'level_id': UUID('00000000-0000-0000-0000-000000000000'), 'code': 'A', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}]
(Background on this error at: https://sqlalche.me/e/20/f405) on (psycopg2.errors.UndefinedColumn) column "order" of relation "classes" does not exist
LINE 1: ...ode, mentor_id, student_rep_id, assistant_rep_id, "order", c...
                                                             ^

[SQL: INSERT INTO classes (id, level_id, code, mentor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at]
[parameters: {'id': UUID('2f8ab7e2-c626-4464-909b-421b690f10e2'), 'level_id': UUID('00000000-0000-0000-0000-000000000000'), 'code': 'A', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-13 23:20:10,997 - trakademik - INFO - Application started
2025-03-13 23:20:21,426 - trakademik - INFO - Application started
2025-03-13 23:23:59,230 - trakademik - INFO - Application started
2025-03-13 23:23:59,591 - trakademik - INFO - Request started | 1c755f91-22a7-4c86-adf5-ac8f93bf9460 | GET /
2025-03-13 23:23:59,675 - trakademik - INFO - Request completed | 1c755f91-22a7-4c86-adf5-ac8f93bf9460 | Status: 200 | Time: 0.066s
2025-03-13 23:24:00,000 - trakademik - INFO - Request started | fbe9635d-3548-427b-97a5-b4ddc53e0dab | GET /favicon.ico
2025-03-13 23:24:00,005 - trakademik - INFO - Request completed | fbe9635d-3548-427b-97a5-b4ddc53e0dab | Status: 404 | Time: 0.005s
2025-03-13 23:24:05,987 - trakademik - INFO - Request started | a3ec8f32-972e-454c-9665-44a93cbf7903 | GET /docs
2025-03-13 23:24:05,994 - trakademik - INFO - Request completed | a3ec8f32-972e-454c-9665-44a93cbf7903 | Status: 200 | Time: 0.006s
2025-03-13 23:24:06,146 - trakademik - INFO - Request started | 2635f31f-0669-464a-b599-ea0735fcdf6c | GET /openapi.json
2025-03-13 23:24:06,388 - trakademik - INFO - Request completed | 2635f31f-0669-464a-b599-ea0735fcdf6c | Status: 200 | Time: 0.241s
2025-03-13 23:26:05,207 - trakademik - INFO - Application started
2025-03-13 23:26:07,045 - trakademik - INFO - Request started | 3d1c73b1-db0f-4d87-b984-398632d9995a | GET /
2025-03-13 23:26:07,047 - trakademik - INFO - Request completed | 3d1c73b1-db0f-4d87-b984-398632d9995a | Status: 200 | Time: 0.001s
2025-03-13 23:26:07,503 - trakademik - INFO - Request started | b3a3dcd6-83ae-4044-b074-de6f91e178c7 | GET /favicon.ico
2025-03-13 23:26:07,516 - trakademik - INFO - Request completed | b3a3dcd6-83ae-4044-b074-de6f91e178c7 | Status: 404 | Time: 0.003s
2025-03-13 23:26:13,660 - trakademik - INFO - Request started | c4c9850a-c98c-4817-8ab5-209aa06f2b92 | GET /docs
2025-03-13 23:26:13,661 - trakademik - INFO - Request completed | c4c9850a-c98c-4817-8ab5-209aa06f2b92 | Status: 200 | Time: 0.001s
2025-03-13 23:26:13,915 - trakademik - INFO - Request started | f64ef0a6-4ab1-43ac-97a9-88737d1bb68c | GET /openapi.json
2025-03-13 23:26:14,139 - trakademik - INFO - Request completed | f64ef0a6-4ab1-43ac-97a9-88737d1bb68c | Status: 200 | Time: 0.223s
2025-03-13 23:26:33,164 - trakademik - INFO - Request started | ddd1a807-efc6-4c43-94bd-f27fdc83ef75 | POST /api/v1/students/classes/
2025-03-13 23:26:33,712 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-13 23:26:33,712 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 23:26:33,714 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-13 23:26:33,714 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 23:26:33,715 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-13 23:26:33,715 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 23:26:33,716 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 23:26:33,720 - sqlalchemy.engine.Engine - INFO - INSERT INTO classes (id, level_id, code, mentor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at
2025-03-13 23:26:33,721 - sqlalchemy.engine.Engine - INFO - [generated in 0.00080s] {'id': UUID('eba80fea-5fa2-4573-bdae-e52219fe9f87'), 'level_id': UUID('00000000-0000-0000-0000-000000000000'), 'code': 'A', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 23:26:33,740 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 23:26:33,742 - trakademik - ERROR - Unhandled exception | ddd1a807-efc6-4c43-94bd-f27fdc83ef75 | An unexpected error occurred
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 39, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\student_organization\classes.py", line 19, in create_class
    return class_crud.create_class(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\student_organization\classes.py", line 30, in create_class
    new_class = self.factory.create_class(data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\student_organization\classes\factory.py", line 42, in create_class
    return self.repository.create(class_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\database\db_repositories\sqlalchemy_repos\main_repo.py", line 75, in create
    raise RelationshipError(operation = "create", detail=str(e))
app.services.errors.database_errors.RelationshipError: An unexpected error occurred
2025-03-13 23:26:33,759 - trakademik - WARNING - RelationshipError | ddd1a807-efc6-4c43-94bd-f27fdc83ef75 | Database operation failed on None
2025-03-13 23:31:59,283 - trakademik - INFO - Application started
2025-03-13 23:36:22,400 - trakademik - INFO - Application started
2025-03-13 23:36:23,061 - trakademik - INFO - Request started | 00df4c6b-5137-4fbb-9310-2579fcc83bb6 | GET /docs
2025-03-13 23:36:23,061 - trakademik - INFO - Request completed | 00df4c6b-5137-4fbb-9310-2579fcc83bb6 | Status: 200 | Time: 0.000s
2025-03-13 23:36:23,418 - trakademik - INFO - Request started | 37eee0b6-638f-4084-8899-9dbb060d7aad | GET /openapi.json
2025-03-13 23:36:23,615 - trakademik - INFO - Request completed | 37eee0b6-638f-4084-8899-9dbb060d7aad | Status: 200 | Time: 0.196s
2025-03-13 23:36:37,515 - trakademik - INFO - Request started | 6867f897-5a9c-44cc-8974-e37c10a15178 | POST /api/v1/students/classes/
2025-03-13 23:36:37,907 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-03-13 23:36:37,908 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 23:36:37,909 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-03-13 23:36:37,910 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 23:36:37,912 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-03-13 23:36:37,912 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-03-13 23:36:37,913 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-13 23:36:37,917 - sqlalchemy.engine.Engine - INFO - INSERT INTO classes (id, level_id, code, mentor_id, student_rep_id, assistant_rep_id, "order", created_by, last_modified_by, created_at, last_modified_at, is_archived, archived_at, archive_reason, archived_by) VALUES (%(id)s::UUID, %(level_id)s::UUID, %(code)s, %(mentor_id)s::UUID, %(student_rep_id)s::UUID, %(assistant_rep_id)s::UUID, %(order)s, %(created_by)s::UUID, %(last_modified_by)s::UUID, now(), now(), %(is_archived)s, %(archived_at)s, %(archive_reason)s, %(archived_by)s::UUID) RETURNING classes.created_at, classes.last_modified_at
2025-03-13 23:36:37,918 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] {'id': UUID('afa79401-ea8c-4717-bb90-88d10f2b4658'), 'level_id': UUID('00000000-0000-0000-0000-000000000000'), 'code': 'A', 'mentor_id': None, 'student_rep_id': None, 'assistant_rep_id': None, 'order': 1, 'created_by': UUID('00000000-0000-0000-0000-000000000000'), 'last_modified_by': UUID('00000000-0000-0000-0000-000000000000'), 'is_archived': False, 'archived_at': None, 'archive_reason': None, 'archived_by': None}
2025-03-13 23:36:37,931 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-13 23:36:37,937 - trakademik - ERROR - Unhandled exception | 6867f897-5a9c-44cc-8974-e37c10a15178 | Academic level not found!
Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 111, in receive
    return self.receive_nowait()
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 106, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 124, in receive
    return receiver.item
           ^^^^^^^^^^^^^
AttributeError: 'MemoryObjectItemReceiver' object has no attribute 'item'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 147, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\streams\memory.py", line 126, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\middleware\error_handler.py", line 39, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 153, in call_next
    raise app_exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\base.py", line 140, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\fastapi\routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\starlette\concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 962, in run
    result = context.run(func, *args)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\routers\student_organization\classes.py", line 19, in create_class
    return class_crud.create_class(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\crud\student_organization\classes.py", line 30, in create_class
    new_class = self.factory.create_class(data)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dell\Desktop\Engineering\Projects\TraKademik\V2\app\services\student_organization\classes\factory.py", line 49, in create_class
    raise LevelNotFoundError(id = new_class.level_id)
app.services.errors.student_organisation_errors.LevelNotFoundError: Academic level not found!
2025-03-13 23:36:37,947 - trakademik - WARNING - EntityNotFoundError | 6867f897-5a9c-44cc-8974-e37c10a15178 | Academic level with id:00000000-0000-0000-0000-000000000000 not found
2025-03-13 23:38:53,404 - trakademik - INFO - Application started
2025-03-13 23:39:16,204 - trakademik - INFO - Request started | be02ee39-adef-4272-8517-445346dd8ce2 | POST /api/v1/students/academic levels/
2025-03-13 23:39:16,206 - trakademik - INFO - Request completed | be02ee39-adef-4272-8517-445346dd8ce2 | Status: 404 | Time: 0.001s
